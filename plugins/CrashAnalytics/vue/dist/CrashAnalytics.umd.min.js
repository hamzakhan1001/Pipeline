(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["CrashAnalytics"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["CrashAnalytics"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/CrashAnalytics/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"CrashDetails",(function(){return vt})),n.d(t,"ManageIgnoredCrashes",(function(){return Nr})),n.d(t,"ManageCrashGroups",(function(){return Dn})),n.d(t,"UnmergeCrashes",(function(){return $r})),"undefined"!==typeof window){var r=window.document.currentScript,a=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(n.p=a[1])}var o=n("19dc");
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */
o["Matomo"].on("Live.initializeVisitorActions",(function(e){var t=window,n=t.$;function r(e){e.children(":not(.actionsForPageExpander):not(.duplicate)").removeClass("last-action").last().addClass("last-action")}function a(){var e=n("<li/>").attr("class","crash-action collapsed-crashes").attr("title",Object(o["translate"])("CrashAnalytics_ClickToSeeAllCrashes")),t=Object(o["translate"])("CrashAnalytics_XCrashes",'<span class="crashes">0</span>');return n("<div>").html('<img src="plugins/CrashAnalytics/images/crash.png" class="action-list-action-icon"/>'.concat(t)).appendTo(e),e}function c(e,t){if(e.find(".crashes").length){var n=e.find(".crashes");n.text(parseInt(n.text(),10)+1)}t.addClass("duplicate").addClass("collapsed-crash-item").val("").attr("style","")}n(e).on("click",".collapsed-crashes",(function(){n(this).nextUntil(":not(.crash-action)").toggleClass("duplicate"),r(n(this).closest("ol.actionList"))})),n("ol.visitorLog",e).each((function(e,t){var r=n(t).find("li");r.each((function(e,t){var o=n(t);if(o.is(".crash-action")&&r[e-1]&&n(r[e-1]).is(".crash-action")&&r[e-2]&&n(r[e-2]).is(".crash-action")){var i=o;while(i.prev().is(".crash-action"))i=i.prev();i.is(".collapsed-crashes")||(i=a(),i.insertBefore(n(r[e-2])),c(i,n(r[e-2])),c(i,n(r[e-1]))),c(i,o)}}))}))}));var c=n("8bbf"),i={class:"crashDetails",ref:"root"},s={class:"summary",ref:"summary"},l={class:"label"},u={class:"label"},d={class:"label"},h={class:"label"},b={class:"label"},p={key:0},m={key:1},f=["href"],O={class:"label"},j={class:"crashFirstSeen"},g={class:"label"},y={class:"crashLastSeen"},v={class:"label"},C={key:0},k={class:"label"},N={class:"actions"},S=Object(c["createElementVNode"])("span",{class:"icon-document"},null,-1),V=Object(c["createElementVNode"])("span",{class:"icon-email"},null,-1),E=["title"],_=Object(c["createElementVNode"])("span",{class:"icon-hide"},null,-1),A=["value"],x=["href"],D=["innerHTML"],w=Object(c["createElementVNode"])("br",null,null,-1),B=Object(c["createElementVNode"])("br",null,null,-1),P=["innerHTML"],T={class:"ui-confirm confirmSetIgnoreContainer",ref:"confirmSetIgnoreContainer"},L=["value"],I=["value"];function M(e,t,n,r,a,o){var M=Object(c["resolveComponent"])("NotificationGroup"),R=Object(c["resolveComponent"])("CrashSourceLink"),U=Object(c["resolveComponent"])("ActivityIndicator"),q=Object(c["resolveComponent"])("CrashLog"),F=Object(c["resolveComponent"])("Notification");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",i,[Object(c["createVNode"])(M,{group:"CrashAnalytics_CrashDetails"}),Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Summary")),1),Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("span",l,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Message"))+":",1),Object(c["createElementVNode"])("pre",null,[Object(c["createElementVNode"])("code",null,Object(c["toDisplayString"])(e.crash.message),1)])]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("span",u,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Type"))+":",1),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.crash.crash_type),1)]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("span",d,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Category"))+":",1),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.crash.category||"-"),1)]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("span",h,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Source"))+":",1),Object(c["createVNode"])(R,{uri:e.crash.resource_uri,line:e.crash.resource_line,column:e.crash.resource_column,"page-url":e.crash.crash_page_url,"do-not-link-inline":!0},null,8,["uri","line","column","page-url"])]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("span",b,Object(c["toDisplayString"])(e.translate("CrashAnalytics_RecentPageUrl"))+":",1),e.crash.crash_page_url&&!/^https?:/.test(e.crash.crash_page_url)?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p,Object(c["toDisplayString"])(e.crash.crash_page_url),1)):Object(c["createCommentVNode"])("",!0),e.crash.crash_page_url?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",m,Object(c["toDisplayString"])(e.translate("CrashAnalytics_NotFound")),1)),e.crash.crash_page_url&&/^https?:/.test(e.crash.crash_page_url)?(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",{key:2,class:"recentPageUrlLink",href:e.crash.crash_page_url,target:"_blank",rel:"noreferrer noopener"},Object(c["toDisplayString"])(e.crash.crash_page_url),9,f)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("span",O,Object(c["toDisplayString"])(e.translate("CrashAnalytics_RecentStackTrace"))+":",1),Object(c["createElementVNode"])("pre",null,[Object(c["createElementVNode"])("code",null,Object(c["toDisplayString"])(e.crashStackTrace),1)])]),Object(c["createElementVNode"])("div",j,[Object(c["createElementVNode"])("span",g,Object(c["toDisplayString"])(e.translate("CrashAnalytics_FirstSeen"))+":",1),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.crash.datetime_first_seen_pretty),1)]),Object(c["createElementVNode"])("div",y,[Object(c["createElementVNode"])("span",v,Object(c["toDisplayString"])(e.translate("CrashAnalytics_LastSeen"))+":",1),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.crash.datetime_last_seen_pretty),1)]),e.crash.datetime_last_reappeared?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",C,[Object(c["createElementVNode"])("span",k,Object(c["toDisplayString"])(e.translate("CrashAnalytics_LastReappeared"))+":",1),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.crash.datetime_last_reappeared_pretty),1)])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("button",{class:"btn-flat btn-large copyCrashInfo",onClick:t[0]||(t[0]=function(t){return e.copyCrashInfo()})},[S,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("CrashAnalytics_CopyCrashInformation")),1)]),Object(c["createElementVNode"])("button",{class:"btn-flat btn-large",onClick:t[1]||(t[1]=function(t){return e.$refs.emailError.click()})},[V,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("CrashAnalytics_EmailCrashInformation")),1)]),Object(c["createElementVNode"])("span",{title:e.crash.datetime_ignored_error?e.translate("CrashAnalytics_ThisCrashIgnoredOn",e.crash.datetime_ignored_error_pretty):void 0},[Object(c["createElementVNode"])("button",{class:Object(c["normalizeClass"])(["btn-flat btn-large ignoreCrash",{disabled:e.crash.datetime_ignored_error||e.ignored||e.isIgnoring}]),onClick:t[2]||(t[2]=function(t){return e.ignoreCrash()})},[_,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("CrashAnalytics_IgnoreThisCrash"))+" ",1),Object(c["createVNode"])(U,{loading:e.isIgnoring},null,8,["loading"])],2)],8,E)]),Object(c["createElementVNode"])("textarea",{ref:"copyText",value:e.errorSummaryText,style:{position:"absolute",left:"-1000px",height:"0",padding:"0",width:"0","line-height":"0"}},null,8,A),Object(c["createElementVNode"])("a",{rel:"noreferrer noopener",target:"_blank",href:e.emailErrorLink,ref:"emailError",style:{display:"none"}},null,8,x)],512),Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Context")),1),Object(c["withDirectives"])(Object(c["createVNode"])(q,{crash:e.crash,"extra-request-params":e.extraRequestParams,onContextDisabled:t[3]||(t[3]=function(t){return e.isContextDisabled=t})},null,8,["crash","extra-request-params"]),[[c["vShow"],null!==e.isContextDisabled&&!e.isContextDisabled]]),null!==e.isContextDisabled&&e.isContextDisabled?(Object(c["openBlock"])(),Object(c["createBlock"])(F,{key:0,context:"info"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.crashContextDisabledMessage1)},null,8,D),w,B,Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.crashContextDisabledMessage2)},null,8,P)]})),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",T,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_ConfirmIgnore")),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,L),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,I)],512)],512)}var R={class:"crashLog",ref:"root","data-report":""},U=["innerHTML"],q={key:0,class:"crashes"},F={key:0},G={key:1,class:"dataTableFeatures"},H={class:"dataTableFooterNavigation"},$={class:"row dataTablePaginationControl"},z=Object(c["createTextVNode"])("    "),W={class:"row"},J={class:"col s9 m9 dataTableControls"},Y=["title"],X=Object(c["createElementVNode"])("span",{class:"icon-export"},null,-1),K=[X],Q={class:"col s3 m3 limitSelection"},Z={class:"input-field"},ee=["value"],te=["selected"];function ne(e,t,n,r,a,o){var i=Object(c["resolveComponent"])("SimplePeriodSelector"),s=Object(c["resolveComponent"])("Notification"),l=Object(c["resolveComponent"])("CrashContextCard"),u=Object(c["resolveComponent"])("ActivityIndicator"),d=Object(c["resolveDirective"])("report-export");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",R,[e.isVisitorLogDisabled?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:0,"model-value":{period:e.requestParams.period,date:e.requestParams.date},"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.changePeriod(t)})},null,8,["model-value"])),e.isVisitorLogDisabled?(Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:1,type:"transient",context:"info",noclear:!0},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.visitorLogDisabledMessage)},null,8,U)]})),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",null,[e.isLoading?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",q,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.crashContexts,(function(t){return Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:t.crashEventId,"crash-context":t,period:e.requestParams.period,date:e.requestParams.date},null,8,["crash-context","period","date"])})),128)),e.crashContexts.length||0!==e.requestParams.filter_offset?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",F,Object(c["toDisplayString"])(e.translate("CrashAnalytics_NoVisitsFoundForThisCrash")),1))])),e.isVisitorLogDisabled?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",G,[Object(c["createElementVNode"])("div",H,[Object(c["createElementVNode"])("div",$,[Object(c["createElementVNode"])("span",{class:"dataTablePrevious",onClick:t[1]||(t[1]=function(t){return e.prevPage()}),style:Object(c["normalizeStyle"])({visibility:e.requestParams.filter_offset>0?"visible":"hidden"})},"‹ Previous",4),z,Object(c["createElementVNode"])("span",{class:"dataTableNext",style:Object(c["normalizeStyle"])({visibility:this.crashContexts.length>=e.requestParams.filter_limit?"visible":"hidden"}),onClick:t[2]||(t[2]=function(t){return e.nextPage()})},"Next ›",4)]),Object(c["createElementVNode"])("div",W,[Object(c["createElementVNode"])("div",J,[Object(c["withDirectives"])(Object(c["createElementVNode"])("a",{class:"dataTableAction activateExportSelection",title:e.translate("General_ExportThisReport"),href:"",style:{"margin-right":"3.5px"},onClick:t[3]||(t[3]=Object(c["withModifiers"])((function(){}),["prevent"]))},K,8,Y),[[d,e.reportExportBinding]])]),Object(c["createElementVNode"])("div",Q,[Object(c["createElementVNode"])("div",Z,[Object(c["createElementVNode"])("select",{value:e.requestParams.filter_limit,onChange:t[4]||(t[4]=function(t){return e.limitChange(t.target.value)})},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.limitOptions,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{key:t,selected:e.requestParams.filter_limit===t?"selected":void 0},Object(c["toDisplayString"])(t),9,te)})),128))],40,ee)])])])])])),e.isLoading?(Object(c["openBlock"])(),Object(c["createBlock"])(u,{key:2,loading:e.isLoading},null,8,["loading"])):Object(c["createCommentVNode"])("",!0)])],512)}var re={class:"crashContextCard card",ref:"root"},ae={class:"card-content"},oe={class:"row"},ce={class:"col m6 s12 visitInfo"},ie={class:"sectionTitle"},se=["src"],le=["src"],ue=["src"],de={key:0},he={key:1},be={key:2},pe={key:3},me=["src","alt","title"],fe={key:4},Oe={key:5},je={key:6},ge=["src"],ye={key:7,class:"currency"},ve={key:0,class:"col m6 s12 lastActions"},Ce={class:"sectionTitle"},ke={class:"visitorLog actionList"},Ne=["href"],Se=Object(c["createElementVNode"])("span",{class:"icon-play"},null,-1),Ve={class:"row"};function Ee(e,t,n,r,a,o){var i,s,l,u,d,h,b,p,m,f,O,j,g,y,v,C,k,N,S,V,E,_,A,x,D,w,B,P,T=Object(c["resolveComponent"])("ActivityIndicator"),L=Object(c["resolveComponent"])("SourceAndStackTrace");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",re,[Object(c["createElementVNode"])("div",ae,[Object(c["createElementVNode"])("div",oe,[Object(c["createElementVNode"])("div",ce,[Object(c["createElementVNode"])("p",ie,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.crashContext.serverTimePretty),1)]),Object(c["createElementVNode"])("div",null,[null!==(i=e.crashContext.visit)&&void 0!==i&&i.browserIcon?(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",{key:0,src:null===(s=e.crashContext.visit)||void 0===s?void 0:s.browserIcon},null,8,se)):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("DevicesDetection_ColumnBrowser"))+": "+Object(c["toDisplayString"])(null===(l=e.crashContext.visit)||void 0===l?void 0:l.browser),1)]),Object(c["createElementVNode"])("div",null,[null!==(u=e.crashContext.visit)&&void 0!==u&&u.operatingSystemIcon?(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",{key:0,src:null===(d=e.crashContext.visit)||void 0===d?void 0:d.operatingSystemIcon},null,8,le)):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("DevicesDetection_ColumnOperatingSystem"))+": "+Object(c["toDisplayString"])(null===(h=e.crashContext.visit)||void 0===h?void 0:h.operatingSystem),1)]),Object(c["createElementVNode"])("div",null,[null!==(b=e.crashContext.visit)&&void 0!==b&&b.deviceTypeIcon?(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",{key:0,src:null===(p=e.crashContext.visit)||void 0===p?void 0:p.deviceTypeIcon},null,8,ue)):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("DevicesDetection_DeviceType"))+": "+Object(c["toDisplayString"])(null===(m=e.crashContext.visit)||void 0===m?void 0:m.deviceType),1)]),null!==(f=e.crashContext.visit)&&void 0!==f&&f.deviceModel?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",de,Object(c["toDisplayString"])(e.translate("DevicesDetection_Device"))+": "+Object(c["toDisplayString"])(null===(O=e.crashContext.visit)||void 0===O?void 0:O.deviceModel),1)):Object(c["createCommentVNode"])("",!0),null!==(j=e.crashContext.visit)&&void 0!==j&&j.resolution?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",he,Object(c["toDisplayString"])(e.translate("Resolution_ColumnResolution"))+": "+Object(c["toDisplayString"])(null===(g=e.crashContext.visit)||void 0===g?void 0:g.resolution),1)):Object(c["createCommentVNode"])("",!0),null!==(y=e.crashContext.visit)&&void 0!==y&&y.languageCode?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",be,Object(c["toDisplayString"])(e.translate("CrashAnalytics_BrowserLanguage"))+": "+Object(c["toDisplayString"])(null===(v=e.crashContext.visit)||void 0===v?void 0:v.languageCode),1)):Object(c["createCommentVNode"])("",!0),null!==(C=e.crashContext.visit)&&void 0!==C&&C.pluginsIcons?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",pe,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("CrashAnalytics_BrowserPlugins"))+": ",1),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])((null===(k=e.crashContext.visit)||void 0===k?void 0:k.pluginsIcons)||[],(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("img",{class:"browserPluginIcon",key:e.pluginName,src:e.pluginIcon,alt:e.pluginName,title:e.pluginName},null,8,me)})),128))])):Object(c["createCommentVNode"])("",!0),null!==(N=e.crashContext.visit)&&void 0!==N&&N.userId?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",fe,Object(c["toDisplayString"])(e.translate("UsersManager_User"))+": "+Object(c["toDisplayString"])(null===(S=e.crashContext.visit)||void 0===S?void 0:S.userId),1)):Object(c["createCommentVNode"])("",!0),null!==(V=e.crashContext.visit)&&void 0!==V&&V.visitIp?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Oe," IP: "+Object(c["toDisplayString"])(null===(E=e.crashContext.visit)||void 0===E?void 0:E.visitIp),1)):Object(c["createCommentVNode"])("",!0),null!==(_=e.crashContext.visit)&&void 0!==_&&_.country?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",je,[null!==(A=e.crashContext.visit)&&void 0!==A&&A.countryFlag?(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",{key:0,src:null===(x=e.crashContext.visit)||void 0===x?void 0:x.countryFlag},null,8,ge)):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.crashLocation),1)])):Object(c["createCommentVNode"])("",!0),null!==(D=e.crashContext.visit)&&void 0!==D&&D.siteCurrency?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ye,Object(c["toDisplayString"])(e.translate("SitesManager_Currency"))+": "+Object(c["toDisplayString"])(null===(w=e.crashContext.visit)||void 0===w?void 0:w.siteCurrency),1)):Object(c["createCommentVNode"])("",!0)]),e.isVisitorLogDisabled?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ve,[Object(c["createElementVNode"])("p",Ce,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_LastNActionsBeforeCrash",5)),1)]),e.isLoadingActions?(Object(c["openBlock"])(),Object(c["createBlock"])(T,{key:0,loading:e.isLoadingActions},null,8,["loading"])):Object(c["createCommentVNode"])("",!0),Object(c["withDirectives"])(Object(c["createElementVNode"])("ol",ke,null,512),[[c["vShow"],!e.isLoadingActions]]),null!==(B=e.crashContext.visit)&&void 0!==B&&B.sessionReplayUrl?(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",{key:1,href:null===(P=e.crashContext.visit)||void 0===P?void 0:P.sessionReplayUrl,class:"sessionReplayLink",target:"_blank"},[Se,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("CrashAnalytics_ReplayThisSession")),1)],8,Ne)):Object(c["createCommentVNode"])("",!0)])),e.isVisitorLogDisabled?(Object(c["openBlock"])(),Object(c["createBlock"])(L,{key:1,class:"col s12 m6","crash-context":e.crashContext},null,8,["crash-context"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",Ve,[e.isVisitorLogDisabled?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(L,{key:0,class:"col s12","crash-context":e.crashContext},null,8,["crash-context"]))])])],512)}var _e={class:"lastStackTrace"},Ae={class:"sectionTitle"},xe=Object(c["createTextVNode"])(": "),De={key:0},we={key:1,class:"form-description"};function Be(e,t,n,r,a,o){var i=Object(c["resolveComponent"])("CrashSourceLink");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",_e,[Object(c["createElementVNode"])("p",Ae,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_SourceAndStackTrace")),1),xe,Object(c["createVNode"])(i,{uri:e.crashContext.resourceUri,line:e.crashContext.resourceLine,column:e.crashContext.resourceColumn,"page-url":e.crashContext.pageUrl},null,8,["uri","line","column","page-url"])]),e.crashContext.stackTrace?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",De,[Object(c["createElementVNode"])("pre",null,[Object(c["createElementVNode"])("code",null,Object(c["toDisplayString"])(e.crashContext.stackTrace),1)])])):Object(c["createCommentVNode"])("",!0),e.crashContext.stackTrace?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",we,Object(c["toDisplayString"])(e.translate("CrashAnalytics_NoStackTraceFound")),1))])}var Pe=["href"],Te=["title"],Le=["title"];function Ie(e,t,n,r,a,o){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[e.isNetworkSource&&e.uri?(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",{key:0,class:"crashSourceLink",href:e.crashSourceUrl,target:"_blank",rel:"noreferrer noopener"},Object(c["toDisplayString"])(e.uriDisplay),9,Pe)):Object(c["createCommentVNode"])("",!0),!e.isNetworkSource&&e.uri?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:1,title:e.noLinkTooltip},Object(c["toDisplayString"])(e.uriDisplay),9,Te)):Object(c["createCommentVNode"])("",!0),e.uri?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:2,title:e.lineColumnTooltip},":"+Object(c["toDisplayString"])(e.line)+":"+Object(c["toDisplayString"])(e.column),9,Le)):Object(c["createCommentVNode"])("",!0)],64)}function Me(e){if(!e||!/^https?/.test(e))return!1;try{return new URL(e),!0}catch(t){return!1}}var Re=Object(c["defineComponent"])({props:{uri:String,line:Number,column:Number,pageUrl:String,doNotLinkInline:Boolean},computed:{isGroupedHashFilename:function(){return/\/\[grouped-hash]\./.test(this.uriDisplay)},isNetworkSource:function(){return Me(this.uriDisplay)&&!this.isGroupedHashFilename},uriDisplay:function(){return"inline"===this.uri?this.doNotLinkInline?Object(o["translate"])("CrashAnalytics_Inline"):this.pageUrl:this.uri},crashSourceUrl:function(){return this.uri?"inline"===this.uri?"view-source:".concat(this.pageUrl):Me(this.uri)?this.uri:null:null},lineColumnTooltip:function(){return Object(o["translate"])("CrashAnalytics_LineColumn",this.line,this.column)},noLinkTooltip:function(){if(this.isGroupedHashFilename)return Object(o["translate"])("CrashAnalytics_GroupedHashTooltipInDetails")}}});Re.render=Ie;var Ue=Re,qe=Object(c["defineComponent"])({props:{crashContext:{type:Object,required:!0}},components:{CrashSourceLink:Ue}});qe.render=Be;var Fe=qe,Ge=window,He=Ge.$,$e=Object(c["defineComponent"])({props:{crashContext:{type:Object,required:!0},period:{type:String,required:!0},date:{type:String,required:!0}},components:{ActivityIndicator:o["ActivityIndicator"],SourceAndStackTrace:Fe},data:function(){return{isLoadingActions:!0,recentActionsHtml:""}},created:function(){this.fetchActionsDisplay()},watch:{recentActionsHtml:function(){var e=this;Object(c["nextTick"])((function(){var t=He(e.$refs.root);t.find("ol.visitorLog").html(window.vueSanitize(e.recentActionsHtml)),window.initializeVisitorActions(t)}))}},computed:{crashLocation:function(){var e,t,n,r,a,o,c=this.crashContext,i=[];null!==(e=c.visit)&&void 0!==e&&e.country&&i.push(null===(r=c.visit)||void 0===r?void 0:r.country);null!==(t=c.visit)&&void 0!==t&&t.region&&i.push(null===(a=c.visit)||void 0===a?void 0:a.region);null!==(n=c.visit)&&void 0!==n&&n.city&&i.push(null===(o=c.visit)||void 0===o?void 0:o.city);return i.join(", ")},isVisitorLogDisabled:function(){return"undefined"===typeof this.crashContext.actionsBeforeCrash}},methods:{fetchActionsDisplay:function(){var e=this,t=this.crashContext;o["AjaxHelper"].fetch({module:"CrashAnalytics",action:"getCrashRecentActions",format:"html",idVisit:t.idVisit,idLogCrashEvent:t.crashEventId,period:this.period,date:this.date},{format:"html"}).then((function(t){e.recentActionsHtml=t})).finally((function(){e.isLoadingActions=!1}))}}});$e.render=Ee;var ze=$e,We={class:"simplePeriodSelector periodSelector piwikSelector borderedControl",ref:"root"},Je=["title"],Ye=Object(c["createElementVNode"])("span",{class:"icon icon-calendar"},null,-1),Xe={class:"dropdown"},Ke={style:{display:"flex"}},Qe={key:0,class:"period-date"},Ze={class:"period-type"},et={id:"otherPeriods"},tt=["onDblclick","title"],nt=["id","checked","onChange","onDblclick"];function rt(e,t,n,r,a,o){var i,s=this,l=Object(c["resolveComponent"])("PeriodDatePicker"),u=Object(c["resolveDirective"])("expand-on-click");return Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",We,[Object(c["createElementVNode"])("a",{ref:"title",id:"date",class:"title",tabindex:"-1",title:e.translate("General_ChooseDate",e.currentlyViewingText)},[Ye,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.currentlyViewingText),1)],8,Je),Object(c["createElementVNode"])("div",Xe,[Object(c["createElementVNode"])("div",Ke,["range"!==e.selectedPeriod?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Qe,[Object(c["createVNode"])(l,{id:"datepicker",period:e.selectedPeriod,date:(null===(i=this.modelValue)||void 0===i?void 0:i.period)===e.selectedPeriod?e.dateValue:null,onSelect:t[0]||(t[0]=function(t){return e.setPiwikPeriodAndDate(e.selectedPeriod,t.date)})},null,8,["period","date"])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",Ze,[Object(c["createElementVNode"])("h6",null,Object(c["toDisplayString"])(e.translate("General_Period")),1),Object(c["createElementVNode"])("div",et,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.periods,(function(n){var r;return Object(c["openBlock"])(),Object(c["createElementBlock"])("p",{key:n},[Object(c["createElementVNode"])("label",{class:Object(c["normalizeClass"])({"selected-period-label":n===e.selectedPeriod}),onDblclick:function(t){return e.changeViewedPeriod(n)},title:n===(null===(r=s.modelValue)||void 0===r?void 0:r.period)?"":e.translate("General_DoubleClickToChangePeriod")},[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",name:"period",id:"period_id_".concat(n),"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedPeriod=t}),checked:e.selectedPeriod===n,onChange:function(t){return e.selectedPeriod=n},onDblclick:function(t){return e.changeViewedPeriod(n)}},null,40,nt),[[c["vModelRadio"],e.selectedPeriod]]),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.getPeriodDisplayText(n)),1)],42,tt)])})),128))])])])])],512)),[[u,{expander:"title"}]])}var at=Object(c["defineComponent"])({props:{modelValue:Object},components:{PeriodDatePicker:o["PeriodDatePicker"]},directives:{ExpandOnClick:o["ExpandOnClick"]},emits:["update:modelValue"],data:function(){var e;return{selectedPeriod:null===(e=this.modelValue)||void 0===e?void 0:e.period}},computed:{periods:function(){return["day","week","month","year"]},dateValue:function(){return this.modelValue?Object(o["parseDate"])(this.modelValue.date):null},currentlyViewingText:function(){var e;if(null===(e=this.modelValue)||void 0===e||!e.period||!this.dateValue)return Object(o["translate"])("General_Error");var t=Object(o["format"])(this.dateValue);try{return o["Periods"].parse(this.modelValue.period,t).getPrettyString()}catch(n){return Object(o["translate"])("General_Error")}}},methods:{getPeriodDisplayText:function(e){return o["Periods"].get(e).getDisplayText()},changeViewedPeriod:function(e){this.$emit("update:modelValue",Object.assign(Object.assign({},this.modelValue),{},{period:e})),this.closePeriodSelector()},setPiwikPeriodAndDate:function(e,t){this.$emit("update:modelValue",{period:e,date:Object(o["format"])(t)}),this.closePeriodSelector()},closePeriodSelector:function(){this.$refs.root.classList.remove("expanded")}}});at.render=rt;var ot=at;function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t,n){return t&&it(e.prototype,t),n&&it(e,n),e}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */var ut=5,dt=function(){function e(){var t=this;ct(this,e),lt(this,"privateState",Object(c["reactive"])({limit:ut,offset:0,crashContexts:[],limitOptions:[5,10,25,50,100,250,500],period:o["MatomoUrl"].parsed.value.period,date:o["MatomoUrl"].parsed.value.date,idLogCrash:null})),lt(this,"requestParams",Object(c["computed"])((function(){return Object(c["readonly"])({method:"CrashAnalytics.getCrashVisitContext",filter_limit:t.privateState.limit,filter_offset:t.privateState.offset,period:t.privateState.period,date:t.privateState.date,idSite:o["MatomoUrl"].urlParsed.value.idSite,segment:o["MatomoUrl"].parsed.value.segment})}))),lt(this,"limitOptions",Object(c["computed"])((function(){return Object(c["readonly"])(t.privateState.limitOptions)}))),lt(this,"crashContexts",Object(c["computed"])((function(){return Object(c["readonly"])(t.privateState.crashContexts)})))}return st(e,[{key:"reset",value:function(e,t){this.privateState.period=e||o["MatomoUrl"].parsed.value.period,this.privateState.date=t||o["MatomoUrl"].parsed.value.date,this.privateState.offset=0,this.privateState.limit=ut,this.privateState.crashContexts=[]}},{key:"fetch",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&(this.privateState.idLogCrash=e),o["AjaxHelper"].fetch(Object.assign(Object.assign(Object.assign({},this.requestParams.value),n),{},{idLogCrash:e||this.privateState.idLogCrash}),{createErrorNotification:!1}).then((function(e){return t.privateState.crashContexts=e,t.crashContexts.value}))}},{key:"prevPage",value:function(){return this.privateState.offset=Math.max(0,this.privateState.offset-this.privateState.limit),this.fetch()}},{key:"nextPage",value:function(){return this.privateState.offset+=this.privateState.limit,this.fetch()}},{key:"setLimit",value:function(e){return this.privateState.limit=e,this.fetch()}},{key:"setPeriod",value:function(e,t){return this.privateState.period=e,this.privateState.date=t,this.privateState.offset=0,this.fetch()}}]),e}(),ht=new dt,bt=window,pt=bt.$,mt=Object(c["defineComponent"])({props:{crash:{type:Object,required:!0},extraRequestParams:{type:Object,default:function(){return{}}}},components:{SimplePeriodSelector:ot,ActivityIndicator:o["ActivityIndicator"],CrashContextCard:ze,Notification:o["Notification"]},directives:{ReportExport:o["ReportExport"]},emits:["contextDisabled"],data:function(){return{isLoading:!0,reportExportBinding:Object.assign({},this.reportExportParams)}},created:function(){ht.reset(this.extraRequestParams.period,this.extraRequestParams.date),this.fetch()},mounted:function(){var e=this;Object(c["nextTick"])((function(){pt(e.$refs.root).find(".limitSelection select").formSelect(),pt(e.$refs.root).data("uiControlObject",{param:e.requestParams})}))},watch:{requestParams:function(){pt(this.$refs.root).data("uiControlObject",{param:this.requestParams})},reportExportParams:function(){Object.assign(this.reportExportBinding,this.reportExportParams)}},methods:{fetch:function(){var e=this,t=this.crash;return this.isLoading=!0,ht.fetch(t.idlogcrash,this.extraRequestParams).then((function(){e.$emit("contextDisabled",!1)})).catch((function(t){if(e.$emit("contextDisabled",!0),"Crash context display is currently disabled."!==t.message)throw t})).finally((function(){e.isLoading=!1}))},prevPage:function(){ht.prevPage()},nextPage:function(){ht.nextPage()},limitChange:function(e){ht.setLimit(e)},changePeriod:function(e){var t=e.period,n=e.date;ht.setPeriod(t,n)}},computed:{crashContexts:function(){return ht.crashContexts.value},limitOptions:function(){return ht.limitOptions.value},reportTitle:function(){return"".concat(Object(o["translate"])("CrashAnalytics_CrashContext"),": ").concat(this.crash.message)},requestParams:function(){var e=this.crash;return Object.assign({idLogCrash:e.idlogcrash},ht.requestParams.value)},requestParamsJson:function(){return JSON.stringify(this.requestParams)},reportFormats:function(){var e={CSV:"CSV",TSV:"TSV (Excel)",XML:"XML",JSON:"Json",HTML:"HTML",RSS:"RSS"};return e},reportExportParams:function(){var e=ht.limitOptions.value;return{reportTitle:this.reportTitle,requestParams:this.requestParamsJson,apiMethod:"CrashAnalytics.getCrashVisitContext",reportFormats:this.reportFormats,maxFilterLimit:e[e.length-1]}},isVisitorLogDisabled:function(){return!1===o["Matomo"].visitorLogEnabled||!!this.crashContexts.length&&"undefined"===typeof this.crashContexts[0].actionsBeforeCrash},visitorLogDisabledMessage:function(){var e="https://matomo.org/faq/how-to/how-do-i-disable-the-visits-log-or-the-visitor-profile-feature/";return Object(o["translate"])("CrashAnalytics_CrashDetailsVisitorLogDisabledMessage",'<a rel="noreferrer noopener" target="_blank" href="'.concat(e,'">'),"</a>")}}});mt.render=ne;var ft=mt,Ot=[{label:Object(o["translate"])("CrashAnalytics_Browser"),prop:"browser"},{label:Object(o["translate"])("CrashAnalytics_OperatingSystem"),prop:"operatingSystem"},{label:Object(o["translate"])("DevicesDetection_DeviceType"),prop:"deviceType"},{label:Object(o["translate"])("CrashAnalytics_Device"),prop:"deviceModel"},{label:Object(o["translate"])("Resolution_ColumnResolution"),prop:"resolution"},{label:Object(o["translate"])("CrashAnalytics_BrowserLanguage"),prop:"languageCode"},{label:Object(o["translate"])("CrashAnalytics_BrowserPlugins"),prop:"plugins"},{label:Object(o["translate"])("UsersManager_User"),prop:"userId"},{label:"IP",prop:"visitIp"}],jt=window,gt=jt.$,yt=Object(c["defineComponent"])({props:{crash:{type:Object,required:!0},extraRequestParams:{type:Object,default:function(){return{}}}},components:{NotificationGroup:o["NotificationGroup"],ActivityIndicator:o["ActivityIndicator"],CrashLog:ft,CrashSourceLink:Ue,Notification:o["Notification"]},data:function(){return{isContextDisabled:null,ignored:!1,isIgnoring:!1}},computed:{errorSummaryText:function(){var e=this.crash,t=[];return"undefined"!==typeof e.resource_line&&(t.push("",e.resource_line),"undefined"!==typeof e.resource_column&&t.push(e.resource_column)),"".concat(Object(o["translate"])("CrashAnalytics_CrashSummary"),"\n").concat(Object(o["translate"])("CrashAnalytics_Message"),": ").concat(e.message,"\n").concat(Object(o["translate"])("CrashAnalytics_Type"),": ").concat(e.crash_type,"\n").concat(Object(o["translate"])("CrashAnalytics_Category"),": ").concat(e.category||"-","\n").concat(Object(o["translate"])("CrashAnalytics_Source"),": ").concat(e.resource_uri).concat(t.join(":"),"\n").concat(Object(o["translate"])("CrashAnalytics_RecentStackTrace"),":\n").concat(e.stack_trace||"-","\n").concat(Object(o["translate"])("CrashAnalytics_FirstSeen"),": ").concat(e.datetime_first_seen_pretty,"\n").concat(Object(o["translate"])("CrashAnalytics_LastSeen"),": ").concat(e.datetime_last_seen_pretty,"\n").concat(Object(o["translate"])("CrashAnalytics_LastReappeared"),": ").concat(e.datetime_last_reappeared_pretty,"\n").concat(this.crashContextText)},crashContextText:function(){if(!ht.crashContexts.value.length)return"";var e=ht.crashContexts.value.map((function(e){var t,n=[];if(e.visit){var r=Object(o["translate"])("CrashAnalytics_DateCrashOccurrence");if(n.push("".concat(r,": ").concat(e.visit.serverDatePretty," ").concat(e.visit.serverTimePretty)),Ot.forEach((function(t){var r,a=t.label,o=t.prop;null!==(r=e.visit)&&void 0!==r&&r[o]&&n.push("".concat(a,": ").concat(e.visit[o]))})),e.visit.country){var a=[e.visit.country];e.visit.region&&a.push(e.visit.region),e.visit.city&&a.push(e.visit.city);var c=a.join(", ");n.push("".concat(Object(o["translate"])("CrashAnalytics_Location"),": ").concat(c))}}return null!==(t=e.actionsBeforeCrash)&&void 0!==t&&t.length&&(n.push(Object(o["translate"])("CrashAnalytics_LastActionsBeforeTheCrash")),e.actionsBeforeCrash.forEach((function(e){n.push("* (".concat(e.type,") ").concat(e.title)),e.subtitle&&n.push("  ".concat(e.subtitle))}))),n.join("\n")}));return"--------\n\n".concat(Object(o["translate"])("CrashAnalytics_ContextInformation"),":\n\n").concat(e.join("\n\n"))},emailErrorLink:function(){var e=this.crash,t="".concat(Object(o["translate"])("CrashAnalytics_CrashInformation"),": ").concat(e.message),n=this.errorSummaryText;return"mailto:?subject=".concat(encodeURIComponent(t),"&body=").concat(encodeURIComponent(n))},crashStackTrace:function(){return this.crash.stack_trace||Object(o["translate"])("CrashAnalytics_NoStackTraceFound")},crashContextDisabledMessage1:function(){return Object(o["translate"])("CrashAnalytics_CrashContextDisabledMessage1",'<a href="TODO" target="_blank" rel="noreferrer noopener">',"</a>")},crashContextDisabledMessage2:function(){return Object(o["translate"])("CrashAnalytics_CrashContextDisabledMessage2","<em>","</em>")}},methods:{copyCrashInfo:function(){var e=this.$refs.copyText;e.focus(),e.select(),document.execCommand("copy"),gt(this.$refs.summary).effect("highlight")},ignoreCrash:function(){var e=this;o["Matomo"].helper.modalConfirm(this.$refs.confirmSetIgnoreContainer,{yes:function(){e.isIgnoring=!0,o["AjaxHelper"].post({method:"CrashAnalytics.setIgnoreCrash",idSite:e.crash.idsite,idLogCrash:e.crash.idlogcrash}).then((function(){e.ignored=!0,o["NotificationsStore"].show({type:"toast",message:Object(o["translate"])("General_Done"),context:"success",group:"CrashAnalytics_CrashDetails",placeat:"-"}),o["Matomo"].helper.lazyScrollTo(e.$refs.root,0)})).finally((function(){e.isIgnoring=!1}))}})}}});yt.render=M;var vt=yt;function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nt(e,t,n){return t&&kt(e.prototype,t),n&&kt(e,n),e}
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */var St=function(){function e(){Ct(this,e)}return Nt(e,[{key:"fetchCrash",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["AjaxHelper"].fetch(Object.assign({method:"CrashAnalytics.getCrashSummary",idSite:o["Matomo"].idSite,idLogCrash:e},t))}}]),e}(),Vt=new St;function Et(e){return Et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function _t(e,t){return Bt(e)||wt(e,t)||xt(e,t)||At()}function At(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xt(e,t){if(e){if("string"===typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done);c=!0)if(o.push(r.value),t&&o.length===t)break}catch(s){i=!0,a=s}finally{try{c||null==n["return"]||n["return"]()}finally{if(i)throw a}}return o}}function Bt(e){if(Array.isArray(e))return e}function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t,n){return t&&Tt(e.prototype,t),n&&Tt(e,n),e}function It(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mt(e,t)}function Mt(e,t){return Mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mt(e,t)}function Rt(e){var t=Ft();return function(){var n,r=Gt(e);if(t){var a=Gt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ut(this,n)}}function Ut(e,t){if(t&&("object"===Et(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qt(e)}function qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Gt(e){return Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gt(e)}
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */var Ht=window,$t=Ht.$,zt="CrashDetails";function Wt(e){try{var t=JSON.parse($t(e).attr("data-row-metadata"));return t.idlogcrash?parseInt(t.idlogcrash,10):0}catch(n){return 0}}var Jt=window.DataTable_RowAction,Yt=function(e){It(n,e);var t=Rt(n);function n(e){var r;return Pt(this,n),r=t.call(this,e),r.actionName=zt,r.trEventName="piwikTriggerCrashDetailAction",r}return Lt(n,[{key:"openPopover",value:function(e,t,n){var r="".concat(e,":").concat(encodeURIComponent(t),":").concat(encodeURIComponent(JSON.stringify(n)));broadcast.propagateNewPopoverParameter("RowAction","".concat(zt,":").concat(r))}},{key:"trigger",value:function(e){var t=Wt(e);t&&this.performAction(t)}},{key:"performAction",value:function(e){var t=this.dataTable.param.action;this.openPopover(t,e,{period:this.dataTable.param.period,date:this.dataTable.param.date})}},{key:"doOpenPopover",value:function(e){var t=window.Piwik_Popover.showLoading(Object(o["translate"])("CrashAnalytics_CrashDetails")),n=e.split(":"),r=_t(n,3),a=r[1],c=r[2],i=parseInt(a,10);if(i){var s={};try{s=JSON.parse(decodeURIComponent(c))}catch(l){}Vt.fetchCrash(i,s).then((function(e){if(!e)return window.Piwik_Popover.setTitle(Object(o["translate"])("CrashAnalytics_FailedToLoadCrash")),window.Piwik_Popover.setContent(Object(o["translate"])("CrashAnalytics_CrashDataMissing")),void t.dialog();var n={crash:e,extraRequestParams:s},r=Object(o["createVueApp"])({template:'<popover v-bind="bind"/>',data:function(){return{bind:n}}});r.component("popover",vt);var a=document.createElement("div");r.mount(a),window.Piwik_Popover.setTitle('"'.concat(e.message,'"')),window.Piwik_Popover.setContent(a),t.dialog()}))}}}]),n}(Jt);window.DataTable_RowActions_Registry.register({name:zt,dataTableIcon:"icon-zoom-in",order:51,dataTableIconTooltip:[Object(o["translate"])("CrashAnalytics_SeeCrashDetails"),""],isAvailableOnReport:function(e){return e&&"CrashAnalytics"===e.module},isAvailableOnRow:function(e,t){return Wt(t)>0},createInstance:function(e){if(null!==e&&"undefined"!==typeof e.crashDetailsInstance)return e.crashDetailsInstance;var t=new Yt(e);return null!==e&&(e.crashDetailsInstance=t),t}});var Xt={class:"mergeCrashes"},Kt={class:"intro"},Qt={key:0,class:"notMergable"},Zt={key:1,class:"notMergable"},en={class:"searchHeader"},tn=Object(c["createElementVNode"])("th",null,null,-1),nn={key:0},rn={colspan:"2"},an=["checked","onChange"],on=Object(c["createElementVNode"])("span",null,null,-1),cn={class:"pagination"},sn={class:"footer"},ln=["disabled"],un={class:"ui-confirm confirmMergeCrashes",id:"confirmMergeCrashes",ref:"confirmMergeCrashes"},dn={class:"browser-default"},hn=["innerHTML"],bn={key:0,style:{"margin-left":"4px"}},pn={key:1,style:{"margin-left":"4px"}},mn=["value"],fn=["value"];function On(e,t,n,r,a,o){var i=Object(c["resolveComponent"])("Notification"),s=Object(c["resolveComponent"])("Field"),l=Object(c["resolveComponent"])("Alert"),u=Object(c["resolveDirective"])("content-table");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Xt,[Object(c["createElementVNode"])("div",Kt,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Merging"))+" '"+Object(c["toDisplayString"])(e.crash.message)+"' @ "+Object(c["toDisplayString"])(e.truncatedResourceUri),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_MergeCrashesIntro1")),1)]),e.isMergable||e.isInline?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Qt,[Object(c["createVNode"])(i,{type:"transient",context:"info",noclear:!0},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("CrashAnalytics_CrashHasAlreadyBeenMerged")),1)]})),_:1})])),e.isInline?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Zt,[Object(c["createVNode"])(i,{type:"transient",context:"info",noclear:!0},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("CrashAnalytics_InlineCrashesCannotBeMerged")),1)]})),_:1})])):Object(c["createCommentVNode"])("",!0),e.isMergable&&!e.isInline?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:2,class:Object(c["normalizeClass"])(["crashSearch",{loading:e.isLoading}])},[Object(c["createElementVNode"])("div",en,[Object(c["createVNode"])(s,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.search=t}),uicontrol:"text",placeholder:"".concat(e.translate("CrashAnalytics_EnterSearchTerm"),"...")},null,8,["modelValue","placeholder"])]),Object(c["withDirectives"])(Object(c["createElementVNode"])("table",null,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[tn,Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_CrashMessage")),1)])]),Object(c["createElementVNode"])("tbody",null,[null!==e.searchResults&&0===e.searchResults.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",nn,[Object(c["createElementVNode"])("td",rn,[Object(c["createElementVNode"])("em",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_NoCrashesToMergeWith")),1)])])):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.searchResults||[],(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t.idlogcrash},[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("label",null,[Object(c["createElementVNode"])("input",{type:"checkbox",checked:e.selectedCrashes[t.idlogcrash],onChange:function(n){return e.selectedCrashes[t.idlogcrash]=e.selectedCrashes[t.idlogcrash]?void 0:t.message}},null,40,an),on])]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.message),1)])})),128))])],512),[[u]]),Object(c["createElementVNode"])("div",cn,[Object(c["createElementVNode"])("a",{href:"",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(t){return e.prev()}),["prevent"])),class:Object(c["normalizeClass"])([{disabled:!e.hasPrev},"prev"])},Object(c["toDisplayString"])(e.translate("General_Previous")),3),Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["divider",{disabled:!e.hasPrev||!e.hasNext}])},"—",2),Object(c["createElementVNode"])("a",{href:"",onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(t){return e.next()}),["prevent"])),class:Object(c["normalizeClass"])([{disabled:!e.hasNext},"next"])},Object(c["toDisplayString"])(e.translate("General_Next")),3)])],2)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",sn,[Object(c["createElementVNode"])("a",{href:"",class:"modal-action modal-close btn mergeBtn",onClick:t[3]||(t[3]=Object(c["withModifiers"])((function(t){return e.merge()}),["prevent"])),style:{"margin-right":"3.5px"},disabled:e.isLoading||e.toMergeCrashes.length<1?"disabled":void 0},Object(c["toDisplayString"])(e.translate("CrashAnalytics_Merge")),9,ln),Object(c["createElementVNode"])("a",{href:"",class:"modal-action modal-close modal-no",onClick:t[4]||(t[4]=Object(c["withModifiers"])((function(t){return e.cancel()}),["prevent"]))},Object(c["toDisplayString"])(e.translate("General_Cancel")),1)]),Object(c["createElementVNode"])("div",un,[Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_AreYouSureYouWantToMerge",e.truncatedResourceUri)),1),Object(c["createElementVNode"])("ul",dn,[Object(c["createElementVNode"])("li",null,Object(c["toDisplayString"])(e.crash.message),1),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.toMergeCrashes,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},Object(c["toDisplayString"])(e),1)})),128))]),Object(c["createVNode"])(l,{severity:"info"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("p",null,[Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.ifMergedTheseCrashesWillAppearAs)},null,8,hn),e.reArchiveLastN<=0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",bn,Object(c["toDisplayString"])(e.translate("CrashAnalytics_ThisWillOnlyApplyToFutureReports")),1)):Object(c["createCommentVNode"])("",!0),e.reArchiveLastN>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",pn,Object(c["toDisplayString"])(e.translate("CrashAnalytics_ThisWillApplyToFutureReportsAndSomeInPast",e.reArchiveLastN)),1)):Object(c["createCommentVNode"])("",!0)])]})),_:1}),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,mn),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,fn)],512)])}var jn=n("a5a2");function gn(e){return Cn(e)||vn(e)||Sn(e)||yn()}function yn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vn(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Cn(e){if(Array.isArray(e))return Vn(e)}function kn(e,t){return _n(e)||En(e,t)||Sn(e,t)||Nn()}function Nn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sn(e,t){if(e){if("string"===typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(e,t):void 0}}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function En(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done);c=!0)if(o.push(r.value),t&&o.length===t)break}catch(s){i=!0,a=s}finally{try{c||null==n["return"]||n["return"]()}finally{if(i)throw a}}return o}}function _n(e){if(Array.isArray(e))return e}var An=10,xn=Object(c["defineComponent"])({props:{crash:{type:Object,required:!0}},directives:{ContentTable:o["ContentTable"]},components:{Field:jn["Field"],Notification:o["Notification"],Alert:o["Alert"]},data:function(){return{isLoading:!1,searchResults:null,search:"",offset:0,limit:An,selectedCrashes:{},hasNext:!1,hasPrev:!1}},created:function(){this.onSearchChanged=Object(o["debounce"])(this.onSearchChanged),this.fetch()},watch:{search:function(){this.onSearchChanged()}},methods:{onSearchChanged:function(){this.fetch()},fetch:function(){var e=this,t=this.crash;this.isLoading=!0,o["AjaxHelper"].fetch({method:"CrashAnalytics.searchCrashMessagesForMerge",searchTerm:this.search,resourceUri:t.resource_uri,limit:this.limit+1,offset:this.offset,excludeIdLogCrashes:[t.idlogcrash]}).then((function(t){e.hasNext=t.length>e.limit,e.hasPrev=e.offset>0,e.searchResults=t.slice(0,e.limit)})).finally((function(){e.isLoading=!1}))},prev:function(){this.offset<=0||(this.offset-=this.limit,this.fetch())},next:function(){this.hasNext&&(this.offset+=this.limit,this.fetch())},merge:function(){var e=this;o["Matomo"].helper.modalConfirm(this.$refs.confirmMergeCrashes,{yes:function(){var t=Object.entries(e.selectedCrashes).filter((function(e){var t=kn(e,2),n=t[1];return!!n})).map((function(e){var t=kn(e,1),n=t[0];return n})).concat([e.crash.idlogcrash]);e.isLoading=!0,o["AjaxHelper"].fetch({method:"CrashAnalytics.mergeCrashes",idLogCrashes:t}).then((function(){window.Piwik_Popover.close(),o["NotificationsStore"].scrollToNotification(o["NotificationsStore"].show({id:"mergeSuccess",message:Object(o["translate"])("CrashAnalytics_MergeSuccess"),context:"success",type:"toast"}))}))}})},cancel:function(){window.Piwik_Popover.close()}},computed:{isInline:function(){var e=this.crash;return"inline"===e.resource_uri},truncatedResourceUri:function(){var e=this.crash,t=e.resource_uri||Object(o["translate"])("General_Unknown");return t.length>100?"".concat(t.substring(0,100),"..."):t},toMergeCrashes:function(){return Object.values(this.selectedCrashes).filter((function(e){return!!e})).sort()},isMergable:function(){var e=this.crash;return!e.group_idlogcrash||e.group_idlogcrash===e.idlogcrash},lowestIdlogcrashMessage:function(){var e=this.crash,t=Object.entries(this.selectedCrashes).map((function(e){var t=kn(e,2),n=t[0],r=t[1];return{idlogcrash:parseInt(n,10),message:r}})),n=[].concat(gn(t),[e]);return n.sort((function(e,t){return e.idlogcrash-t.idlogcrash})),'<em>"'.concat(n[0].message,'"</em>')},ifMergedTheseCrashesWillAppearAs:function(){return Object(o["translate"])("CrashAnalytics_IfMergedTheseCrashesWillAppearAs",this.lowestIdlogcrashMessage)},reArchiveLastN:function(){return o["Matomo"].CrashAnalytics.reArchiveReportsLastN}}});xn.render=On;var Dn=xn;function wn(e){return wn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(e)}function Bn(e,t){return Mn(e)||In(e,t)||Tn(e,t)||Pn()}function Pn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tn(e,t){if(e){if("string"===typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function In(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done);c=!0)if(o.push(r.value),t&&o.length===t)break}catch(s){i=!0,a=s}finally{try{c||null==n["return"]||n["return"]()}finally{if(i)throw a}}return o}}function Mn(e){if(Array.isArray(e))return e}function Rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t,n){return t&&Un(e.prototype,t),n&&Un(e,n),e}function Fn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gn(e,t)}function Gn(e,t){return Gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Gn(e,t)}function Hn(e){var t=Wn();return function(){var n,r=Jn(e);if(t){var a=Jn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $n(this,n)}}function $n(e,t){if(t&&("object"===wn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zn(e)}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Jn(e){return Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jn(e)}
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */var Yn=window,Xn=Yn.$,Kn="MergeCrashes";function Qn(e){try{var t=JSON.parse(Xn(e).attr("data-row-metadata"));return t.idlogcrash?parseInt(t.idlogcrash,10):0}catch(n){return 0}}var Zn=window.DataTable_RowAction,er=function(e){Fn(n,e);var t=Hn(n);function n(e){var r;return Rn(this,n),r=t.call(this,e),r.actionName=Kn,r.trEventName="piwikTriggerMergeCrashesAction",r}return qn(n,[{key:"openPopover",value:function(e,t){var n="".concat(e,":").concat(encodeURIComponent(t));broadcast.propagateNewPopoverParameter("RowAction","".concat(Kn,":").concat(n))}},{key:"trigger",value:function(e){var t=Qn(e);t&&this.performAction(t)}},{key:"performAction",value:function(e){var t=this.dataTable.param.action;this.openPopover(t,e)}},{key:"doOpenPopover",value:function(e){var t=window.Piwik_Popover.showLoading(Object(o["translate"])("CrashAnalytics_MergeCrashes")),n=e.split(":"),r=Bn(n,2),a=r[1],c=parseInt(a,10);c&&Vt.fetchCrash(c,{}).then((function(e){if(!e)return window.Piwik_Popover.setTitle(Object(o["translate"])("CrashAnalytics_FailedToLoadCrash")),window.Piwik_Popover.setContent(Object(o["translate"])("CrashAnalytics_CrashDataMissing")),void t.dialog();var n={crash:e},r=Object(o["createVueApp"])({template:'<popover v-bind="bind"/>',data:function(){return{bind:n}}});r.component("popover",Dn);var a=document.createElement("div");r.mount(a),window.Piwik_Popover.setTitle(Object(o["translate"])("CrashAnalytics_MergeCrashes")),window.Piwik_Popover.setContent(a),t.dialog()}))}}]),n}(Zn);window.DataTable_RowActions_Registry.register({name:Kn,dataTableIcon:"plugins/CrashAnalytics/images/merge.svg",order:52,dataTableIconTooltip:[Object(o["translate"])("CrashAnalytics_MergeCrashes"),""],isAvailableOnReport:function(e){return e&&"CrashAnalytics"===e.module},isAvailableOnRow:function(e,t){return o["Matomo"].CrashAnalytics.hasWriteAccess&&Qn(t)>0},createInstance:function(e){if(null!==e&&"undefined"!==typeof e.mergeCrashesInstance)return e.mergeCrashesInstance;var t=new er(e);return null!==e&&(e.mergeCrashesInstance=t),t}});var tr={class:"message"},nr={class:"type"},rr={class:"source"},ar={class:"ignoredSince"},or={class:"firstSeen"},cr={class:"action"},ir={colspan:"7"},sr={class:"loadingPiwik"},lr=Object(c["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif"},null,-1),ur={colspan:"7"},dr=["id"],hr={class:"message"},br={class:"type"},pr={class:"source"},mr={class:"ignoredSince"},fr={class:"firstSeen"},Or={class:"action"},jr=["title","onClick"],gr={class:"ui-confirm confirmUnignoreIgnoreContainer",ref:"confirmUnignoreIgnoreContainer"},yr=["value"],vr=["value"];function Cr(e,t,n,r,a,o){var i=this,s=Object(c["resolveComponent"])("ContentBlock"),l=Object(c["resolveDirective"])("content-table");return Object(c["openBlock"])(),Object(c["createBlock"])(s,{class:"manageIgnoredCrashes","content-title":e.translate("CrashAnalytics_IgnoredCrashesWidget"),feature:e.translate("CrashAnalytics_IgnoredCrashesWidget")},{default:Object(c["withCtx"])((function(){var t;return[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_ManageIgnoreIntro1")),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_ManageIgnoreIntro2")),1),Object(c["withDirectives"])(Object(c["createElementVNode"])("table",null,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",tr,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Message")),1),Object(c["createElementVNode"])("th",nr,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Type")),1),Object(c["createElementVNode"])("th",rr,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Source")),1),Object(c["createElementVNode"])("th",ar,Object(c["toDisplayString"])(e.translate("CrashAnalytics_IgnoredSince")),1),Object(c["createElementVNode"])("th",or,Object(c["toDisplayString"])(e.translate("CrashAnalytics_FirstSeen")),1),Object(c["createElementVNode"])("th",cr,Object(c["toDisplayString"])(e.translate("General_Actions")),1)])]),Object(c["createElementVNode"])("tbody",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",ir,[Object(c["createElementVNode"])("span",sr,[lr,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("General_LoadingData")),1)])])],512),[[c["vShow"],e.isLoading||e.isUpdating]]),Object(c["withDirectives"])(Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",ur,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_NoCrashesIgnored")),1)])],512),[[c["vShow"],!e.isLoading&&0===e.ignored.length]]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.ignored,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{id:"crash".concat(t.idlogcrash),class:"crashes",key:t.idlogcrash},[Object(c["createElementVNode"])("td",hr,Object(c["toDisplayString"])(t.message),1),Object(c["createElementVNode"])("td",br,Object(c["toDisplayString"])(t.crash_type),1),Object(c["createElementVNode"])("td",pr,Object(c["toDisplayString"])(t.resource_uri),1),Object(c["createElementVNode"])("td",mr,Object(c["toDisplayString"])(t.date_ignored_error_pretty),1),Object(c["createElementVNode"])("td",fr,Object(c["toDisplayString"])(t.date_first_seen_pretty),1),Object(c["createElementVNode"])("td",Or,[Object(c["createElementVNode"])("a",{class:"table-action icon-show unignoreCrash",title:e.translate("CrashAnalytics_UnignoreThisCrash"),onClick:Object(c["withModifiers"])((function(n){return e.unignore(t)}),["prevent"])},null,8,jr)])],8,dr)})),128))])],512),[[l]]),Object(c["createElementVNode"])("div",gr,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_ConfirmUnignore",null===(t=i.crashToUnignore)||void 0===t?void 0:t.message)),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,yr),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,vr)],512)]})),_:1},8,["content-title","feature"])}var kr=Object(c["defineComponent"])({components:{ContentBlock:o["ContentBlock"]},directives:{ContentTable:o["ContentTable"]},data:function(){return{ignored:[],isLoading:!1,isUpdating:!1,crashToUnignore:null}},created:function(){this.fetch()},methods:{fetch:function(){var e=this;this.isLoading=!0,o["AjaxHelper"].fetch({method:"CrashAnalytics.getIgnoredCrashes"}).then((function(t){e.ignored=t})).finally((function(){e.isLoading=!1}))},unignore:function(e){var t=this;this.crashToUnignore=e,o["Matomo"].helper.modalConfirm(this.$refs.confirmUnignoreIgnoreContainer,{yes:function(){t.isUpdating=!0,o["AjaxHelper"].fetch({method:"CrashAnalytics.setIgnoreCrash",idSite:o["Matomo"].idSite,idLogCrash:e.idlogcrash,ignore:0}).then((function(){return o["NotificationsStore"].show({type:"toast",message:Object(o["translate"])("General_Done"),context:"success"}),o["Matomo"].helper.lazyScrollTo(t.$refs.root,0),t.fetch()})).finally((function(){t.isUpdating=!1,t.crashToUnignore=null}))}})}}});kr.render=Cr;var Nr=kr,Sr={key:0},Vr={colspan:"4"},Er={class:"groupHeader"},_r={class:"firstGroupMessage"},Ar={class:"groupDetails"},xr=Object(c["createElementVNode"])("div",{class:"leftBar"},null,-1),Dr=Object(c["createElementVNode"])("span",{class:"dash"},null,-1),wr={class:"message"},Br=["title","onClick"],Pr=Object(c["createElementVNode"])("img",{src:"plugins/CrashAnalytics/images/merge_black.svg"},null,-1),Tr=[Pr],Lr={class:"ui-confirm confirmUnmergeCrashes",id:"confirmUnmergeCrashes",ref:"confirmUnmergeCrashes"},Ir={class:"browser-default"},Mr=["value"],Rr=["value"];function Ur(e,t,n,r,a,o){var i=Object(c["resolveComponent"])("Passthrough"),s=Object(c["resolveComponent"])("ContentBlock"),l=Object(c["resolveDirective"])("content-table");return Object(c["openBlock"])(),Object(c["createBlock"])(s,{"content-title":e.translate("CrashAnalytics_UnmergeCrashes"),feature:e.translate("CrashAnalytics_UnmergeCrashes"),class:"unmergeCrashes"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_UnmergeCrashesIntro")),1),Object(c["withDirectives"])(Object(c["createElementVNode"])("table",{class:Object(c["normalizeClass"])({loading:e.isLoading})},[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Messages")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Type")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_Source")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("General_Actions")),1)])]),Object(c["createElementVNode"])("tbody",null,[null!==e.crashGroups&&0===e.crashGroups.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",Sr,[Object(c["createElementVNode"])("td",Vr,Object(c["toDisplayString"])(e.translate("CrashAnalytics_NoCrashesMerged")),1)])):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.crashGroups||[],(function(t,n){return Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:n},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("tr",Er,[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",_r,Object(c["toDisplayString"])(t[0].message),1),Object(c["createElementVNode"])("div",Ar,[xr,Object(c["createElementVNode"])("ul",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.slice(1),(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e.idlogcrash},[Dr,Object(c["createElementVNode"])("span",wr,Object(c["toDisplayString"])(e.message),1)])})),128))])])]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t[0].crash_type),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t[0].resource_uri||e.translate("General_Unknown")),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("a",{class:"table-action unmerge",title:e.translate("CrashAnalytics_UnmergeThisCrash"),onClick:Object(c["withModifiers"])((function(n){return e.unmerge(t)}),["prevent"])},Tr,8,Br)])])]})),_:2},1024)})),128))])],2),[[l]]),Object(c["createElementVNode"])("div",Lr,[Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("CrashAnalytics_AreYouSureYouWantToUnmerge")),1),Object(c["createElementVNode"])("ul",Ir,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.groupToUnmerge||[],(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},Object(c["toDisplayString"])(e.message),1)})),128))]),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Mr),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Rr)],512)]})),_:1},8,["content-title","feature"])}function qr(e,t,n,r,a,o){return Object(c["renderSlot"])(e.$slots,"default")}var Fr=Object(c["defineComponent"])({});Fr.render=qr;var Gr=Fr,Hr=Object(c["defineComponent"])({components:{ContentBlock:o["ContentBlock"],Passthrough:Gr},directives:{ContentTable:o["ContentTable"]},data:function(){return{isLoading:!1,crashGroups:null,groupToUnmerge:null}},created:function(){this.fetch()},methods:{fetch:function(){var e=this;this.isLoading=!0,o["AjaxHelper"].fetch({method:"CrashAnalytics.getCrashGroups"}).then((function(t){e.crashGroups=t})).finally((function(){e.isLoading=!1}))},unmerge:function(e){var t=this;this.groupToUnmerge=e,o["Matomo"].helper.modalConfirm(this.$refs.confirmUnmergeCrashes,{yes:function(){t.isLoading=!0,o["AjaxHelper"].fetch({method:"CrashAnalytics.unmergeCrashGroup",idLogCrash:e[0].idlogcrash}).then((function(){o["NotificationsStore"].scrollToNotification(o["NotificationsStore"].show({id:"unmergeSuccess",message:Object(o["translate"])("CrashAnalytics_UnmergeSuccess"),context:"success",type:"toast"})),t.fetch()}))}})}}});Hr.render=Ur;var $r=Hr;
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */}})}));
//# sourceMappingURL=CrashAnalytics.umd.min.js.map