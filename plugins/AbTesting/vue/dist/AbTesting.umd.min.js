(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["AbTesting"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["AbTesting"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/AbTesting/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"toLocalTime",(function(){return a})),n.d(t,"TargetTest",(function(){return m})),n.d(t,"ExperimentUrlTarget",(function(){return w})),n.d(t,"ExperimentsStore",(function(){return P})),n.d(t,"ExperimentEdit",(function(){return qi})),n.d(t,"ExperimentsList",(function(){return Ca})),n.d(t,"ExperimentsManage",(function(){return Ia})),n.d(t,"checkForActiveExperiments",(function(){return Ha})),n.d(t,"ExperimentPageLink",(function(){return za})),n.d(t,"Summary",(function(){return ao})),n.d(t,"SummaryPage",(function(){return xo})),"undefined"!==typeof window){var r=window.document.currentScript,i=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(n.p=i[1])}
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */
function a(e,t){if(e){var n=e;if(n){n="".concat(n).replace(/-/g,"/");try{var r=new Date("".concat(n," UTC"));return t?r.toLocaleString():r}catch(u){try{var i=new Date(Date.parse("".concat(n," UTC")));return t?i.toLocaleString():i}catch(m){var a=n.substr(0,10),o=n.substr(11),l=a.split("/"),c=o.split(":");if(3===l.length&&3===c.length){var s=new Date(parseInt(l[0],10),parseInt(l[1],10)-1,parseInt(l[2],10),parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)),d=s.getTime()+6e4*s.getTimezoneOffset();return s=new Date(d),t?s.toLocaleString():s}}}}return t?"":void 0}}var o=n("8bbf"),l={class:"form-group targetTest"};function c(e,t,n,r,i,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("label",null,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("AbTesting_TargetPageTestTitle"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_TargetPageTestLabel")),1)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",id:"urltargettest",placeholder:"http://www.example.com/","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.url=t}),class:Object(o["normalizeClass"])({invalid:e.url&&!e.matches&&e.isValid})},null,2),[[o["vModelText"],e.url]]),Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("span",{class:"testInfo"},Object(o["toDisplayString"])(e.translate("AbTesting_TargetPageTestErrorInvalidUrl")),513),[[o["vShow"],e.url&&!e.isValid]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",{class:"testInfo matches"},Object(o["toDisplayString"])(e.translate("AbTesting_TargetPageTestUrlMatches")),513),[[o["vShow"],e.url&&e.matches&&e.isValid]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",{class:"testInfo notMatches"},Object(o["toDisplayString"])(e.translate("AbTesting_TargetPageTestUrlNotMatches")),513),[[o["vShow"],e.url&&!e.matches&&e.isValid]])])])}
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */function s(e){try{return new URL(e),!0}catch(t){return!1}}function d(e){return(e||[]).filter((function(e){return e&&e.value}))}var u=Object(o["defineComponent"])({props:{includedTargets:Array,excludedTargets:Array},data:function(){return{url:"",matches:!1,isLoadingTestMatchPage:!1}},watch:{isValid:function(e){e||(this.matches=!1)},includedTargets:function(){this.runTest()},excludedTargets:function(){this.runTest()},url:function(){this.runTest()}},methods:{runTest:function(){if(this.isValid){var e=window.piwikAbTestingTarget.location;window.piwikAbTestingTarget.location=new URL(this.targetUrl);var t=d(this.includedTargets),n=d(this.excludedTargets);this.matches=window.piwikAbTestingTarget.matchesTargets(t,n),window.piwikAbTestingTarget.location=e}}},computed:{targetUrl:function(){return(this.url||"").trim()},isValid:function(){return this.targetUrl&&s(this.targetUrl)}}});u.render=c;var m=u,p={style:{width:"100%"}},b={name:"targetAttribute"},v={name:"targetType"},g={name:"targetValue"},f={name:"targetValue2"},O=["title"],j=["title"];function h(e,t,n,r,i,a){var l=Object(o["resolveComponent"])("Field");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["form-group urltarget valign-wrapper",{disabled:e.disableIfNoValue&&!e.modelValue.value}])},[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("div",b,[Object(o["createVNode"])(l,{uicontrol:"select",name:"targetAttribute","model-value":e.modelValue.attribute,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("update:modelValue",Object.assign(Object.assign({},e.modelValue),{},{attribute:t}))}),title:e.translate("AbTesting_Rule"),options:e.targetAttributes,"full-width":!0},null,8,["model-value","title","options"])]),Object(o["createElementVNode"])("div",v,[Object(o["createVNode"])(l,{uicontrol:"select",name:"targetType","model-value":e.pattern_type,"onUpdate:modelValue":t[1]||(t[1]=function(t){e.onTypeChange(t)}),options:e.targetOptions[e.modelValue.attribute],"full-width":!0},null,8,["model-value","options"])]),Object(o["createElementVNode"])("div",g,[Object(o["withDirectives"])(Object(o["createVNode"])(l,{uicontrol:"text",name:"targetValue",placeholder:"eg. ".concat(e.targetExamples[e.modelValue.attribute]),"model-value":e.modelValue.value,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.$emit("update:modelValue",Object.assign(Object.assign({},e.modelValue),{},{value:t.trim()}))}),"full-width":!0},null,8,["placeholder","model-value"]),[[o["vShow"],"any"!==e.pattern_type]])]),Object(o["createElementVNode"])("div",f,[Object(o["withDirectives"])(Object(o["createVNode"])(l,{uicontrol:"text",name:"targetValue2","model-value":e.modelValue.value2,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.$emit("update:modelValue",Object.assign(Object.assign({},e.modelValue),{},{value2:t.trim()}))}),"full-width":!0,placeholder:e.translate("AbTesting_UrlParameterValueToMatchPlaceholder")},null,8,["model-value","placeholder"]),[[o["vShow"],"urlparam"===e.modelValue.attribute&&e.pattern_type&&"exists"!==e.pattern_type&&"not_exists"!==e.pattern_type]])])]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",{class:"icon-plus valign",title:e.translate("General_Add"),onClick:t[4]||(t[4]=function(t){return e.$emit("addUrl")})},null,8,O),[[o["vShow"],e.showAddUrl]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",{class:"icon-minus valign",title:e.translate("General_Remove"),onClick:t[5]||(t[5]=function(t){return e.$emit("removeUrl")})},null,8,j),[[o["vShow"],e.canBeRemoved]])],2)}var E=n("19dc"),y=n("a5a2");function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */var S=function(){function e(){var t=this;x(this,e),N(this,"privateState",Object(o["reactive"])({attributes:[]})),N(this,"state",Object(o["computed"])((function(){return Object(o["readonly"])(t.privateState)}))),N(this,"attributes",Object(o["computed"])((function(){return t.state.value.attributes}))),N(this,"initPromise",null)}return T(e,[{key:"init",value:function(){var e=this;return this.initPromise||(this.initPromise=E["AjaxHelper"].fetch({method:"AbTesting.getAvailableTargetAttributes",filter_limit:"-1"}).then((function(t){return e.privateState.attributes=t,e.attributes.value}))),this.initPromise}}]),e}(),_=new S,A=Object(o["defineComponent"])({props:{modelValue:{type:Object,required:!0},canBeRemoved:Boolean,disableIfNoValue:Boolean,allowAny:Boolean,showAddUrl:Boolean},components:{Field:y["Field"]},created:function(){_.init()},emits:["addUrl","removeUrl","update:modelValue"],watch:{modelValue:function(e){var t=this;if(e.attribute){var n=this.targetOptions[e.attribute],r=n.find((function(e){return e.key===t.pattern_type}));!r&&n[0]&&this.onTypeChange(n[0].key)}}},methods:{onTypeChange:function(e){var t=0,n=e;0===e.indexOf("not_")&&(n=e.substring("not_".length),t=1),this.$emit("update:modelValue",Object.assign(Object.assign({},this.modelValue),{},{type:n,inverted:t}))}},computed:{pattern_type:function(){var e=this.modelValue.type;return this.modelValue.inverted&&"0"!==this.modelValue.inverted&&(e="not_".concat(this.modelValue.type)),e},targetAttributes:function(){return _.attributes.value.map((function(e){return{key:e.value,value:e.name}}))},targetOptions:function(){var e=this,t={};return _.attributes.value.forEach((function(n){t[n.value]=[],e.allowAny&&"url"===n.value&&t[n.value].push({value:Object(E["translate"])("AbTesting_TargetTypeIsAny"),key:"any"}),n.types.forEach((function(e){t[n.value].push({value:e.name,key:e.value}),t[n.value].push({value:Object(E["translate"])("AbTesting_TargetTypeIsNot",e.name),key:"not_".concat(e.value)})}))})),t},targetExamples:function(){var e={};return _.attributes.value.forEach((function(t){e[t.value]=t.example})),e}}});A.render=h;var w=A;function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */var M=function(){function e(){var t=this;D(this,e),U(this,"privateState",Object(o["reactive"])({experiments:[],isLoading:!1,isUpdating:!1,filterStatus:""})),U(this,"state",Object(o["computed"])((function(){return Object(o["readonly"])(t.privateState)}))),U(this,"fetchPromise",{})}return C(e,[{key:"reload",value:function(){return this.privateState.experiments=[],this.fetchPromise={},this.fetchExperiments()}},{key:"fetchExperiments",value:function(){var e=this,t=this.privateState.filterStatus?"AbTesting.getExperimentsByStatuses":"AbTesting.getActiveExperiments",n=this.privateState.filterStatus||void 0,r="".concat(t).concat(n||"");return this.fetchPromise[r]||(this.fetchPromise[r]=E["AjaxHelper"].fetch({method:t,filter_limit:"-1",statuses:n})),this.privateState.isLoading=!0,this.privateState.experiments=[],this.fetchPromise[r].then((function(t){return e.privateState.experiments=t,e.state.value.experiments})).finally((function(){e.privateState.isLoading=!1}))}},{key:"fetchAvailableSuccessMetrics",value:function(){return E["AjaxHelper"].fetch({method:"AbTesting.getAvailableSuccessMetrics",filter_limit:"-1"})}},{key:"fetchAvailableStatuses",value:function(){return E["AjaxHelper"].fetch({method:"AbTesting.getAvailableStatuses",filter_limit:"-1"})}},{key:"fetchJsExperimentTemplate",value:function(e){return E["AjaxHelper"].fetch({method:"AbTesting.getJsExperimentTemplate",idExperiment:e})}},{key:"fetchJsIncludeTemplate",value:function(){return E["AjaxHelper"].fetch({method:"AbTesting.getJsIncludeTemplate"})}},{key:"findExperiment",value:function(e){var t=this,n=this.state.value.experiments.find((function(t){return"".concat(t.idexperiment)==="".concat(e)}));return n?Promise.resolve(n):(this.privateState.isLoading=!0,E["AjaxHelper"].fetch({idExperiment:e,method:"AbTesting.getExperiment"}).finally((function(){t.privateState.isLoading=!1})))}},{key:"deleteExperiment",value:function(e){var t=this;return this.privateState.isUpdating=!0,this.privateState.experiments=[],E["AjaxHelper"].fetch({idExperiment:e,method:"AbTesting.deleteExperiment"},{withTokenInUrl:!0}).then((function(){return{type:"success"}})).catch((function(e){return{type:"error",message:e.message||e}})).finally((function(){t.privateState.isUpdating=!1}))}},{key:"archiveExperiment",value:function(e){var t=this;return this.privateState.isUpdating=!0,E["AjaxHelper"].fetch({idExperiment:e,method:"AbTesting.archiveExperiment"}).then((function(){return{type:"success"}})).catch((function(e){return{type:"error",message:e.message||e}})).finally((function(){t.privateState.isUpdating=!1}))}},{key:"createOrUpdateExperiment",value:function(e,t){var n=this,r=(e.variations||[]).filter((function(e){return null===e||void 0===e?void 0:e.name}));return e.original_redirect_url&&r.push({name:"original",redirect_url:e.original_redirect_url}),this.privateState.isUpdating=!0,E["AjaxHelper"].post({method:t,name:e.name.trim(),description:e.description.trim(),hypothesis:e.hypothesis.trim(),idExperiment:e.idexperiment,confidenceThreshold:e.confidence_threshold,startDate:e.start_date,endDate:e.end_date,percentageParticipants:e.percentage_participants,mdeRelative:e.mde_relative,forwardUtmParams:e.forward_utm_params},{successMetrics:(e.success_metrics||[]).filter((function(e){return null===e||void 0===e?void 0:e.metric})),includedTargets:(e.included_targets||[]).filter((function(e){return e&&(e.value||"any"===e.type)})),excludedTargets:(e.excluded_targets||[]).filter((function(e){return null===e||void 0===e?void 0:e.value})),variations:r},{withTokenInUrl:!0}).then((function(e){return{type:"success",response:e}})).catch((function(e){return{type:"error",message:e.message||e}})).finally((function(){n.privateState.isUpdating=!1}))}},{key:"finishExperiment",value:function(e){var t=this;return this.privateState.isUpdating=!0,E["AjaxHelper"].fetch({idExperiment:e,method:"AbTesting.finishExperiment"},{withTokenInUrl:!0}).then((function(){return{type:"success"}})).catch((function(e){return{type:"error",message:e.message||e}})).finally((function(){t.privateState.isUpdating=!1}))}},{key:"setFilterStatus",value:function(e){this.privateState.filterStatus=e}}]),e}(),P=new M,I={class:"loadingPiwik"},B=Object(o["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif"},null,-1),F={class:"loadingPiwik"},H=Object(o["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif"},null,-1),L={class:"alert alert-warning"},R={class:"alert alert-warning"},$=Object(o["createElementVNode"])("br",null,null,-1),z={class:"optionsUnconfirmedEditExperiment"},q={class:"actionViewReport"},G=["href"],K=Object(o["createElementVNode"])("span",{class:"icon-show"},null,-1),J={class:"actionFinishExperiment"},Y=Object(o["createElementVNode"])("span",{class:"abtestingicon-stop"},null,-1),W={class:"actionEditAnyway"},Z=Object(o["createElementVNode"])("span",{class:"icon-edit"},null,-1),X={class:"actionCancel"},Q=["innerHTML"],ee={class:"alert alert-warning"},te={key:0},ne={class:"row"},re={class:"col m2 entityList"},ie={class:"listCircle"},ae=Object(o["createElementVNode"])("br",null,null,-1),oe=Object(o["createElementVNode"])("br",null,null,-1),le=Object(o["createElementVNode"])("br",null,null,-1),ce=Object(o["createElementVNode"])("br",null,null,-1),se=["disabled","value"],de={class:"entityCancel"},ue=["innerHTML"],me={class:"entityCancel"},pe={class:"row"},be={class:"col-md-12"},ve={class:"ui-confirm",ref:"confirmUpdateStartExperiment"},ge=["value"],fe=["value"],Oe={class:"ui-confirm",ref:"confirmFinishExperiment"},je=["value"],he=["value"],Ee={class:"ui-confirm",ref:"updateExperimentNeededToEmbed"},ye=["value"];function xe(e,t,n,r,i,a){var l=Object(o["resolveComponent"])("Basic"),c=Object(o["resolveComponent"])("Metrics"),s=Object(o["resolveComponent"])("Conditions"),d=Object(o["resolveComponent"])("Traffic"),u=Object(o["resolveComponent"])("Targets"),m=Object(o["resolveComponent"])("Redirects"),p=Object(o["resolveComponent"])("Schedule"),b=Object(o["resolveComponent"])("Embed"),v=Object(o["resolveComponent"])("ContentBlock");return Object(o["openBlock"])(),Object(o["createBlock"])(v,{class:"editExperiment","content-title":e.contentTitle},{default:Object(o["withCtx"])((function(){var n,r,i;return[Object(o["withDirectives"])(Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("AbTesting_FormCreateExperimentIntro")),513),[[o["vShow"],e.create]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("p",null,[Object(o["createElementVNode"])("span",I,[B,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("General_LoadingData")),1)])],512),[[o["vShow"],e.isLoading]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("p",null,[Object(o["createElementVNode"])("span",F,[H,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_UpdatingData")),1)])],512),[[o["vShow"],e.isUpdating]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",L,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_ExperimentRunningInfo1"))+" "+Object(o["toDisplayString"])(e.experiment.start_date)+" (UTC)",1),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(" ".concat(e.translate("AbTesting_ExperimentRunningInfo2")))+" "+Object(o["toDisplayString"])(e.experiment.end_date)+" (UTC)",513),[[o["vShow"],e.experiment.end_date]]),Object(o["createTextVNode"])(". "+Object(o["toDisplayString"])(e.translate("AbTesting_ExperimentRunningInfo3")),1)],512),[[o["vShow"],e.edit&&"running"===e.experiment.status]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",R,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_ExperimentFinishedInfo1"))+" ",1),$,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_ExperimentFinishedInfo2")),1)],512),[[o["vShow"],e.edit&&"finished"===e.experiment.status]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"alert alert-warning"},Object(o["toDisplayString"])(e.translate("AbTesting_ErrorExperimentCannotBeUpdatedBecauseArchived")),513),[[o["vShow"],e.edit&&"archived"===e.experiment.status]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_RelatedActions"))+": ",1),Object(o["createElementVNode"])("ul",z,[Object(o["createElementVNode"])("li",q,[Object(o["createElementVNode"])("a",{target:"_blank",href:e.viewReportLink},[K,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_ActionViewReport")),1)],8,G)]),Object(o["createElementVNode"])("li",J,[Object(o["withDirectives"])(Object(o["createElementVNode"])("a",{onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(t){return e.finishExperiment()}),["prevent"]))},[Y,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_ActionFinishExperiment")),1)],512),[[o["vShow"],"running"===e.experiment.status]])]),Object(o["createElementVNode"])("li",W,[Object(o["createElementVNode"])("a",{onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(t){return e.confirmedEdit=!0}),["prevent"]))},[Z,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_ActionEditExperimentAnyway")),1)])]),Object(o["createElementVNode"])("li",X,[Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("General_OrCancel",'<a class="cancelLink">',"</a>")),onClick:t[2]||(t[2]=function(t){return e.onCancel(t)})},null,8,Q)])])],512),[[o["vShow"],e.edit&&e.experiment.status&&!e.confirmedEdit]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",ee,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_ExperimentCreatedInfo1"))+" "+Object(o["toDisplayString"])(e.experiment.start_date),1),e.experiment.end_date?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",te,Object(o["toDisplayString"])(" ".concat(e.translate("AbTesting_ExperimentCreatedInfo2")))+" "+Object(o["toDisplayString"])(e.experiment.end_date),1)):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(". "+Object(o["toDisplayString"])(e.translate("AbTesting_ExperimentCreatedInfo3")),1)],512),[[o["vShow"],e.confirmedEdit&&"created"===e.experiment.status&&e.experiment.start_date]]),Object(o["createElementVNode"])("form",{onSubmit:t[22]||(t[22]=Object(o["withModifiers"])((function(t){return e.confirmedEdit?e.updateExperiment():e.createExperiment()}),["prevent"]))},[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",ne,[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",re,[Object(o["createElementVNode"])("ul",ie,[Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["menuDefinition",{active:"basic"===e.action}])},[Object(o["createElementVNode"])("a",{href:"",onClick:t[3]||(t[3]=Object(o["withModifiers"])((function(t){return e.action="basic"}),["prevent"]))},Object(o["toDisplayString"])(e.translate("AbTesting_Definition")),1)],2),Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["menuSuccessMetric",{active:"metrics"===e.action}])},[Object(o["createElementVNode"])("a",{href:"",onClick:t[4]||(t[4]=Object(o["withModifiers"])((function(t){return e.action="metrics"}),["prevent"]))},Object(o["toDisplayString"])(e.translate("AbTesting_SuccessMetrics")),1)],2),Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["menuSuccessConditions",{active:"conditions"===e.action}])},[Object(o["createElementVNode"])("a",{href:"",onClick:t[5]||(t[5]=Object(o["withModifiers"])((function(t){return e.action="conditions"}),["prevent"]))},Object(o["toDisplayString"])(e.translate("AbTesting_SuccessConditions")),1)],2),Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["menuTargets",{active:"targets"===e.action}])},[Object(o["createElementVNode"])("a",{href:"",onClick:t[6]||(t[6]=Object(o["withModifiers"])((function(t){return e.action="targets"}),["prevent"]))},Object(o["toDisplayString"])(e.translate("AbTesting_TargetPages")),1)],2),Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["menuTraffic",{disabled:!(null!==(n=e.experiment.variations)&&void 0!==n&&null!==(r=n[0])&&void 0!==r&&r.name),active:"traffic"===e.action}])},[Object(o["createElementVNode"])("a",{href:"",onClick:t[7]||(t[7]=Object(o["withModifiers"])((function(t){var n,r;return null!==(n=e.experiment.variations)&&void 0!==n&&null!==(r=n[0])&&void 0!==r&&r.name?e.action="traffic":""}),["prevent"]))},Object(o["toDisplayString"])(e.translate("AbTesting_TrafficAllocation")),1)],2),Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["menuRedirects",{active:"redirects"===e.action}])},[Object(o["createElementVNode"])("a",{href:"",onClick:t[8]||(t[8]=Object(o["withModifiers"])((function(t){return e.action="redirects"}),["prevent"]))},Object(o["toDisplayString"])(e.translate("AbTesting_Redirects")),1)],2),Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["menuSchedule",{active:"schedule"===e.action}])},[Object(o["createElementVNode"])("a",{href:"",onClick:t[9]||(t[9]=Object(o["withModifiers"])((function(t){return e.action="schedule"}),["prevent"]))},Object(o["toDisplayString"])(e.translate("AbTesting_Schedule")),1)],2),Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["menuEmbed",{active:"embed"===e.action}])},[Object(o["withDirectives"])(Object(o["createElementVNode"])("a",{href:"",onClick:t[10]||(t[10]=Object(o["withModifiers"])((function(t){return e.showEmbedAction()}),["prevent"]))},Object(o["toDisplayString"])(e.translate("AbTesting_EmbedCode")),513),[[o["vShow"],"archived"!==e.experiment.status]])],2)]),ae,oe,le,ce,Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("input",{class:"btn update",type:"submit",disabled:e.isUpdating||!e.isDirty,value:e.translate("CoreUpdater_UpdateTitle")},null,8,se),Object(o["createElementVNode"])("div",de,[Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("General_OrCancel",'<a class="cancelLink">',"</a>")),onClick:t[11]||(t[11]=function(t){return e.onCancel(t)})},null,8,ue)])],512),[[o["vShow"],"archived"!==e.experiment.status]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",me,[Object(o["createElementVNode"])("a",{class:"btn",onClick:t[12]||(t[12]=function(t){return e.cancel()})},Object(o["toDisplayString"])(e.translate("AbTesting_NavigationBack")),1)])],512),[[o["vShow"],"archived"===e.experiment.status]])],512),[[o["vShow"],e.confirmedEdit]]),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])({"col m10 editExperimentArea":e.confirmedEdit,"col m12 createExperimentArea":e.create})},[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",pe,[Object(o["createElementVNode"])("div",be,["basic"===e.action?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,experiment:e.experiment,onUpdateProperty:t[13]||(t[13]=function(t){e.experiment[t.prop]=t.value,e.setValueHasChanged()}),create:e.create,"create-experiment-target-types":e.createExperimentTargetTypes,onCancel:t[14]||(t[14]=function(t){return e.cancel()}),onSave:t[15]||(t[15]=function(t){return e.confirmedEdit?e.updateExperiment():e.createExperiment()})},null,8,["experiment","create","create-experiment-target-types"])):Object(o["createCommentVNode"])("",!0),"metrics"===e.action?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:1,"model-value":e.experiment.success_metrics,"onUpdate:modelValue":t[16]||(t[16]=function(t){e.experiment=Object.assign(Object.assign({},e.experiment),{},{success_metrics:t}),e.setValueHasChanged()}),"experiment-id-site":e.experiment.idsite,"success-metric-options":e.successMetricOptions},null,8,["model-value","experiment-id-site","success-metric-options"])):Object(o["createCommentVNode"])("",!0),"conditions"===e.action?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:2,experiment:e.experiment,onUpdateProperty:t[17]||(t[17]=function(t){e.experiment[t.prop]=t.value,e.setValueHasChanged()}),"confidence-threshold-options":e.confidenceThresholdOptions,"mde-relative-options":e.mdeRelativeOptions},null,8,["experiment","confidence-threshold-options","mde-relative-options"])):Object(o["createCommentVNode"])("",!0),"traffic"===e.action?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:3,experiment:e.experiment,onUpdateProperty:t[18]||(t[18]=function(t){e.experiment[t.prop]=t.value,e.setValueHasChanged()}),"percentage-participants-options":e.percentageParticipantsOptions},null,8,["experiment","percentage-participants-options"])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])(u,{experiment:e.experiment,onUpdateProperty:t[19]||(t[19]=function(t){e.experiment[t.prop]=t.value,e.setValueHasChanged()})},null,8,["experiment"]),[[o["vShow"],"targets"===e.action]]),"redirects"===e.action?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:4,"model-value":e.experiment.variations,"forward-utm-params":1===(null===(i=e.experiment)||void 0===i?void 0:i.forward_utm_params),"onUpdate:modelValue":t[20]||(t[20]=function(t){e.experiment.variations=t,e.setValueHasChanged()}),"onUpdate:forwardUtmParams":e.setForwardUtmParams},null,8,["model-value","forward-utm-params","onUpdate:forwardUtmParams"])):Object(o["createCommentVNode"])("",!0),"schedule"===e.action?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:5,experiment:e.experiment,onUpdateProperty:t[21]||(t[21]=function(t){e.experiment[t.prop]=t.value,e.setValueHasChanged()}),"utc-time":e.utcTime},null,8,["experiment","utc-time"])):Object(o["createCommentVNode"])("",!0),"embed"===e.action?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:6,experiment:e.experiment,"js-experiment-template-code":e.jsTemplateCode,"js-include-template-code":e.jsIncludeTemplateCode},null,8,["experiment","js-experiment-template-code","js-include-template-code"])):Object(o["createCommentVNode"])("",!0)])],512),[[o["vShow"],!e.isLoading]])],2)],512),[[o["vShow"],!e.isLoading&&e.confirmedEdit||e.create]])],32),Object(o["createElementVNode"])("div",ve,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("AbTesting_ConfirmUpdateStartsExperiment")),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,ge),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,fe)],512),Object(o["createElementVNode"])("div",Oe,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("AbTesting_ConfirmFinishExperiment")),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,je),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,he)],512),Object(o["createElementVNode"])("div",Ee,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("AbTesting_ExperimentRequiresUpdateBeforeViewEmbedCode")),1),Object(o["createElementVNode"])("input",{role:"ok",type:"button",value:e.translate("General_Ok")},null,8,ye)],512)]})),_:1},8,["content-title"])}function Ve(e){return _e(e)||Se(e)||Ne(e)||Te()}function Te(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ne(e,t){if(e){if("string"===typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}function Se(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _e(e){if(Array.isArray(e))return Ae(e)}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var we={class:"form-group"},De={name:"name"},ke={class:"form-group"},Ce={name:"hypothesis"},Ue={class:"inline-help-node"},Me=["innerHTML"],Pe={class:"form-group"},Ie={name:"description"},Be={class:"form-group row initalPageUrl"},Fe={class:"col s12 m6"},He={name:"newTargetType"},Le={name:"experimentUrl"},Re={class:"col s12 m6"},$e={class:"form-help"},ze={class:"inline-help"},qe={key:1,class:"entityCancel"},Ge=["innerHTML"];function Ke(e,t,n,r,i,a){var l,c,s,d,u,m,p,b,v,g,f,O,j=Object(o["resolveComponent"])("Field"),h=Object(o["resolveComponent"])("Variations"),E=Object(o["resolveComponent"])("SaveButton");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",we,[Object(o["createElementVNode"])("div",De,[Object(o["createVNode"])(j,{uicontrol:"text",name:"name",placeholder:"eg 'BuyNowButtonColor'","model-value":null===(l=e.experiment)||void 0===l?void 0:l.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("updateProperty",{prop:"name",value:t})}),title:e.translate("General_Name"),maxlength:50,"inline-help":e.translate("AbTesting_FieldExperimentNameHelp",50)},null,8,["model-value","title","inline-help"])])]),Object(o["createElementVNode"])("div",ke,[Object(o["createElementVNode"])("div",Ce,[Object(o["createVNode"])(j,{uicontrol:"textarea",name:"hypothesis","model-value":null===(c=e.experiment)||void 0===c?void 0:c.hypothesis,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.$emit("updateProperty",{prop:"hypothesis",value:t})}),title:e.translate("AbTesting_Hypothesis"),maxlength:1e3,rows:3,placeholder:e.translate("AbTesting_FieldHypothesisPlaceholder")},{"inline-help":Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Ue,[Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.fieldHypothesisHelp)},null,8,Me)])]})),_:1},8,["model-value","title","placeholder"])])]),Object(o["createElementVNode"])("div",Pe,[Object(o["createElementVNode"])("div",Ie,[Object(o["createVNode"])(j,{uicontrol:"textarea",name:"description","model-value":null===(s=e.experiment)||void 0===s?void 0:s.description,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.$emit("updateProperty",{prop:"description",value:t})}),title:e.translate("General_Description"),maxlength:1e3,rows:3,placeholder:e.translate("AbTesting_FieldDescriptionPlaceholder"),"inline-help":e.translate("AbTesting_FieldDescriptionHelp")},null,8,["model-value","title","placeholder","inline-help"])])]),Object(o["createVNode"])(h,{"model-value":null===(d=e.experiment)||void 0===d?void 0:d.variations,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.$emit("updateProperty",{prop:"variations",value:t})})},null,8,["model-value"]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",Be,[Object(o["createElementVNode"])("div",Fe,[Object(o["createElementVNode"])("div",He,[Object(o["createVNode"])(j,{uicontrol:"select",name:"newTargetType",title:e.translate("AbTesting_TargetPages"),"model-value":null===(u=e.experiment)||void 0===u||null===(m=u.included_targets)||void 0===m||null===(p=m[0])||void 0===p?void 0:p.type,"onUpdate:modelValue":t[4]||(t[4]=function(t){var n,r,i;return e.$emit("updateProperty",{prop:"included_targets",value:[Object.assign(Object.assign({},(null===(n=e.experiment)||void 0===n||null===(r=n.included_targets)||void 0===r?void 0:r[0])||{}),{},{type:t})].concat(Ve(((null===(i=e.experiment)||void 0===i?void 0:i.included_targets)||[]).slice(1)))})}),"full-width":!0,options:e.createExperimentTargetTypes},null,8,["title","model-value","options"])]),Object(o["createElementVNode"])("div",Le,["equals_simple"===(null===(b=e.experiment)||void 0===b||null===(v=b.included_targets)||void 0===v||null===(g=v[0])||void 0===g?void 0:g.type)?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:0,uicontrol:"text",name:"experimentUrl",placeholder:e.experimentUrlPlaceholder,"model-value":null===(f=e.experiment)||void 0===f||null===(O=f.included_targets[0])||void 0===O?void 0:O.value,"onUpdate:modelValue":t[5]||(t[5]=function(t){var n,r,i;return e.$emit("updateProperty",{prop:"included_targets",value:[Object.assign(Object.assign({},(null===(n=e.experiment)||void 0===n||null===(r=n.included_targets)||void 0===r?void 0:r[0])||{}),{},{value:t})].concat(Ve(((null===(i=e.experiment)||void 0===i?void 0:i.included_targets)||[]).slice(1)))})}),"full-width":!0,maxlength:1e3},null,8,["placeholder","model-value"])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",Re,[Object(o["createElementVNode"])("div",$e,[Object(o["createElementVNode"])("span",ze,Object(o["toDisplayString"])(e.translate("AbTesting_NewExperimentTargetPageHelp")),1)])])],512),[[o["vShow"],e.create]]),e.create?(Object(o["openBlock"])(),Object(o["createBlock"])(E,{key:0,class:"createButton",onConfirm:t[6]||(t[6]=function(t){return e.$emit("save")}),disabled:e.isUpdating,saving:e.isUpdating,value:e.translate("AbTesting_CreateNewExperiment")},null,8,["disabled","saving","value"])):Object(o["createCommentVNode"])("",!0),e.create?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",qe,[Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("General_OrCancel",'<a class="cancelLink">',"</a>")),onClick:t[7]||(t[7]=function(t){return e.onCancel(t)})},null,8,Ge)])):Object(o["createCommentVNode"])("",!0)])}var Je={class:"form-group row expVariationsEdit"},Ye={class:"col s12 m6"},We={for:"variations"},Ze={class:"variation original"},Xe=["value"],Qe=["value","onKeydown","onChange","title"],et=["title"],tt=["title","onClick"],nt={class:"col s12 m6"},rt={class:"form-help"},it={class:"inline-help"};function at(e,t,n,r,i,a){var l=this;return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Je,[Object(o["createElementVNode"])("div",Ye,[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("label",We,Object(o["toDisplayString"])(e.translate("AbTesting_Variations")),1),Object(o["createElementVNode"])("div",Ze,[Object(o["createElementVNode"])("input",{type:"text",class:"name disabled",disabled:"",value:e.translate("AbTesting_NameOriginalVariation")},null,8,Xe)]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.modelValue||[],(function(n,r){var i;return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:n.idvariation||l.tempIds.get(n),class:Object(o["normalizeClass"])("variation ".concat(r," multiple"))},[Object(o["createElementVNode"])("input",{type:"text",class:"control_text name",maxlength:"50",value:n.name,onKeydown:function(t){return e.onKeydownName(t,n,r)},onChange:function(t){return e.onKeydownName(t,n,r)},title:n.idvariation?"Variation ID ".concat(n.idvariation):""},null,40,Qe),Object(o["createElementVNode"])("span",{class:"icon-plus",title:e.translate("General_Add"),onClick:t[0]||(t[0]=function(t){return e.addVariation()})},null,8,et),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",{class:"icon-minus",title:e.translate("General_Remove"),onClick:function(t){return e.removeVariation(r)}},null,8,tt),[[o["vShow"],(null===(i=e.modelValue)||void 0===i?void 0:i.length)>1]])],2)})),128))])]),Object(o["createElementVNode"])("div",nt,[Object(o["createElementVNode"])("div",rt,[Object(o["createElementVNode"])("span",it,Object(o["toDisplayString"])(e.translate("AbTesting_FieldVariationsHelp")),1)])])])}function ot(e){return dt(e)||st(e)||ct(e)||lt()}function lt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ct(e,t){if(e){if("string"===typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(e,t):void 0}}function st(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function dt(e){if(Array.isArray(e))return ut(e)}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mt(e,t){return!!e.find((function(e){return e.name===t}))}var pt=0,bt=Object(o["defineComponent"])({props:{modelValue:Array},emits:["update:modelValue"],data:function(){return{tempIds:new Map}},created:function(){this.onKeydownName=Object(E["debounce"])(this.onKeydownName.bind(this),50),null!==this.modelValue&&void 0!==this.modelValue||this.$emit("update:modelValue",[])},methods:{onKeydownName:function(e,t,n){var r=e.target.value;if(t.name!==r){var i=ot(this.modelValue||[]);i[n]=Object.assign(Object.assign({},t),{},{name:r}),this.$emit("update:modelValue",i)}},addVariation:function(){var e="Variation".concat((this.modelValue||[]).length+1);while(mt(this.modelValue||[],e)&&e.length<110)e+="_";var t={name:e,percentage:""};pt+=1,this.tempIds.set(t,"_".concat(pt)),this.$emit("update:modelValue",[].concat(ot(this.modelValue||[]),[t]))},removeVariation:function(e){var t=ot(this.modelValue||[]);t.splice(e,1),this.$emit("update:modelValue",t)}}});bt.render=at;var vt=bt,gt=Object(o["defineComponent"])({props:{experiment:{type:Object,required:!0},create:Boolean,createExperimentTargetTypes:Array},components:{Field:y["Field"],SaveButton:y["SaveButton"],Variations:vt},emits:["updateProperty","save","cancel"],methods:{onCancel:function(e){e.target.classList.contains("cancelLink")&&this.$emit("cancel")}},computed:{fieldHypothesisHelp:function(){return Object(E["translate"])("AbTesting_FieldHypothesisHelp","<strong>","</strong>","<strong>","</strong>","<strong>","</strong>")},experimentUrlPlaceholder:function(){return"eg 'http://www.example.com/".concat(Object(E["translate"])("AbTesting_FilesystemDirectory"),"'")},isUpdating:function(){return P.state.value.isUpdating}}});gt.render=Ke;var ft=gt;function Ot(e){return yt(e)||Et(e)||ht(e)||jt()}function jt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ht(e,t){if(e){if("string"===typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}function Et(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function yt(e){if(Array.isArray(e))return xt(e)}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vt={class:"form-group row"},Tt={class:"col s12 m6"},Nt={for:"variations"},St={class:"innerFormField",name:"metric"},_t=["title"],At=["title","onClick"],wt={class:"col s12 m6"},Dt={class:"form-help"},kt={class:"inline-help"},Ct=Object(o["createElementVNode"])("br",null,null,-1),Ut=Object(o["createElementVNode"])("br",null,null,-1),Mt=Object(o["createElementVNode"])("br",null,null,-1),Pt=Object(o["createElementVNode"])("br",null,null,-1),It=["href"];function Bt(e,t,n,r,i,a){var l=this,c=Object(o["resolveComponent"])("Field");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",Vt,[Object(o["createElementVNode"])("div",Tt,[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("label",Nt,Object(o["toDisplayString"])(e.translate("AbTesting_FieldSuccessMetricsLabel")),1),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.modelValue||[],(function(n,r){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])("successMetric successMetric".concat(r," multiple valign-wrapper")),key:r},[Object(o["createElementVNode"])("div",St,[Object(o["createVNode"])(c,{uicontrol:"select",name:"metric","model-value":n.metric,"onUpdate:modelValue":function(t){return e.setValue(r,t)},"full-width":!0,options:e.successMetricOptions},null,8,["model-value","onUpdate:modelValue","options"])]),Object(o["createElementVNode"])("span",{class:"icon-plus valign",title:e.translate("General_Add"),onClick:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",[].concat(Ot(l.modelValue||[]),[{metric:""}]))})},null,8,_t),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",{class:"icon-minus valign",title:e.translate("General_Remove"),onClick:function(t){return e.removeSuccessMetric(r)}},null,8,At),[[o["vShow"],r>0]])],2)})),128))])]),Object(o["createElementVNode"])("div",wt,[Object(o["createElementVNode"])("div",Dt,[Object(o["createElementVNode"])("span",kt,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_FieldSuccessMetricsHelp1"))+" ",1),Ct,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_FieldSuccessMetricsHelp2"))+" ",1),Ut,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_FieldSuccessMetricsHelp3"))+" ",1),Mt,Pt,Object(o["createElementVNode"])("a",{target:"_blank",href:e.goalManageUrl},Object(o["toDisplayString"])(e.translate("AbTesting_ClickToCreateNewGoal")),9,It)])])])])])}function Ft(e){return $t(e)||Rt(e)||Lt(e)||Ht()}function Ht(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lt(e,t){if(e){if("string"===typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}function Rt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function $t(e){if(Array.isArray(e))return zt(e)}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qt=Object(o["defineComponent"])({props:{modelValue:Array,experimentIdSite:{type:[Number,String],required:!0},successMetricOptions:{type:Object,required:!0}},components:{Field:y["Field"]},emits:["update:modelValue"],computed:{goalManageUrl:function(){var e=this.experimentIdSite;return"?module=Goals&action=manage&idSite=".concat(e,"&period=day&date=yesterday")}},methods:{setValue:function(e,t){var n=Ft(this.modelValue||[]);n[e]={metric:t},this.$emit("update:modelValue",n)},removeSuccessMetric:function(e){var t=Ft(this.modelValue||[]);t.splice(e,1),this.$emit("update:modelValue",t)}}});qt.render=Bt;var Gt=qt,Kt={name:"mde_relative"},Jt={class:"inline-help-node"},Yt=Object(o["createElementVNode"])("br",null,null,-1),Wt=Object(o["createElementVNode"])("br",null,null,-1),Zt={name:"confidence_threshold"},Xt={class:"alert alert-info"};function Qt(e,t,n,r,i,a){var l,c,s=Object(o["resolveComponent"])("Field");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",Kt,[Object(o["createVNode"])(s,{uicontrol:"select",name:"mde_relative","model-value":null===(l=e.experiment)||void 0===l?void 0:l.mde_relative,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("updateProperty",{prop:"mde_relative",value:t})}),title:e.translate("AbTesting_MinimumDetectableEffectMDE"),options:e.mdeRelativeOptions},{"inline-help":Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Jt,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_FieldMinimumDetectableEffectHelp1"))+" ",1),Yt,Wt,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_FieldMinimumDetectableEffectHelp2")),1)])]})),_:1},8,["model-value","title","options"])]),Object(o["createElementVNode"])("div",Zt,[Object(o["createVNode"])(s,{uicontrol:"select",name:"confidence_threshold","model-value":null===(c=e.experiment)||void 0===c?void 0:c.confidence_threshold,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.$emit("updateProperty",{prop:"confidence_threshold",value:t})}),title:e.translate("AbTesting_ConfidenceThreshold"),options:e.confidenceThresholdOptions,"inline-help":e.translate("AbTesting_FieldConfidenceThresholdHelp")},null,8,["model-value","title","options","inline-help"])]),Object(o["createElementVNode"])("div",Xt,Object(o["toDisplayString"])(e.translate("AbTesting_FieldSuccessConditionsHelp")),1)])}var en=Object(o["defineComponent"])({props:{experiment:Object,mdeRelativeOptions:{type:Object,required:!0},confidenceThresholdOptions:{type:Object,required:!0}},emits:["updateProperty"],components:{Field:y["Field"]}});en.render=Qt;var tn=en,nn={name:"percentage_participants"},rn=Object(o["createElementVNode"])("br",null,null,-1),an={class:"form-group row"},on={class:"col s12"},ln={class:"form-group row",style:{"margin-top":"0"}},cn={class:"col s12 m6",style:{"padding-left":"0"}},sn={class:"valign-wrapper"},dn={style:{display:"inline-block",width:"calc(100% - 60px)"},class:"control_text percentage",name:"percentage"},un=Object(o["createElementVNode"])("span",null,"%",-1),mn={style:{display:"inline-block",width:"calc(100% - 60px)"},class:"percentage",name:"percentage"},pn=Object(o["createElementVNode"])("span",null,"%",-1),bn={class:"col s12 m6"},vn={class:"form-help"},gn={class:"inline-help"};function fn(e,t,n,r,i,a){var l,c,s=Object(o["resolveComponent"])("Field");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",nn,[Object(o["createVNode"])(s,{uicontrol:"select",name:"percentage_participants","model-value":null===(l=e.experiment)||void 0===l?void 0:l.percentage_participants,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("updateProperty",{prop:"percentage_participants",value:t})}),title:"".concat(e.translate("AbTesting_FieldPercentageParticipantsLabel"),":"),options:e.percentageParticipantsOptions,"inline-help":e.translate("AbTesting_FieldPercentageParticipantsHelp")},null,8,["model-value","title","options","inline-help"])]),rn,Object(o["createElementVNode"])("div",an,[Object(o["createElementVNode"])("h3",on,Object(o["toDisplayString"])(e.translate("AbTesting_FieldPercentageVariationsLabel"))+":",1)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"alert alert-danger"},Object(o["toDisplayString"])(e.translate("AbTesting_ErrorVariationAllocatedNot100Traffic")),513),[[o["vShow"],!e.hasAllocated100PercentToVariations]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"alert alert-warning"},Object(o["toDisplayString"])(e.translate("AbTesting_ErrorVariationAllocatedNotEnoughOriginal")),513),[[o["vShow"],e.shouldAllocateMoreTrafficToOriginalVariation&&e.hasAllocated100PercentToVariations]]),Object(o["createElementVNode"])("div",ln,[Object(o["createElementVNode"])("div",cn,[Object(o["createElementVNode"])("div",sn,[Object(o["createElementVNode"])("div",dn,[Object(o["createVNode"])(s,{uicontrol:"text",name:"percentage",title:e.translate("AbTesting_NameOriginalVariation"),disabled:!0,"full-width":!0,placeholder:"".concat(e.defaultVariationPercentage)},null,8,["title","placeholder"])]),un]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])((null===(c=e.experiment)||void 0===c?void 0:c.variations)||[],(function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])("valign-wrapper trafficVariation ".concat(n)),key:t.idvariation},[Object(o["createElementVNode"])("div",mn,[Object(o["createVNode"])(s,{uicontrol:"text",name:"percentage","model-value":t.percentage,"onUpdate:modelValue":function(t){return e.changePercent(n,t)},title:"".concat(e.translate("AbTesting_Variation"),' "').concat(t.name,'"'),maxlength:3,"full-width":!0,placeholder:"".concat(e.defaultVariationPercentage)},null,8,["model-value","onUpdate:modelValue","title","placeholder"])]),pn],2)})),128))]),Object(o["createElementVNode"])("div",bn,[Object(o["createElementVNode"])("div",vn,[Object(o["createElementVNode"])("span",gn,Object(o["toDisplayString"])(e.translate("AbTesting_FieldPercentageVariationsHelp")),1)])])])])}function On(e){return yn(e)||En(e)||hn(e)||jn()}function jn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hn(e,t){if(e){if("string"===typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}function En(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function yn(e){if(Array.isArray(e))return xn(e)}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vn=Object(o["defineComponent"])({props:{experiment:Object,percentageParticipantsOptions:{type:Object,required:!0}},components:{Field:y["Field"]},emits:["updateProperty"],methods:{changePercent:function(e,t){var n=this.experiment,r=(null===n||void 0===n?void 0:n.variations)||[],i=On(r);i[e]=Object.assign(Object.assign({},i[e]),{},{percentage:t}),this.$emit("updateProperty",{prop:"variations",value:i})}},computed:{hasAllocated100PercentToVariations:function(){var e=this.experiment;if(null===e||void 0===e||!e.variations)return!1;var t=((null===e||void 0===e?void 0:e.variations)||[]).reduce((function(e,t){return null!==t&&void 0!==t&&t.percentage?e+parseInt("".concat(t.percentage),10):e}),0);return t<100},numVariations:function(){var e,t=this.experiment;return(null===(e=t.variations)||void 0===e?void 0:e.length)||0},defaultVariationPercentage:function(){var e=this.experiment;if(!e||!e.variations)return 0;var t=100,n=1,r=this.numVariations+n;if(e.variations.forEach((function(e){e&&e.percentage&&(t-=parseInt("".concat(e.percentage),10),r-=1)})),r>0){var i=Math.round(t/r);return i>100&&(i=100),i<0&&(i=0),i}return 0},shouldAllocateMoreTrafficToOriginalVariation:function(){var e=this.defaultVariationPercentage,t=this.numVariations+1,n=Math.round(100/t),r=Math.floor(n/2);return r>e}}});Vn.render=fn;var Tn=Vn,Nn={class:"row"},Sn={class:"col s12"},_n={class:"form-group row"},An={class:"col s12"},wn={class:"col s12 m6",style:{"padding-left":"0"}},Dn=Object(o["createElementVNode"])("hr",null,null,-1),kn={class:"col s12 m6"},Cn={class:"form-help"},Un={class:"inline-help"},Mn={class:"form-group row"},Pn={class:"col s12"},In={class:"col s12 m6",style:{"padding-left":"0"}},Bn=Object(o["createElementVNode"])("hr",null,null,-1),Fn={class:"col s12 m6"},Hn={class:"form-help"},Ln={class:"inline-help"},Rn={class:"alert alert-info"},$n=Object(o["createElementVNode"])("br",null,null,-1),zn=Object(o["createElementVNode"])("br",null,null,-1);function qn(e,t,n,r,i,a){var l,c,s,d,u=Object(o["resolveComponent"])("TargetTest"),m=Object(o["resolveComponent"])("ExperimentUrlTarget");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",Nn,[Object(o["createElementVNode"])("div",Sn,[Object(o["createVNode"])(u,{"included-targets":null===(l=e.experiment)||void 0===l?void 0:l.included_targets,"excluded-targets":null===(c=e.experiment)||void 0===c?void 0:c.excluded_targets},null,8,["included-targets","excluded-targets"])])]),Object(o["createElementVNode"])("div",_n,[Object(o["createElementVNode"])("div",An,[Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(e.translate("AbTesting_FieldIncludedTargetsLabel"))+":",1)]),Object(o["createElementVNode"])("div",wn,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])((null===(s=e.experiment)||void 0===s?void 0:s.included_targets)||[],(function(n,r){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:r,class:Object(o["normalizeClass"])("includedTargets ".concat(r," multiple"))},[Object(o["createVNode"])(m,{"model-value":n,"onUpdate:modelValue":function(t){return e.setTarget("included_targets",r,t)},onAddUrl:t[0]||(t[0]=function(t){return e.addTarget("included_targets")}),onRemoveUrl:function(t){return e.removeTarget("included_targets",r)},"allow-any":!0,"disable-if-no-value":r>0,"can-be-removed":r>0,"show-add-url":!0},null,8,["model-value","onUpdate:modelValue","onRemoveUrl","disable-if-no-value","can-be-removed"]),Dn],2)})),128))]),Object(o["createElementVNode"])("div",kn,[Object(o["createElementVNode"])("div",Cn,[Object(o["createElementVNode"])("span",Un,Object(o["toDisplayString"])(e.translate("AbTesting_FieldIncludedTargetsHelp2")),1)])])]),Object(o["createElementVNode"])("div",Mn,[Object(o["createElementVNode"])("div",Pn,[Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(e.translate("AbTesting_FieldExcludedTargetsLabel"))+":",1)]),Object(o["createElementVNode"])("div",In,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(null===(d=e.experiment)||void 0===d?void 0:d.excluded_targets,(function(n,r){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])("excludedTargets ".concat(r," multiple")),key:r},[Object(o["createVNode"])(m,{"disable-if-no-value":!0,"allow-any":!1,"model-value":n,"onUpdate:modelValue":function(t){return e.setTarget("excluded_targets",r,t)},onAddUrl:t[1]||(t[1]=function(t){return e.addTarget("excluded_targets")}),onRemoveUrl:function(t){return e.removeTarget("excluded_targets",r)},"can-be-removed":r>0,"show-add-url":!0},null,8,["model-value","onUpdate:modelValue","onRemoveUrl","can-be-removed"]),Bn],2)})),128))]),Object(o["createElementVNode"])("div",Fn,[Object(o["createElementVNode"])("div",Hn,[Object(o["createElementVNode"])("span",Ln,Object(o["toDisplayString"])(e.translate("AbTesting_FieldExcludedTargetsHelp")),1)])])]),Object(o["createElementVNode"])("div",Rn,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("AbTesting_TargetComparisons")),1),Object(o["createElementVNode"])("ul",null,[Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("AbTesting_TargetTypeEqualsSimple")),1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_TargetTypeEqualsSimpleInfo")),1)]),Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("AbTesting_TargetTypeEqualsExactly")),1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_TargetTypeEqualsExactlyInfo")),1)]),Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("AbTesting_TargetTypeRegExp")),1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_TargetTypeRegExpInfo")),1)])]),$n,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_TargetComparisionsCaseInsensitive")),1),zn])])}function Gn(e){return Wn(e)||Yn(e)||Jn(e)||Kn()}function Kn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jn(e,t){if(e){if("string"===typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zn(e,t):void 0}}function Yn(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Wn(e){if(Array.isArray(e))return Zn(e)}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xn=Object(o["defineComponent"])({props:{experiment:Object},components:{TargetTest:m,ExperimentUrlTarget:w},emits:["updateProperty"],methods:{addTarget:function(e){var t=this.experiment;"excluded_targets"!==e&&"included_targets"!==e||this.$emit("updateProperty",{prop:e,value:[].concat(Gn((null===t||void 0===t?void 0:t[e])||[]),[{attribute:"url",type:"equals_simple",value:"",inverted:0}])})},setTarget:function(e,t,n){var r=this.experiment;if("excluded_targets"===e||"included_targets"===e){var i=Gn((null===r||void 0===r?void 0:r[e])||[]);i[t]=n,this.$emit("updateProperty",{prop:e,value:i})}},removeTarget:function(e,t){var n=this.experiment;if("excluded_targets"===e||"included_targets"===e){var r=Gn((null===n||void 0===n?void 0:n[e])||[]);r.splice(t,1),this.$emit("updateProperty",{prop:e,value:r})}}}});Xn.render=qn;var Qn=Xn,er={class:"form-group row"},tr={class:"col s12 m6",style:{"padding-left":"0"}},nr={class:"redirects",name:"redirects"},rr={class:"col s12 m6"},ir={class:"form-help"},ar={class:"inline-help"},or=Object(o["createElementVNode"])("br",null,null,-1),lr=Object(o["createElementVNode"])("br",null,null,-1),cr=Object(o["createElementVNode"])("br",null,null,-1),sr=Object(o["createElementVNode"])("br",null,null,-1),dr=["innerHTML"];function ur(e,t,n,r,i,a){var l=Object(o["resolveComponent"])("Field");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",er,[Object(o["createElementVNode"])("div",tr,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.modelValue,(function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])("redirectsAllocation ".concat(n)),key:t.idvariation},[Object(o["createElementVNode"])("div",nr,[Object(o["createVNode"])(l,{uicontrol:"text",name:"redirects",placeholder:"eg http://www.example.com","model-value":t.redirect_url,"onUpdate:modelValue":function(t){return e.setRedirectUrl(n,t)},title:"".concat(e.translate("AbTesting_Variation"),' "').concat(e.htmlEntities(t.name),'"'),maxlength:1e3,"full-width":!0},null,8,["model-value","onUpdate:modelValue","title"])])],2)})),128))]),Object(o["createElementVNode"])("div",rr,[Object(o["createElementVNode"])("div",ir,[Object(o["createElementVNode"])("span",ar,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_FieldRedirectHelp1"))+" ",1),or,lr,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_FieldRedirectHelp2"))+" ",1),cr,sr,Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.formHelp)},null,8,dr)])])])]),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(l,{uicontrol:"checkbox",name:"forwardUtmParams","model-value":e.forwardUtmParams,title:e.translate("AbTesting_ForwardUtmParams"),"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.setForwardUtmParams(t)}),"inline-help":e.getForwardUtmParamsHelpText},null,8,["model-value","title","inline-help"])])])}function mr(e){return gr(e)||vr(e)||br(e)||pr()}function pr(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function br(e,t){if(e){if("string"===typeof e)return fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fr(e,t):void 0}}function vr(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function gr(e){if(Array.isArray(e))return fr(e)}function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Or=Object(o["defineComponent"])({props:{modelValue:Array,forwardUtmParams:{type:Boolean,required:!1,default:!1}},components:{Field:y["Field"]},emits:["update:modelValue","update:forwardUtmParams"],computed:{formHelp:function(){var e="https://github.com/innocraft/php-experiments";return Object(E["translate"])("AbTesting_FieldRedirectHelp3",'<a target="blank" rel="noreferrer" href="'.concat(e,'">'),"</a>")},getForwardUtmParamsHelpText:function(){var e=Object(E["translate"])("AbTesting_ForwardUtmParamsHelpText"),t="https://developer.matomo.org/guides/ab-tests/browser#can-i-use-redirects-in-ab-tests-to-test-entirely-different-pages-or-layouts",n=Object(E["translate"])("AbTesting_ForwardUtmParamsHelpTextNote","<strong>","</strong>",'<a href="javascript:void(0);" id="viewEmbedCodeTabLink">',"</a>",'<a target="blank" rel="noreferrer" href="'.concat(t,'">'),"</a>");return"".concat(e,"</br></br>").concat(n)}},methods:{setRedirectUrl:function(e,t){var n=this.modelValue||[],r=mr(n);r[e]=Object.assign(Object.assign({},n[e]),{},{redirect_url:t}),this.$emit("update:modelValue",r)},setForwardUtmParams:function(e){this.$emit("update:forwardUtmParams",e)},htmlEntities:function(e){return E["Matomo"].helper.htmlEntities(e)},clickEmbedTab:function(){var e=window.document.querySelectorAll("li.menuEmbed a"),t=e[0];t.click()}},mounted:function(){var e=this.clickEmbedTab,t=window.document.getElementById("viewEmbedCodeTabLink");t&&t.addEventListener("click",(function(){e()}))}});Or.render=ur;var jr=Or,hr={ref:"root"},Er={class:"form-group"},yr={class:"form-group row scheduleExperiment"},xr={class:"col s12 m6"},Vr={class:"row"},Tr={class:"col s12"},Nr={for:"start_date_date",class:"active"},Sr={class:"col s12 m6 input-field"},_r=["value","disabled"],Ar={class:"col s12 m6 input-field"},wr=["value","disabled"],Dr={class:"col s12"},kr=Object(o["createElementVNode"])("br",null,null,-1),Cr={class:"col s12 m6 "},Ur={class:"form-help"},Mr={class:"inline-help"},Pr=["innerHTML"],Ir=Object(o["createElementVNode"])("br",null,null,-1),Br=Object(o["createTextVNode"])(". "),Fr={class:"form-group row scheduleExperiment"},Hr={class:"col s12 m6"},Lr={class:"row"},Rr={class:"col s12"},$r={for:"start_date_date",class:"active"},zr={class:"col s12 m6 input-field"},qr=["value"],Gr={class:"col s12 m6 input-field"},Kr=["value","disabled"],Jr={class:"col s12"},Yr=Object(o["createElementVNode"])("br",null,null,-1),Wr={class:"col s12 m6"},Zr={class:"form-help"},Xr={class:"inline-help"},Qr=["innerHTML"],ei=Object(o["createElementVNode"])("br",null,null,-1),ti=Object(o["createTextVNode"])(". ");function ni(e,t,n,r,i,a){var l,c,s,d,u,m;return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",hr,[Object(o["createElementVNode"])("div",Er,Object(o["toDisplayString"])(e.translate("AbTesting_FormScheduleIntroduction")),1),Object(o["createElementVNode"])("div",yr,[Object(o["createElementVNode"])("div",xr,[Object(o["createElementVNode"])("div",Vr,[Object(o["createElementVNode"])("div",Tr,[Object(o["createElementVNode"])("label",Nr,Object(o["toDisplayString"])(e.translate("AbTesting_FieldScheduleExperimentStartLabel"))+":",1)]),Object(o["createElementVNode"])("div",Sr,[Object(o["createElementVNode"])("input",{type:"text",name:"start_date_date",class:"experimentStartDateInput",value:e.startDateDate,onChange:t[0]||(t[0]=function(t){return e.onKeydown("startDateDate",t)}),onKeydown:t[1]||(t[1]=function(t){return e.onKeydown("startDateDate",t)}),disabled:"created"!==(null===(l=e.experiment)||void 0===l?void 0:l.status)},null,40,_r)]),Object(o["createElementVNode"])("div",Ar,[Object(o["createElementVNode"])("input",{type:"text",class:"experimentStartTimeInput",value:e.startDateTime,onChange:t[2]||(t[2]=function(t){return e.onKeydown("startDateTime",t)}),onKeydown:t[3]||(t[3]=function(t){return e.onKeydown("startDateTime",t)}),disabled:"created"!==(null===(c=e.experiment)||void 0===c?void 0:c.status)||!e.startDateDate},null,40,wr)]),Object(o["createElementVNode"])("div",Dr,[Object(o["withDirectives"])(Object(o["createElementVNode"])("p",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_EqualsDateInYourTimezone"))+" ",1),kr,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.toLocalTime(null===(s=e.experiment)||void 0===s?void 0:s.start_date,!0)),1)],512),[[o["vShow"],e.toLocalTime(null===(d=e.experiment)||void 0===d?void 0:d.start_date,!0)]])])])]),Object(o["createElementVNode"])("div",Cr,[Object(o["createElementVNode"])("div",Ur,[Object(o["createElementVNode"])("span",Mr,[Object(o["createElementVNode"])("span",null,[Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.experimentStartHelp)},null,8,Pr),Ir,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_CurrentTimeInUTC"))+" ",1),Object(o["withDirectives"])(Object(o["createElementVNode"])("strong",{class:"currentDate"},Object(o["toDisplayString"])(e.utcTime),513),[[o["vShow"],e.utcTime]]),Br])])])])]),Object(o["createElementVNode"])("div",Fr,[Object(o["createElementVNode"])("div",Hr,[Object(o["createElementVNode"])("div",Lr,[Object(o["createElementVNode"])("div",Rr,[Object(o["createElementVNode"])("label",$r,Object(o["toDisplayString"])(e.translate("AbTesting_FieldScheduleExperimentFinishLabel"))+":",1)]),Object(o["createElementVNode"])("div",zr,[Object(o["createElementVNode"])("input",{type:"text",class:"experimentEndDateInput",value:e.endDateDate,onChange:t[4]||(t[4]=function(t){return e.onKeydown("endDateDate",t)}),onKeydown:t[5]||(t[5]=function(t){return e.onKeydown("endDateDate",t)})},null,40,qr)]),Object(o["createElementVNode"])("div",Gr,[Object(o["createElementVNode"])("input",{type:"text",class:"experimentEndTimeInput",value:e.endDateTime,onChange:t[6]||(t[6]=function(t){return e.onKeydown("endDateTime",t)}),onKeydown:t[7]||(t[7]=function(t){return e.onKeydown("endDateTime",t)}),disabled:!e.endDateDate},null,40,Kr)]),Object(o["createElementVNode"])("div",Jr,[Object(o["withDirectives"])(Object(o["createElementVNode"])("p",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_EqualsDateInYourTimezone"))+" ",1),Yr,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.toLocalTime(null===(u=e.experiment)||void 0===u?void 0:u.end_date,!0)),1)],512),[[o["vShow"],e.toLocalTime(null===(m=e.experiment)||void 0===m?void 0:m.end_date,!0)]])])])]),Object(o["createElementVNode"])("div",Wr,[Object(o["createElementVNode"])("div",Zr,[Object(o["createElementVNode"])("span",Xr,[Object(o["createElementVNode"])("span",null,[Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.experimentFinishHelp)},null,8,Qr),ei,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_CurrentTimeInUTC"))+" ",1),Object(o["withDirectives"])(Object(o["createElementVNode"])("strong",{class:"currentDate"},Object(o["toDisplayString"])(e.utcTime),513),[[o["vShow"],e.utcTime]]),ti])])])])])],512)}function ri(e,t){return ci(e)||li(e,t)||ai(e,t)||ii()}function ii(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ai(e,t){if(e){if("string"===typeof e)return oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oi(e,t):void 0}}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function li(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0)if(a.push(r.value),t&&a.length===t)break}catch(c){l=!0,i=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(l)throw i}}return a}}function ci(e){if(Array.isArray(e))return e}var si=window,di=si.$,ui=Object(o["defineComponent"])({props:{experiment:Object,utcTime:[Date,String]},emits:["updateProperty"],data:function(){return{startDateDate:null,startDateTime:null,endDateDate:null,endDateTime:null}},created:function(){var e=this;this.setDateState(),Object(o["watch"])((function(){var t;return null===(t=e.experiment)||void 0===t?void 0:t.start_date}),(function(){e.setDateState()})),Object(o["watch"])((function(){var t;return null===(t=e.experiment)||void 0===t?void 0:t.end_date}),(function(){e.setDateState()})),Object(o["watch"])((function(){return e.startDateDate}),(function(){e.onStartDateChange()})),Object(o["watch"])((function(){return e.startDateTime}),(function(){e.onStartDateChange()})),Object(o["watch"])((function(){return e.endDateDate}),(function(){e.onEndDateChange()})),Object(o["watch"])((function(){return e.endDateTime}),(function(){e.onEndDateChange()}))},mounted:function(){var e=this,t=E["Matomo"].getBaseDatePickerOptions(null);delete t.maxDate,t.minDate=new Date;var n=E["Matomo"].getBaseDatePickerOptions(null);delete n.maxDate,setTimeout((function(){di(".experimentStartDateInput",e.$refs.root).datepicker(t),di(".experimentEndDateInput",e.$refs.root).datepicker(n),di(".experimentStartTimeInput",e.$refs.root).timepicker({timeFormat:"H:i:s"}).on("change",(function(t){e.onKeydown("startDateTime",t)})),di(".experimentEndTimeInput",e.$refs.root).timepicker({timeFormat:"H:i:s"}).on("change",(function(t){e.onKeydown("endDateTime",t)}))}))},methods:{toLocalTime:a,setDateState:function(){var e=this.experiment;if(null!==e&&void 0!==e&&e.start_date){var t=e.start_date.split(" "),n=ri(t,2);this.startDateDate=n[0],this.startDateTime=n[1],di(".experimentStartDateInput",this.$refs.root).datepicker("setDate",this.startDateDate)}if(null!==e&&void 0!==e&&e.end_date){var r=e.end_date.split(" "),i=ri(r,2);this.endDateDate=i[0],this.endDateTime=i[1],di(".experimentEndDateInput",this.$refs.root).datepicker("setDate",this.endDateDate)}},onStartDateChange:function(){var e=this.experiment,t=null;if(this.startDateDate){var n=this.startDateTime||"00:00:00";t="".concat(this.startDateDate," ").concat(n)}e.start_date!==t&&this.$emit("updateProperty",{prop:"start_date",value:t})},onEndDateChange:function(){var e=this.experiment,t=null;if(this.endDateDate){var n=this.endDateTime||"23:59:59";t="".concat(this.endDateDate," ").concat(n)}e.end_date!==t&&this.$emit("updateProperty",{prop:"end_date",value:t})},onKeydown:function(e,t){var n=this;setTimeout((function(){n[e]=t.target.value}))}},computed:{experimentStartHelp:function(){return Object(E["translate"])("AbTesting_FieldScheduleExperimentStartHelp","<strong>","</strong>")},experimentFinishHelp:function(){return Object(E["translate"])("AbTesting_FieldScheduleExperimentFinishHelp","<strong>","</strong>")}}});ui.render=ni;var mi=ui,pi={class:"alert alert-info"},bi={class:"alert alert-info"},vi={class:"secondary"},gi={class:"alert alert-warning"},fi=Object(o["createElementVNode"])("br",null,null,-1),Oi=Object(o["createElementVNode"])("br",null,null,-1),ji=Object(o["createElementVNode"])("code",null,"chmod 0755 matomo.js",-1),hi=[ji],Ei=Object(o["createElementVNode"])("br",null,null,-1),yi=Object(o["createElementVNode"])("br",null,null,-1),xi=["innerHTML"],Vi={class:"alert alert-info"},Ti=Object(o["createElementVNode"])("br",null,null,-1),Ni=Object(o["createElementVNode"])("br",null,null,-1),Si={class:"secondary"},_i=["innerHTML"],Ai={class:"secondary"},wi=["innerHTML"],Di=Object(o["createTextVNode"])(""),ki=Object(o["createTextVNode"])(""),Ci=["innerHTML"],Ui={class:"secondary"},Mi=["innerHTML"],Pi=Object(o["createTextVNode"])(""),Ii={class:"secondary"},Bi=["innerHTML"],Fi=["innerHTML"];function Hi(e,t,n,r,i,a){var l=Object(o["resolveDirective"])("copy-to-clipboard");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",pi,Object(o["toDisplayString"])(e.translate("AbTesting_ExperimentIsFinishedPleaseRemoveCode")),1)],512),[[o["vShow"],"finished"===e.experiment.status]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",bi,Object(o["toDisplayString"])(e.translate("AbTesting_WhereToInsertCodeWarning")),1),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("AbTesting_ExperimentWillStartFromFirstTrackingRequest")),1),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("h2",vi,Object(o["toDisplayString"])(e.translate("AbTesting_RunExperimentWithJsClient")),1),Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",gi,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_CustomJsNotAllowedWarning"))+" ",1),fi,Oi,Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("pre",null,hi,512),[[l,{}]])]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_IncludeAbTestingTrackerCode"))+" ",1),Ei,yi,Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("pre",null,[Object(o["createElementVNode"])("code",null,Object(o["toDisplayString"])(e.jsIncludeTemplateCode),1)],512),[[l,{}]])])],512),[[o["vShow"],e.jsIncludeTemplateCode]]),Object(o["createElementVNode"])("p",{innerHTML:e.$sanitize(e.getRunExperimentsInJsTracker)},null,8,xi),Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("pre",null,[Object(o["createElementVNode"])("code",null,Object(o["toDisplayString"])(e.jsExperimentTemplateCode),1)],512),[[l,{}]])]),Object(o["createElementVNode"])("div",Vi,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_UpdateExperimentWarning"))+" ",1),Ti,Ni,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_TestVariationViaUrl")),1)])]),Object(o["createElementVNode"])("h2",Si,Object(o["toDisplayString"])(e.translate("AbTesting_RunExperimentWithJsTracker")),1),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("p",{innerHTML:e.$sanitize(e.getRunningTestOnServer)},null,8,_i),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("AbTesting_HowToRunTestOnServer")),1),Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("pre",null,[Object(o["createElementVNode"])("code",null,"var _paq = _paq || [];\n_paq.push(['AbTesting::enter', {experiment: '"+Object(o["toDisplayString"])(e.name)+"', 'variation': 'myVariationName'}]);\n\n// "+Object(o["toDisplayString"])(e.translate("AbTesting_CodeCommentUseOriginal"))+"\n_paq.push(['AbTesting::enter', {experiment: '"+Object(o["toDisplayString"])(e.name)+"', 'variation': 'original'}]);\n\n// "+Object(o["toDisplayString"])(e.translate("AbTesting_CodeCommentUseExperimentId"))+"\n_paq.push(['AbTesting::enter', {experiment: '"+Object(o["toDisplayString"])(e.idExperiment)+"', 'variation': 'original'}]);\n            ",1)],512),[[l,{}]])])]),Object(o["createElementVNode"])("h2",Ai,Object(o["toDisplayString"])(e.translate("AbTesting_RunExperimentWithOtherSDK")),1),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("p",{innerHTML:e.$sanitize(e.getAppTrackingDescription)},null,8,wi),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("AbTesting_HeadingAppTrackingExample")),1),Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("pre",null,[Di,Object(o["createElementVNode"])("code",null,"_paq.push(['trackEvent', 'abtesting', '"+Object(o["toDisplayString"])(e.experiment.name)+"', 'name of variation']);\n\n// "+Object(o["toDisplayString"])(e.translate("AbTesting_CodeCommentUseOriginal"))+"\n_paq.push(['trackEvent', 'abtesting', '"+Object(o["toDisplayString"])(e.experiment.name)+"', 'original']);",1)],512),[[l,{}]])]),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("AbTesting_HeadingPhpTracker")),1),Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("pre",null,[ki,Object(o["createElementVNode"])("code",null,"$tracker->doTrackEvent('abtesting', '"+Object(o["toDisplayString"])(e.experiment.name)+"', 'name of variation');\n\n// "+Object(o["toDisplayString"])(e.translate("AbTesting_CodeCommentUseOriginal"))+"\n$tracker->doTrackEvent('abtesting', '"+Object(o["toDisplayString"])(e.experiment.name)+"', 'original');",1)],512),[[l,{}]])]),Object(o["createElementVNode"])("div",{class:"alert alert-info",innerHTML:e.$sanitize(e.getAppTrackingAlertText)},null,8,Ci)]),Object(o["createElementVNode"])("h2",Ui,Object(o["toDisplayString"])(e.translate("AbTesting_RunExperimentWithEmailCampaign")),1),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("p",{innerHTML:e.$sanitize(e.getRunningInCampaignDescription)},null,8,Mi),Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("pre",null,[Pi,Object(o["createElementVNode"])("code",null,"&pk_abe="+Object(o["toDisplayString"])(e.experiment.name)+"&pk_abv=myVariationName\n\n// "+Object(o["toDisplayString"])(e.translate("AbTesting_CodeCommentUseOriginal"))+"\n&pk_abe="+Object(o["toDisplayString"])(e.experiment.name)+"&pk_abv=original\n\n// "+Object(o["toDisplayString"])(e.translate("AbTesting_CodeCommentUseExperimentIdUrl"))+"\n&pk_abe="+Object(o["toDisplayString"])(e.experiment.idexperiment)+"&pk_abv=myVariationName",1)],512),[[l,{}]])]),Object(o["createElementVNode"])("h2",Ii,Object(o["toDisplayString"])(e.translate("AbTesting_NeedHelp")),1),Object(o["createElementVNode"])("p",{innerHTML:e.$sanitize(e.getNeedHelpDevZone)},null,8,Bi),Object(o["createElementVNode"])("p",{innerHTML:e.$sanitize(e.getNeedHelpGetInTouch)},null,8,Fi)])])],512),[[o["vShow"],"running"===e.experiment.status||"created"===e.experiment.status]])])}var Li=Object(o["defineComponent"])({props:{experiment:{type:Object,required:!0},jsIncludeTemplateCode:{type:String,required:!0},jsExperimentTemplateCode:{type:String,required:!0}},directives:{CopyToClipboard:E["CopyToClipboard"]},computed:{name:function(){return this.experiment.name},idExperiment:function(){return this.experiment.idexperiment},getRunExperimentsInJsTracker:function(){return Object(E["translate"])("AbTesting_RunExperimentsInJsTracker",'<a target="blank" rel="noreferrer" href="https://developer.matomo.org/guides/ab-tests/browser">',"</a>")},getRunningTestOnServer:function(){return Object(E["translate"])("AbTesting_RunningTestOnServer",'<a target="blank" rel="noreferrer" href="https://developer.matomo.org/guides/ab-tests/server">',"</a>")},getAppTrackingDescription:function(){return Object(E["translate"])("AbTesting_AppTrackingDescription",'<a target="blank" rel="noreferrer" href="https://developer.matomo.org/guides/ab-tests/apps">',"</a>",'<a target="blank" rel="noreferrer" href="https://github.com/innocraft/php-experiments">',"</a>")},getAppTrackingAlertText:function(){return Object(E["translate"])("AbTesting_AppTrackingAlertText",'<a target="blank" rel="noreferrer" href="https://developer.matomo.org/guides/tracking-api-clients">',"</a>",'<a target="blank" rel="noreferrer" href="https://matomo.org/integrate/">',"</a>",'<a target="blank" rel="noreferrer" href="https://developer.matomo.org/api-reference/tracking-api">',"</a>","<code>","</code>")},getRunningInCampaignDescription:function(){return Object(E["translate"])("AbTesting_RunningInCampaignDescription",'<a target="blank" rel="noreferrer" href="https://developer.matomo.org/guides/ab-tests/campaign">',"</a>")},getNeedHelpDevZone:function(){return Object(E["translate"])("AbTesting_NeedHelpDevZone",'<a target="blank" rel="noreferrer" href="https://developer.matomo.org/integration">',"</a>")},getNeedHelpGetInTouch:function(){return Object(E["translate"])("AbTesting_NeedHelpGetInTouch",'<a target="blank" rel="noreferrer" href="https://matomo.org/contact/">',"</a>")}}});Li.render=Hi;var Ri=Li,$i="experimentsmanagement",zi=Object(o["defineComponent"])({props:{idExperiment:[Number,String]},components:{ContentBlock:E["ContentBlock"],Basic:ft,Metrics:Gt,Conditions:tn,Traffic:Tn,Targets:Qn,Redirects:jr,Schedule:mi,Embed:Ri},data:function(){return{isDirty:!1,jsTemplateCode:"",jsIncludeTemplateCode:"",successMetricOptions:[],confirmedEdit:!1,action:"",experiment:{},utcTime:void 0}},created:function(){var e=this;P.fetchJsIncludeTemplate().then((function(t){e.jsIncludeTemplateCode=t.value})),this.setUtcTime(),P.fetchAvailableSuccessMetrics().then((function(t){e.successMetricOptions=(t||[]).map((function(e){return{key:e.value,value:e.name}}))})),this.init()},watch:{idExperiment:function(e){null!==e&&this.init()}},methods:{setUtcTime:function(){var e=this;this.utcTime=this.getUtcTime(),setTimeout((function(){return e.setUtcTime()}),1e4)},getUtcTime:function(){var e=new Date;if(e.toUTCString)return e.toUTCString()},removeAnyExperimentNotification:function(){E["NotificationsStore"].remove("experimentsmanagement"),E["NotificationsStore"].remove("ajaxHelper")},showNotification:function(e,t){var n=E["NotificationsStore"].show({message:e,context:t,id:$i,type:"transient"});setTimeout((function(){E["NotificationsStore"].scrollToNotification(n)}),100)},showErrorFieldNotProvidedNotification:function(e){var t=Object(E["translate"])("AbTesting_ErrorXNotProvided",[e]);this.showNotification(t,"error")},hasSuccessMetric:function(e){return(this.successMetricOptions||[]).some((function(t){return t.key===e}))},init:function(){var e=this;this.confirmedEdit=!1,this.action="basic",this.experiment={},this.jsTemplateCode="",this.edit&&this.idExperiment?P.findExperiment(this.idExperiment).then((function(t){var n;t&&(e.experiment=Object(E["clone"])(t),e.confirmedEdit="running"!==e.experiment.status&&"finished"!==e.experiment.status,null!==(n=e.experiment.variations)&&void 0!==n&&n.length||(e.experiment.variations=[{name:"Variation1",percentage:""}]),e.addDefaultTargetIfNeeded(),e.addDefaultSuccessMetricIfNeeded(),P.fetchJsExperimentTemplate(e.idExperiment).then((function(t){e.jsTemplateCode=t.value})),e.isDirty=!1)})):this.create&&(this.experiment={idSite:E["Matomo"].idSite,name:"",description:"",hypothesis:"",variations:[{name:"Variation1",percentage:""}],confidence_threshold:"95.0"},this.addDefaultTargetIfNeeded(),this.isDirty=!1)},addDefaultTargetIfNeeded:function(){var e,t;!this.experiment||null!==(e=this.experiment.included_targets)&&void 0!==e&&e.length||(this.experiment.included_targets=[{attribute:"url",type:"any",value:"",inverted:0}]),!this.experiment||null!==(t=this.experiment.excluded_targets)&&void 0!==t&&t.length||(this.experiment.excluded_targets=[{attribute:"url",type:"equals_exactly",value:"",inverted:0}])},addDefaultSuccessMetricIfNeeded:function(){var e;if(this.experiment&&(null===(e=this.experiment.success_metrics)||void 0===e||!e.length)){this.experiment.success_metrics=[];var t="nb_conversions";this.hasSuccessMetric(t)||(t="nb_pageviews"),this.experiment.success_metrics.push({metric:t}),this.hasSuccessMetric("nb_orders")&&this.experiment.success_metrics.push({metric:"nb_orders"}),this.hasSuccessMetric("nb_orders_revenue")&&this.experiment.success_metrics.push({metric:"nb_orders_revenue"})}},finishExperiment:function(){var e=this;E["Matomo"].helper.modalConfirm(this.$refs.confirmFinishExperiment,{yes:function(){P.finishExperiment(e.idExperiment).then((function(t){"error"!==t.type&&(P.reload().then((function(){e.init()})),e.showNotification(Object(E["translate"])("AbTesting_ExperimentFinished"),t.type))}))}})},cancel:function(){var e=Object.assign({},E["MatomoUrl"].hashParsed.value);delete e.idExperiment,E["MatomoUrl"].updateHash(e)},createExperiment:function(){var e,t=this,n="AbTesting.addExperiment";if(this.removeAnyExperimentNotification(),this.checkRequiredFieldsAreSet()){if("equals_simple"===(null===(e=this.experiment.included_targets[0])||void 0===e?void 0:e.type)){if(!this.experiment.included_targets[0].value)return void this.showNotification(Object(E["translate"])("AbTesting_ErrorCreateNoUrlDefined"),"error");this.experiment.included_targets=[{attribute:"url",inverted:"0",type:"equals_simple",value:this.experiment.included_targets[0].value}]}else this.experiment.included_targets=[{attribute:"url",inverted:"0",type:"any",value:""}];this.addDefaultSuccessMetricIfNeeded(),P.createOrUpdateExperiment(this.experiment,n).then((function(e){if("error"!==e.type){t.isDirty=!1;var n=e.response.value;P.reload().then((function(){E["Matomo"].helper.isReportingPage()&&E["Matomo"].postEvent("updateReportingMenu"),E["MatomoUrl"].updateHash(Object.assign(Object.assign({},E["MatomoUrl"].hashParsed.value),{},{idExperiment:n})),setTimeout((function(){t.showNotification(Object(E["translate"])("AbTesting_ExperimentCreated"),e.type)}),200)}))}}))}},showEmbedAction:function(){this.isDirty?E["Matomo"].helper.modalConfirm(this.$refs.updateExperimentNeededToEmbed,{yes:function(){return null}}):this.action="embed"},updateExperiment:function(){var e=this;if(this.removeAnyExperimentNotification(),this.checkRequiredFieldsAreSet()){var t="AbTesting.updateExperiment",n=!1;if(this.experiment.start_date){var r=a(this.experiment.start_date,!1),i=new Date;r&&r<=i&&"created"===this.experiment.status&&(n=!0)}var o=function(){P.createOrUpdateExperiment(e.experiment,t).then((function(t){"error"!==t.type&&(e.isDirty=!1,P.reload().then((function(){e.init()})),e.showNotification(Object(E["translate"])("AbTesting_ExperimentUpdated"),t.type))}))};n?E["Matomo"].helper.modalConfirm(this.$refs.confirmUpdateStartExperiment,{yes:o}):o()}},checkRequiredFieldsAreSet:function(){if(!this.experiment.name){var e=Object(E["translate"])("AbTesting_ExperimentName");return this.showErrorFieldNotProvidedNotification(e),!1}if(!this.experiment.hypothesis){var t=Object(E["translate"])("AbTesting_Hypothesis");return this.showErrorFieldNotProvidedNotification(t),!1}if(!this.experiment.description){var n=Object(E["translate"])("General_Description");return this.showErrorFieldNotProvidedNotification(n),!1}return!0},onCancel:function(e){e.target.classList.contains("cancelLink")&&this.cancel()},setValueHasChanged:function(){this.isDirty=!0},setForwardUtmParams:function(e){this.experiment.forward_utm_params=e,this.setValueHasChanged()}},computed:{percentageParticipantsOptions:function(){var e=[1,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100];return e.map((function(e){return{key:"".concat(e),value:"".concat(e,"%")}}))},mdeRelativeOptions:function(){var e=[1,2,3,4,5,8,10,15,20,25,30,40,50,60,70,75,80,90,100,125,150,200,300];return e.map((function(e){return{key:"".concat(e),value:"".concat(e,"%")}}))},trafficAllocationOptions:function(){for(var e=[],t=0;t<101;t+=1)e.push({key:"".concat(t),value:"".concat(t,"%")});return e},confidenceThresholdOptions:function(){var e=["90.0","95.0","98.0","99.0","99.5"];return e.map((function(e){return{key:e,value:"".concat(e,"%")}}))},createExperimentTargetTypes:function(){return[{key:"any",value:Object(E["translate"])("AbTesting_ActivateExperimentOnAllPages")},{key:"equals_simple",value:Object(E["translate"])("AbTesting_ActiveExperimentOnSomePages")}]},create:function(){return!this.idExperiment||"0"===this.idExperiment},edit:function(){return!this.create},editTitle:function(){return this.create?"AbTesting_CreateNewExperiment":"AbTesting_EditExperiment"},contentTitle:function(){return Object(E["translate"])(this.editTitle,this.experiment.name?'"'.concat(this.experiment.name,'"'):"")},isLoading:function(){return P.state.value.isLoading},isUpdating:function(){return P.state.value.isUpdating},viewReportLink:function(){return"?".concat(E["MatomoUrl"].stringify({module:"CoreHome",action:"index",idSite:this.experiment.idsite,period:"range",date:this.experiment.date_range_string}),"#?").concat(E["MatomoUrl"].stringify({category:"AbTesting_Experiments",idSite:this.experiment.idsite,period:"range",date:this.experiment.date_range_string,subcategory:this.experiment.idexperiment}))}}});zi.render=xe;var qi=zi,Gi={class:"experimentStatusFilter",id:"filterStatus",name:"filterStatus"},Ki={style:{"margin-left":"3.5px"},class:"experimentSearchFilter",name:"experimentSearch"},Ji={class:"index"},Yi={class:"name"},Wi={class:"description"},Zi={class:"status"},Xi={class:"startDate"},Qi={class:"endDate"},ea={class:"action"},ta={colspan:"7"},na={class:"loadingPiwik"},ra=Object(o["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif"},null,-1),ia={colspan:"7"},aa=["id"],oa={class:"index"},la={class:"name"},ca={class:"description"},sa={class:"status"},da=["title"],ua=["title"],ma={class:"action"},pa=["title","onClick"],ba=["title","onClick"],va=["title","href"],ga=["title","onClick"],fa={class:"tableActionBar"},Oa=Object(o["createElementVNode"])("span",{class:"icon-add"},null,-1),ja={class:"ui-confirm",ref:"confirmArchiveExperiment"},ha=["value"],Ea=["value"],ya={class:"ui-confirm",ref:"confirmDeleteExperiment"},xa=["value"],Va=["value"];function Ta(e,t,n,r,i,a){var l=Object(o["resolveComponent"])("Field"),c=Object(o["resolveComponent"])("ContentBlock"),s=Object(o["resolveDirective"])("content-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(c,{"content-title":e.translate("AbTesting_ManageExperiments"),feature:e.translate("AbTesting_ManageExperiments")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("AbTesting_ManageExperimentsIntroduction")),1),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",Gi,[Object(o["createVNode"])(l,{uicontrol:"select",name:"filterStatus","model-value":e.filterStatus,"onUpdate:modelValue":t[0]||(t[0]=function(t){e.setFilterStatus(t),e.onFilterStatusChange()}),title:e.translate("AbTesting_Filter"),"full-width":!0,options:e.statusOptions},null,8,["model-value","title","options"])]),Object(o["createElementVNode"])("div",Ki,[Object(o["withDirectives"])(Object(o["createVNode"])(l,{uicontrol:"text",name:"experimentSearch",title:e.translate("General_Search"),modelValue:e.searchFilter,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchFilter=t}),"full-width":!0},null,8,["title","modelValue"]),[[o["vShow"],e.experiments.length>0]])])]),Object(o["withDirectives"])(Object(o["createElementVNode"])("table",null,[Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",Ji,Object(o["toDisplayString"])(e.translate("General_Id")),1),Object(o["createElementVNode"])("th",Yi,Object(o["toDisplayString"])(e.translate("General_Name")),1),Object(o["createElementVNode"])("th",Wi,Object(o["toDisplayString"])(e.translate("General_Description")),1),Object(o["createElementVNode"])("th",Zi,Object(o["toDisplayString"])(e.translate("AbTesting_Status")),1),Object(o["createElementVNode"])("th",Xi,Object(o["toDisplayString"])(e.translate("AbTesting_StartDate"))+" (UTC)",1),Object(o["createElementVNode"])("th",Qi,Object(o["toDisplayString"])(e.translate("AbTesting_FinishDate"))+" (UTC)",1),Object(o["createElementVNode"])("th",ea,Object(o["toDisplayString"])(e.translate("General_Actions")),1)])]),Object(o["createElementVNode"])("tbody",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("td",ta,[Object(o["createElementVNode"])("span",na,[ra,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("General_LoadingData")),1)])])],512),[[o["vShow"],e.isLoading||e.isUpdating]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("td",ia,[Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.translate("AbTesting_NoExperimentsFound")),513),[[o["vShow"],e.filterStatus]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("AbTesting_NoActiveExperimentConfigured"))+" ",1),Object(o["createElementVNode"])("a",{onClick:t[2]||(t[2]=function(t){return e.createExperiment()})},Object(o["toDisplayString"])(e.translate("AbTesting_CreateNewExperimentNow")),1)],512),[[o["vShow"],!e.filterStatus]])])],512),[[o["vShow"],!e.isLoading&&0===e.experiments.length]]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.sortedExperiments,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{id:"experiment".concat(t.idexperiment),class:"experiments",key:t.idexperiment},[Object(o["createElementVNode"])("td",oa,Object(o["toDisplayString"])(t.idexperiment),1),Object(o["createElementVNode"])("td",la,Object(o["toDisplayString"])(t.name),1),Object(o["createElementVNode"])("td",ca,Object(o["toDisplayString"])(e.truncateString(t.description.trim(),60)),1),Object(o["createElementVNode"])("td",sa,Object(o["toDisplayString"])(e.readableExperimentStatus(t.status,e.statusOptions)),1),Object(o["createElementVNode"])("td",{class:"startDate",title:e.dateInYourTimezoneText(t,t.start_date)},Object(o["toDisplayString"])(t.start_date),9,da),Object(o["createElementVNode"])("td",{class:"endDate",title:e.dateInYourTimezoneText(t,t.end_date)},Object(o["toDisplayString"])(t.end_date),9,ua),Object(o["createElementVNode"])("td",ma,[Object(o["createElementVNode"])("a",{class:"table-action icon-edit",title:e.translate("AbTesting_EditThisExperiment"),onClick:function(n){return e.editExperiment(t.idexperiment)}},null,8,pa),Object(o["withDirectives"])(Object(o["createElementVNode"])("a",{class:"table-action icon-delete",title:e.translate("AbTesting_DeleteExperimentInfo"),onClick:function(n){return e.deleteExperiment(t)}},null,8,ba),[[o["vShow"],"created"===t.status]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("a",{target:"_blank",class:"table-action icon-show",title:e.translate("AbTesting_ViewReportInfo"),href:e.getViewReportLink(t)},null,8,va),[[o["vShow"],e.showViewReportInfo(t)]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("a",{class:"table-action abtestingicon-box-add",title:e.translate("AbTesting_ArchiveReportInfo"),onClick:function(n){return e.archiveExperiment(t)}},null,8,ga),[[o["vShow"],"finished"===t.status]])])],8,aa)})),128))])],512),[[s]]),Object(o["createElementVNode"])("div",fa,[Object(o["createElementVNode"])("a",{class:"createNewExperiment",onClick:t[3]||(t[3]=function(t){return e.createExperiment()})},[Oa,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_CreateNewExperiment")),1)])])]})),_:1},8,["content-title","feature"]),Object(o["createElementVNode"])("div",ja,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("AbTesting_ArchiveReportConfirm")),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,ha),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Ea)],512),Object(o["createElementVNode"])("div",ya,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("AbTesting_DeleteExperimentConfirm")),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,xa),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Va)],512)])}function Na(e){return wa(e)||Aa(e)||_a(e)||Sa()}function Sa(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _a(e,t){if(e){if("string"===typeof e)return Da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Da(e,t):void 0}}function Aa(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function wa(e){if(Array.isArray(e))return Da(e)}function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ka=Object(o["defineComponent"])({props:{},components:{ContentBlock:E["ContentBlock"],Field:y["Field"]},directives:{ContentTable:E["ContentTable"]},data:function(){return{searchFilter:"",statusOptions:[]}},created:function(){var e=this;P.fetchAvailableStatuses().then((function(t){e.statusOptions=[{key:"",value:Object(E["translate"])("AbTesting_StatusActive")}].concat(Na(t.map((function(e){return{key:e.value,value:e.name}}))))})),this.onFilterStatusChange()},methods:{createExperiment:function(){this.editExperiment(0)},editExperiment:function(e){E["MatomoUrl"].updateHash(Object.assign(Object.assign({},E["MatomoUrl"].hashParsed.value),{},{idExperiment:e}))},deleteExperiment:function(e){E["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteExperiment,{yes:function(){P.deleteExperiment(e.idexperiment).then((function(){P.reload()}))}})},archiveExperiment:function(e){E["Matomo"].helper.modalConfirm(this.$refs.confirmArchiveExperiment,{yes:function(){P.archiveExperiment(e.idexperiment).then((function(){P.reload()}))}})},onFilterStatusChange:function(){P.fetchExperiments()},setFilterStatus:function(e){P.setFilterStatus(e)},truncateString:function(e,t){return e&&e.length>t?"".concat(e.substr(0,t-3),"..."):e},readableExperimentStatus:function(e,t){var n;return t?null===(n=t.find((function(t){return e===t.key})))||void 0===n?void 0:n.value:e},dateInYourTimezoneText:function(e,t){var n=Object(E["translate"])("AbTesting_EqualsDateInYourTimezone");return a(t,!0)?"".concat(n).concat(a(t,!0)):""},showViewReportInfo:function(e){return("running"===e.status||"finished"===e.status)&&e.date_range_string},getViewReportLink:function(e){return"?".concat(E["MatomoUrl"].stringify({module:"CoreHome",action:"index",idSite:e.idsite,period:"range",date:e.date_range_string}),"#?").concat(E["MatomoUrl"].stringify({category:"AbTesting_Experiments",idSite:e.idsite,period:"range",date:e.date_range_string,subcategory:e.idexperiment}))}},computed:{siteName:function(){return E["Matomo"].siteName},filterStatus:function(){return P.state.value.filterStatus},experiments:function(){return P.state.value.experiments},isLoading:function(){return P.state.value.isLoading},isUpdating:function(){return P.state.value.isUpdating},sortedExperiments:function(){var e=this,t=Na(this.experiments).filter((function(t){return Object.keys(t).some((function(n){var r=t;return"string"===typeof r[n]&&-1!==r[n].indexOf(e.searchFilter)}))}));return t.sort((function(e,t){var n=parseInt("".concat(e.idexperiment),10),r=parseInt("".concat(t.idexperiment),10);return n-r})),t}}});ka.render=Ta;var Ca=ka,Ua={class:"manageExperiments"};function Ma(e,t,n,r,i,a){var l=Object(o["resolveComponent"])("ListExperiments"),c=Object(o["resolveComponent"])("EditExperiments");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ua,[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(l)],512),[[o["vShow"],!e.editMode]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(c,{"id-experiment":e.idExperiment},null,8,["id-experiment"])],512),[[o["vShow"],e.editMode]])])}var Pa=Object(o["defineComponent"])({props:{},components:{EditExperiments:qi,ListExperiments:Ca},data:function(){return{editMode:!1,idExperiment:null}},created:function(){var e=this;Object(o["watch"])((function(){return E["MatomoUrl"].hashParsed.value.idExperiment}),(function(t){e.initState(t)})),this.initState(E["MatomoUrl"].hashParsed.value.idExperiment)},methods:{removeAnyExperimentNotification:function(){E["NotificationsStore"].remove("experimentsmanagement")},initState:function(e){if(e){if("0"===e){var t={isAllowed:!0};if(E["Matomo"].postEvent("AbTesting.initAddExperiment",t),t&&!t.isAllowed)return this.editMode=!1,void(this.idExperiment=null)}this.editMode=!0,this.idExperiment=parseInt(e,10)}else this.editMode=!1,this.idExperiment=null;this.removeAnyExperimentNotification()}}});Pa.render=Ma;var Ia=Pa;
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */function Ba(){var e=window.location.href;return-1!==e.indexOf("category=AbTesting_Experiments&subcategory=AbTesting_GettingStarted")}function Fa(){Ba()&&E["AjaxHelper"].fetch({method:"AbTesting.getActiveExperiments"}).then((function(e){var t;Ba()&&null!==e&&void 0!==e&&e.length&&null!==e&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&t.idexperiment&&E["MatomoUrl"].updateUrl(Object.assign(Object.assign({},E["MatomoUrl"].urlParsed.value),{},{idSite:E["Matomo"].idSite}),Object.assign(Object.assign({},E["MatomoUrl"].hashParsed.value),{},{category:"AbTesting_Experiments",subcategory:e[0].idexperiment}))})).catch((function(){}))}function Ha(){var e=1e3;setTimeout(Fa,e),setTimeout(Fa,10*e),setTimeout(Fa,60*e),setTimeout(Fa,300*e),setTimeout(Fa,600*e),setTimeout(Fa,3e3*e),setTimeout(Fa,6e3*e)}
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */var La=window,Ra=La.$,$a={mounted:function(e,t){if(E["Matomo"].helper.isReportingPage()){var n=Ra(e);if("a"!==e.tagName.toLowerCase()){var r=Ra(e).text();Ra(e).html("<a></a>"),n=Ra(e).find("a"),n.text(r)}n.css("margin-right","3.5px").bind("click",(function(e){e.preventDefault(),E["MatomoUrl"].updateHash(Object.assign(Object.assign({},E["MatomoUrl"].hashParsed.value),{},{category:"AbTesting_Experiments",subcategory:t.value.idExperiment}))}))}}},za=$a;E["Matomo"].on("Matomo.processDynamicHtml",(function(e){e.find("[piwik-experiment-page-link]").each((function(e,t){if(!Ra(t).attr("piwik-experiment-page-link-handled")){var n=Ra(t).attr("piwik-experiment-page-link");n&&$a.mounted(t,{instance:null,value:{idExperiment:n},oldValue:null,modifiers:{},dir:{}}),Ra(t).attr("piwik-experiment-page-link-handled","1")}}))}));var qa={class:"experimentSummary"},Ga=Object(o["createElementVNode"])("br",null,null,-1),Ka=Object(o["createElementVNode"])("br",null,null,-1),Ja=Object(o["createElementVNode"])("br",null,null,-1),Ya=Object(o["createElementVNode"])("br",null,null,-1),Wa={key:0,style:{"margin-left":"3.5px"}},Za=["innerHTML"],Xa=Object(o["createElementVNode"])("br",null,null,-1),Qa=Object(o["createElementVNode"])("br",null,null,-1),eo={key:1},to=["innerHTML"],no=["title"];function ro(e,t,n,r,i,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("p",qa,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("AbTesting_Hypothesis"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.experiment.hypothesis)+" ",1),Ga,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("General_Description"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.experiment.description)+" ",1),Ka,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("AbTesting_ExpectedImprovement"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.experiment.mde_relative)+"% ",1),Ja,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("AbTesting_ConfidenceThreshold"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.experiment.confidence_threshold)+"% ",1),Ya,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("AbTesting_Status"))+":",1),"running"===e.experiment.status?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Wa,[Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.reportStatusRunning),style:{"margin-right":"3.5px"}},null,8,Za),e.isAdmin?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,class:"finishExperiment",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(t){return e.finishExperiment()}),["prevent"]))},Object(o["toDisplayString"])(e.translate("AbTesting_ActionFinishExperiment")),1)):Object(o["createCommentVNode"])("",!0),Xa,Qa,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("AbTesting_ReportWhenToDeclareWinner")),1)])):Object(o["createCommentVNode"])("",!0),"finished"===e.experiment.status?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",eo,[Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.reportStatusFinished)},null,8,to),e.isAdmin?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,title:e.translate("AbTesting_ArchiveReportInfo"),onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(t){return e.archiveExperiment()}),["prevent"])),class:"archiveExperiment"},Object(o["toDisplayString"])(e.translate("AbTesting_ActionArchiveExperiment")),9,no)):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)])}var io=Object(o["defineComponent"])({props:{experiment:{type:Object,required:!0},isAdmin:Boolean,startDateSiteTimezonePretty:String,endDateSiteTimezonePretty:String},computed:{reportStatusRunning:function(){return Object(E["translate"])("AbTesting_ReportStatusRunning",'<span class="reportDuration">'.concat(this.experiment.duration,"</span>"),this.startDateSiteTimezonePretty||"")},reportStatusFinished:function(){return Object(E["translate"])("AbTesting_ReportStatusFinished",'<span class="reportDuration">'.concat(this.experiment.duration,"</span>"),this.startDateSiteTimezonePretty||"",this.endDateSiteTimezonePretty||"")}},methods:{finishExperiment:function(){var e=this;E["Matomo"].helper.modalConfirm("#confirmFinishExperiment",{yes:function(){P.finishExperiment(e.experiment.idexperiment).then((function(e){"error"!==e.type&&E["Matomo"].helper.redirect()}))}})},archiveExperiment:function(){var e=this;E["Matomo"].helper.modalConfirm("#confirmArchiveExperiment",{yes:function(){P.archiveExperiment(e.experiment.idexperiment).then((function(t){"error"!==t.type&&(E["NotificationsStore"].show({message:Object(E["translate"])("AbTesting_ActionArchiveExperimentSuccess"),context:"success",type:"transient"}),E["MatomoUrl"].updateUrl(Object.assign(Object.assign({},E["MatomoUrl"].urlParsed.value),{},{popover:"",idExperiment:e.experiment.idexperiment,segment:""}),Object.assign(Object.assign({},E["MatomoUrl"].hashParsed.value),{},{category:"General_Visitors",subcategory:"General_Overview"})))}))}})}}});io.render=ro;var ao=io,oo={class:"ui-confirm",id:"confirmArchiveExperiment"},lo=["value"],co=["value"],so={class:"ui-confirm",id:"confirmFinishExperiment"},uo=["value"],mo=["value"],po={id:"abtestPeriod",class:"piwikTopControl piwikSelector borderedControl periodSelector"},bo=["title"],vo=Object(o["createElementVNode"])("span",{class:"icon icon-calendar"},null,-1);function go(e,t,n,r,i,a){var l=Object(o["resolveComponent"])("Summary"),c=Object(o["resolveDirective"])("content-intro");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("AbTesting_MenuTitleExperiment",e.experiment.name)),1),Object(o["createVNode"])(l,{"is-admin":e.isAdmin,experiment:e.experiment,"start-date-site-timezone-pretty":e.startDateTimezone,"end-date-site-timezone-pretty":e.endDateTimezone},null,8,["is-admin","experiment","start-date-site-timezone-pretty","end-date-site-timezone-pretty"]),Object(o["createElementVNode"])("div",oo,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("AbTesting_ArchiveReportConfirm")),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,lo),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,co)]),Object(o["createElementVNode"])("div",so,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("AbTesting_ConfirmFinishExperiment")),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,uo),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,mo)]),Object(o["createElementVNode"])("div",po,[Object(o["createElementVNode"])("span",{id:"date",class:"title",title:e.translate("AbTesting_ReportDateCannotBeChanged")},[vo,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.readablePeriod),1)],8,bo)])],512)),[[c]])}
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */var fo=!1,Oo=window,jo=Oo.$,ho=Oo.initTopControls;function Eo(){var e=".top_controls #abtestPeriod",t="#periodString";jo(t).hide(),jo(e).remove(),jo("#abtestPeriod").insertAfter("#periodString"),"undefined"!==typeof ho&&ho&&ho(),fo||(fo=!0,E["Matomo"].on("piwikPageChange",(function(){var n=window.location.href,r=E["MatomoUrl"].hashParsed.value.subcategory,i=!n||-1===n.indexOf("&category=AbTesting_Experiments&subcategory=")||r&&!/^\d+$/.test(String(r));i&&(jo(t).show(),jo(e).remove(),"undefined"!==typeof ho&&ho&&ho())})))}window.initAbTest=Eo;var yo=Object(o["defineComponent"])({props:{experiment:{type:Object,required:!0},isAdmin:Boolean,startDateTimezone:String,endDateTimezone:String,readablePeriod:{type:String,required:!0}},directives:{ContentIntro:E["ContentIntro"]},components:{Summary:ao},created:function(){Eo()}});yo.render=go;var xo=yo;
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */}})}));
//# sourceMappingURL=AbTesting.umd.min.js.map