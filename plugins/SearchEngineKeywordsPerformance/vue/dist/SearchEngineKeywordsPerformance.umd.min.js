(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["SearchEngineKeywordsPerformance"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["SearchEngineKeywordsPerformance"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(r,c,function(t){return e[t]}.bind(null,c));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/SearchEngineKeywordsPerformance/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"AdminPage",(function(){return N})),n.d(t,"BingConfiguration",(function(){return Ie})),n.d(t,"GoogleConfiguration",(function(){return An})),n.d(t,"YandexConfiguration",(function(){return ic})),n.d(t,"ConfigureConnection",(function(){return kc})),"undefined"!==typeof window){var r=window.document.currentScript,c=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(n.p=c[1])}var o=n("8bbf"),a={class:"keywordproviders"},l=Object(o["createElementVNode"])("div",{class:"clear"},null,-1);function i(e,t,n,r,c,i){var s=Object(o["resolveComponent"])("Provider"),u=Object(o["resolveComponent"])("ContentBlock");return Object(o["openBlock"])(),Object(o["createBlock"])(u,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigurationDescription")),1),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ProviderListDescription")),1),Object(o["createElementVNode"])("div",a,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.providers,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:e.id,provider:e},null,8,["provider"])})),128)),l])]})),_:1},8,["content-title"])}var s=n("19dc"),u=["title"],d=["src","alt"],b=["innerHTML"],m=["innerHTML"],O={key:0,class:"experimental"},j=["href"],p={key:0,class:"btn"},f={key:1,class:"btn"};function g(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])({keywordprovider:!0,warning:e.hasWarning,configured:!e.hasWarning&&e.provider.is_configured})},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.provider.logos,(function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:n,class:Object(o["normalizeClass"])("logo ".concat(e.provider.logos.length>1?"double":"")),title:e.logoTooltip},[Object(o["createElementVNode"])("img",{src:t,alt:e.provider.name},null,8,d)],10,u)})),128)),Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(e.provider.name),1),Object(o["createElementVNode"])("p",{innerHTML:e.$sanitize(e.provider.description)},null,8,b),Object(o["createElementVNode"])("p",null,[Object(o["createElementVNode"])("em",{innerHTML:e.$sanitize(e.provider.note)},null,8,m)]),e.provider.is_experimental?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",O,"experimental")):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("a",{href:e.configureUrl,class:"cta"},[e.provider.is_configured?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",p,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ChangeConfiguration")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",f,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_SetupConfiguration")),1))],8,j)],2)}var y=Object(o["defineComponent"])({props:{provider:{type:Object,required:!0}},computed:{hasWarning:function(){var e=this.provider;return e.is_configured&&(0===Object.keys(e.configured_site_ids).length||Object.keys(e.problems.sites).length||Object.keys(e.problems.accounts).length)},logoTooltip:function(){var e=this.provider,t=e.is_configured&&0===Object.keys(e.configured_site_ids).length;return t?Object(s["translate"])("SearchEngineKeywordsPerformance_ConfigAvailableNoWebsiteConfigured"):e.is_configured?Object(s["translate"])("SearchEngineKeywordsPerformance_IntegrationConfigured"):Object(s["translate"])("SearchEngineKeywordsPerformance_IntegrationNotConfigured")},configureUrl:function(){return"?".concat(s["MatomoUrl"].stringify(Object.assign(Object.assign({},s["MatomoUrl"].urlParsed.value),{},{action:"configure".concat(this.provider.id)})))}}});y.render=g;var E=y,h=Object(o["defineComponent"])({props:{providers:{type:Array,required:!0}},components:{ContentBlock:s["ContentBlock"],Provider:E}});h.render=i;var N=h;function v(e,t){return C(e)||A(e,t)||S(e,t)||V()}function V(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){if(e){if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(i){l=!0,c=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw c}}return o}}function C(e){if(Array.isArray(e))return e}var w={class:"ui-confirm",id:"confirmRemoveAccountConfig",ref:"confirmRemoveAccountConfig"},B=["value"],D=["value"],_={class:"measurableList"},T=Object(o["createElementVNode"])("th",null,null,-1),P={key:0},K={colspan:"6"},x={key:0,class:"icon-error"},U={key:0,class:"icon-error"},M=["onSubmit"],I=["value"],L=["title"],F={key:1},H={colspan:"6",align:"right"},G={key:2,class:"configureMeasurableForm"},R={colspan:"2"},q={class:"bingAccountAndUrlToAdd"},z={colspan:"3"},$={action:"",method:"post"},W=["value"],Y=["value"],X=["value"],J={class:"ui-confirm",id:"confirmDeleteAccount",ref:"confirmDeleteAccount"},Q=["value"],Z=["value"],ee={class:"accounts"},te=["innerHTML"],ne={key:0,class:"accounterror"},re=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),ce={key:1},oe={key:0,class:"accounterror"},ae=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),le={key:1},ie={key:0},se=Object(o["createElementVNode"])("span",{class:"icon-success"},null,-1),ue={key:1},de={class:"accounterror"},be=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),me={key:2},Oe=Object(o["createElementVNode"])("span",{class:"icon-error"},null,-1),je={class:"cta"},pe=["onSubmit"],fe=["value"],ge={type:"submit",class:"btn"},ye={method:"POST",action:""},Ee=Object(o["createElementVNode"])("div",{class:"icon-add logo"},null,-1),he=["innerHTML"],Ne={key:0,class:"accounterror"},ve=Object(o["createElementVNode"])("br",null,null,-1),Ve=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),Se=["value"],ke={class:"cta"},Ae={type:"submit",class:"btn"},Ce=Object(o["createElementVNode"])("div",{class:"clear"},null,-1);function we(e,t,n,r,c,a){var l=Object(o["resolveComponent"])("ContentBlock"),i=Object(o["resolveComponent"])("Field"),s=Object(o["resolveDirective"])("content-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingConfigurationTitle")),1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingConfigurationDescription")),1)]})),_:1},8,["content-title"]),Object.keys(e.accounts).length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:Object(o["normalizeClass"])("websiteconfiguration ".concat(Object.keys(e.configuredMeasurables).length?"configured":""))},[Object(o["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurables")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurableBelow")),1),Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigRemovalConfirm",e.removeAccountConfigName)),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,B),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,D)],512),Object(o["createElementVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("table",_,[Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("General_Measurable")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("Mobile_Account")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("Goals_URL")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_LastImport")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CreatedBy")),1),T])]),Object(o["createElementVNode"])("tbody",null,[Object.keys(e.configuredMeasurables).length?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",P,[Object(o["createElementVNode"])("td",K,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_NoWebsiteConfigured")),1)])])),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.configuredMeasurablesToDisplay,(function(t,n,r){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:r,class:Object(o["normalizeClass"])(e.sitesInfos[n].accountValid&&e.sitesInfos[n].urlValid?"":"error")},[Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.sitesInfos[n].name)+" ",1),Object(o["createElementVNode"])("span",null,"("+Object(o["toDisplayString"])(e.sitesInfos[n].main_url)+")",1)]),Object(o["createElementVNode"])("td",null,[e.sitesInfos[n].accountValid?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",x)),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.apiKeyDisplay),1)]),Object(o["createElementVNode"])("td",null,[e.sitesInfos[n].urlValid?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",U)),Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.url),1)]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.sitesInfos[n].lastRun),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.createdByUser),1),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(o["withModifiers"])((function(t){return e.removeAccountConfig(n,t)}),["prevent"])},[Object(o["createElementVNode"])("input",{type:"hidden",name:"removeConfig",value:n},null,8,I),t.isDeletionAllowed?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,type:"submit",class:"btn-flat icon-delete",title:e.translate("General_Delete")},null,8,L)):Object(o["createCommentVNode"])("",!0)],40,M)])],2)})),128)),e.countOfAccountsWithAccess?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",F,[Object(o["createElementVNode"])("td",H,[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(t){return e.isAddingMeasurable=!0}),["prevent"]))},Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddConfiguration")),1)])],512)),[[o["vShow"],!e.isAddingMeasurable]]):Object(o["createCommentVNode"])("",!0),e.countOfAccountsWithAccess?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",G,[Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(i,{uicontrol:"site",modelValue:e.currentSiteToAdd,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.currentSiteToAdd=t}),title:e.translate("CoreHome_ChooseX",e.translate("General_Measurable"))},null,8,["modelValue","title"])]),Object(o["createElementVNode"])("td",R,[Object(o["createElementVNode"])("div",q,[Object(o["createVNode"])(i,{uicontrol:"select",modelValue:e.bingAccountAndUrlToAdd,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.bingAccountAndUrlToAdd=t}),title:e.translate("SearchEngineKeywordsPerformance_UrlOfAccount"),options:e.urlOptions},null,8,["modelValue","title","options"])])]),Object(o["createElementVNode"])("td",z,[Object(o["createElementVNode"])("form",$,[Object(o["createElementVNode"])("input",{type:"hidden",name:"bingSiteId",value:e.currentSiteToAdd.id},null,8,W),Object(o["createElementVNode"])("input",{type:"hidden",name:"bingAccountAndUrl",value:e.bingAccountAndUrlToAdd},null,8,Y),Object(o["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("General_Save")},null,8,X)])])],512)),[[o["vShow"],e.isAddingMeasurable]]):Object(o["createCommentVNode"])("",!0)])],512),[[s]])])]})),_:1},8,["content-title"])],2)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])("accountconfiguration ".concat(Object.keys(e.accounts).length>0?"configured":""))},[Object(o["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_ManageAPIKeys")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",J,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountRemovalConfirm",e.removeAccountName)),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Q),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Z)],512),Object(o["createElementVNode"])("div",ee,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.accountsToDisplay,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:t.username,class:Object(o["normalizeClass"])("account ".concat(0===Object.keys(t.urls).length||"string"===typeof t.hasError?"invalid":""))},[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])("icon-".concat(0===Object.keys(t.urls).length||"string"===typeof t.hasError?"warning":"success"," logo"))},null,2),Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(e.getDisplayApiKey(t.apiKey)),1),Object(o["createElementVNode"])("p",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_AccountAddedBy",t.username,t.created_formatted))},null,8,te),"string"===typeof t.hasError?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",ne,[re,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingAccountError",t.hasError)),1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ce,[0===Object.keys(t.urls).length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",oe,[ae,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",le,[Object.values(t.urls).some((function(e){return e}))?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ie,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AvailableSites")),1),Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object.entries(t.urls).filter((function(e){var t=v(e,2),n=t[1];return n})),(function(e,t){var n=v(e,1),r=n[0];return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},[se,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(r),1)])})),128))])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ue,[Object(o["createElementVNode"])("p",de,[be,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])])),Object.values(t.urls).some((function(e){return!e}))?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",me,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_UnverifiedSites")),1),Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object.entries(t.urls).filter((function(e){var t=v(e,2),n=t[1];return!n})),(function(e,t){var n=v(e,1),r=n[0];return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},[Oe,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(r),1)])})),128))])])):Object(o["createCommentVNode"])("",!0)]))])),Object(o["createElementVNode"])("div",je,[Object(o["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(o["withModifiers"])((function(n){return e.removeAccount(t,n)}),["prevent"])},[Object(o["createElementVNode"])("input",{type:"hidden",name:"remove",value:t.apiKey},null,8,fe),Object(o["createElementVNode"])("button",ge,Object(o["toDisplayString"])(e.translate("General_Remove")),1)],40,pe)])],2)})),128)),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])("account add ".concat(e.hasApiKeyError?"invalid":""))},[Object(o["createElementVNode"])("form",ye,[Ee,Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddAPIKey")),1),Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.bingApiKeyInstructionText)},null,8,he),e.hasApiKeyError?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",Ne,[ve,Ve,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingAccountError",e.error)),1)])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(i,{uicontrol:"text","full-width":!0,name:"apikey",modelValue:e.apiKeyToAdd,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.apiKeyToAdd=t}),title:e.translate("SearchEngineKeywordsPerformance_APIKey")},null,8,["modelValue","title"]),Object(o["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.formNonce},null,8,Se),Object(o["createElementVNode"])("div",ke,[Object(o["createElementVNode"])("button",Ae,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddAPIKey")),1)])])],2),Ce])]})),_:1},8,["content-title"])],2)])}var Be=n("a5a2");
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e.substr(0,5),"*****").concat(e.substr(e.length-5,5))}function _e(e,t){return Ue(e)||xe(e,t)||Pe(e,t)||Te()}function Te(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pe(e,t){if(e){if("string"===typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(i){l=!0,c=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw c}}return o}}function Ue(e){if(Array.isArray(e))return e}var Me=Object(o["defineComponent"])({props:{configuredMeasurables:{type:Object,required:!0},accounts:{type:Object,required:!0},sitesInfos:{type:Object,required:!0},currentSite:{type:Object,required:!0},urlOptions:{type:[Object,Array],required:!0},error:String,apikey:String,formNonce:String,countOfAccountsWithAccess:Number,userIsSuperUser:String},data:function(){return{removeAccountConfigName:"",removeAccountName:"",isAddingMeasurable:!1,currentSiteToAdd:this.currentSite,bingAccountAndUrlToAdd:null,apiKeyToAdd:this.apikey||""}},components:{ContentBlock:s["ContentBlock"],Field:Be["Field"]},directives:{ContentTable:s["ContentTable"]},methods:{removeAccountConfig:function(e,t){var n=this.sitesInfos;this.removeAccountConfigName=n[e].name,s["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveAccountConfig,{yes:function(){t.target.submit()}})},getDisplayApiKey:De,removeAccount:function(e,t){this.removeAccountName=this.getDisplayApiKey(e.apiKey),s["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteAccount,{yes:function(){t.target.submit()}})}},computed:{hasApiKeyError:function(){return"undefined"!==typeof this.error&&null!==this.error},configuredMeasurablesToDisplay:function(){var e=this,t=Object.entries(this.configuredMeasurables);return Object.fromEntries(t.filter((function(t){var n=_e(t,2),r=n[1],c=r.bingSiteUrl.split("##"),o=_e(c,1),a=o[0];return!!e.accounts[a]})).map((function(t){var n=_e(t,2),r=n[0],c=n[1],o=c.bingSiteUrl.split("##"),a=_e(o,2),l=a[0],i=a[1],s=e.accounts[l].apiKey;return[r,Object.assign(Object.assign({},c),{},{account:l,url:i,apiKeyDisplay:e.getDisplayApiKey(s)})]})))},bingApiKeyInstructionText:function(){var e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-bing-and-yahoo-search-keywords-into-matomo/");return Object(s["translate"])("SearchEngineKeywordsPerformance_BingAPIKeyInstruction",'<a href="https://www.bing.com/webmasters" target="_new" rel="noreferrer noopener">',"</a>",'<a href="'.concat(e,'" target="_blank" rel="noreferrer noopener">'),"</a>")},accountsToDisplay:function(){var e=Object.entries(this.accounts),t=e.filter((function(e){var t=_e(e,2),n=t[1];return n.hasAccess}));return Object.fromEntries(t)}}});Me.render=we;var Ie=Me;function Le(e,t){return qe(e)||Re(e,t)||He(e,t)||Fe()}function Fe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function He(e,t){if(e){if("string"===typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Re(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(i){l=!0,c=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw c}}return o}}function qe(e){if(Array.isArray(e))return e}var ze={key:0},$e={class:"alert alert-warning"},We={key:1},Ye={class:"ui-confirm",id:"confirmRemoveAccountConfig",ref:"confirmRemoveAccountConfig"},Xe=["value"],Je=["value"],Qe={class:"measurableList"},Ze=Object(o["createElementVNode"])("th",null,null,-1),et={key:0},tt={colspan:"7"},nt=["innerHTML"],rt={key:0,class:"icon-error"},ct={key:0,class:"icon-error"},ot=Object(o["createElementVNode"])("br",null,null,-1),at=["title"],lt=Object(o["createElementVNode"])("span",{class:"icon-info"},null,-1),it=["title"],st=Object(o["createElementVNode"])("span",{class:"icon-info"},null,-1),ut=["onSubmit"],dt=["value"],bt=["title"],mt={key:1,class:"configureMeasurableForm"},Ot={class:"account-select"},jt={colspan:"4"},pt={action:"",method:"post"},ft=["value"],gt=["value"],yt=["value"],Et=["value"],ht={key:0},Nt={key:2,class:"oauthconfiguration"},vt={class:"section-heading"},Vt={class:"ui-confirm",id:"confirmDeleteAccount",ref:"confirmDeleteAccount"},St=["value"],kt=["value"],At={class:"oauthconfigoptions"},Ct={key:0},wt={key:1},Bt={key:2},Dt={key:0},_t=Object(o["createElementVNode"])("br",null,null,-1),Tt={class:"accounts"},Pt={class:"logo"},Kt=["src"],xt=["innerHTML"],Ut={key:0},Mt={class:"accounterror"},It=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),Lt={key:1},Ft={key:0},Ht={class:"accounterror"},Gt=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),Rt={key:1},qt={key:0},zt=Object(o["createElementVNode"])("span",{class:"icon-success"},null,-1),$t={key:1,class:"accounterror"},Wt=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),Yt={key:2},Xt=Object(o["createElementVNode"])("span",{class:"icon-error"},null,-1),Jt={class:"cta"},Qt=["onSubmit"],Zt=["value"],en={type:"submit",class:"btn"},tn={class:"account add"},nn=Object(o["createElementVNode"])("div",{class:"icon-add logo"},null,-1),rn=["innerHTML"],cn=["innerHTML"],on=["innerHTML"],an={class:"cta"},ln=["action"],sn=["value"],un={type:"submit",class:"btn"},dn=Object(o["createElementVNode"])("div",{class:"clear"},null,-1),bn={key:3,class:"clientconfiguration"},mn={class:"section-heading"},On=Object(o["createElementVNode"])("br",null,null,-1),jn=["action"],pn=["value"],fn={type:"submit",class:"btn"},gn={key:4};function yn(e,t,n,r,c,a){var l=Object(o["resolveComponent"])("Field"),i=Object(o["resolveComponent"])("Notification"),s=Object(o["resolveComponent"])("ContentBlock"),u=Object(o["resolveDirective"])("content-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(s,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(o["withCtx"])((function(){return[e.isClientConfigured||!e.isClientConfigurable||e.userIsSuperUser?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ze,[Object(o["createElementVNode"])("div",$e,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_GooglePendingConfigurationErrorMessage")),1)])),e.isClientConfigured&&e.isOAuthConfigured?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",We,[Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurables")),1),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurableBelow")),1),Object(o["createElementVNode"])("div",Ye,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigRemovalConfirm",e.removeAccountConfigName)),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Xe),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Je)],512),Object(o["withDirectives"])(Object(o["createElementVNode"])("table",Qe,[Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("General_Measurable")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_EnabledSearchTypes")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("Mobile_Account")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("Goals_URL")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_LastImport")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CreatedBy")),1),Ze])]),Object(o["createElementVNode"])("tbody",null,[0===Object.keys(e.configuredMeasurablesToDisplay).length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",et,[Object(o["createElementVNode"])("td",tt,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_NoWebsiteConfigured")),1)])])):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.configuredMeasurablesToDisplay,(function(t,n,r){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:r,class:Object(o["normalizeClass"])(e.sitesInfos[n].accountValid&&e.sitesInfos[n].urlValid?"":"error")},[Object(o["createElementVNode"])("td",{innerHTML:e.$sanitize(e.sitesInfos[n].name)},null,8,nt),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.googleWebKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeWeb"):"")+" "+Object(o["toDisplayString"])(t.googleImageKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeImage"):"")+" "+Object(o["toDisplayString"])(t.googleVideoKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeVideo"):"")+" "+Object(o["toDisplayString"])(t.googleNewsKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeNews"):""),1),Object(o["createElementVNode"])("td",null,[e.sitesInfos[n].accountValid?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",rt)),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.accounts[t.account].name),1)]),Object(o["createElementVNode"])("td",null,[e.sitesInfos[n].urlValid?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",ct)),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.url.replaceAll("sc-domain:",""))+" ",1),ot,/^sc-domain:/.test(t.url)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:1,class:"property-type",title:e.translate("SearchEngineKeywordsPerformance_DomainPropertyInfo")},[lt,Object(o["createTextVNode"])(" ("+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_DomainProperty"))+") ",1)],8,at)):/^http/.test(t.url)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:2,class:"property-type",title:e.translate("SearchEngineKeywordsPerformance_URLPrefixPropertyInfo")},[st,Object(o["createTextVNode"])(" ("+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_URLPrefixProperty"))+") ",1)],8,it)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.sitesInfos[n].lastRun),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.createdByUser),1),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(o["withModifiers"])((function(t){return e.removeAccountConfig(n,t)}),["prevent"])},[Object(o["createElementVNode"])("input",{type:"hidden",name:"removeConfig",value:n},null,8,dt),t.isDeletionAllowed?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,type:"submit",class:"btn-flat icon-delete",title:e.translate("General_Delete")},null,8,bt)):Object(o["createCommentVNode"])("",!0)],40,ut)])],2)})),128)),e.countOfAccountsWithAccess?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",mt,[Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(l,{uicontrol:"site","full-width":!0,modelValue:e.currentSiteToAdd,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.currentSiteToAdd=t}),title:e.translate("CoreHome_ChooseX",e.translate("General_Measurable"))},null,8,["modelValue","title"])]),Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(l,{uicontrol:"checkbox",modelValue:e.googleTypesToAdd,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.googleTypesToAdd=t}),"var-type":"array",title:"keyword types to fetch","full-width":!0,options:e.googleTypeOptions},null,8,["modelValue","options"])]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",Ot,[Object(o["createVNode"])(l,{uicontrol:"select",modelValue:e.googleAccountAndUrlToAdd,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.googleAccountAndUrlToAdd=t}),title:e.translate("SearchEngineKeywordsPerformance_UrlOfAccount"),"full-width":!0,options:e.urlOptions},null,8,["modelValue","title","options"])])]),Object(o["createElementVNode"])("td",jt,[Object(o["createElementVNode"])("form",pt,[Object(o["createElementVNode"])("input",{type:"hidden",name:"googleSiteId",value:e.currentSiteToAdd.id},null,8,ft),Object(o["createElementVNode"])("input",{type:"hidden",name:"googleAccountAndUrl",value:e.googleAccountAndUrlToAdd},null,8,gt),Object(o["createElementVNode"])("input",{type:"hidden",name:"googleTypes",value:e.googleTypesToAdd.length?e.googleTypesToAdd:"web"},null,8,yt),Object(o["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("General_Save")},null,8,Et)])])],512)),[[o["vShow"],e.isAddingMeasurable]]):Object(o["createCommentVNode"])("",!0)])],512),[[u]]),e.countOfAccountsWithAccess?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ht,[Object(o["createElementVNode"])("button",{id:"addWebsiteBtn",class:"btn",onClick:t[3]||(t[3]=function(t){return e.isAddingMeasurable=!0})},Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddConfiguration")),1)],512)),[[o["vShow"],!e.isAddingMeasurable]]):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0),e.isClientConfigured?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Nt,[Object(o["createElementVNode"])("h3",vt,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectGoogleAccounts")),1),Object(o["createElementVNode"])("div",Vt,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountRemovalConfirm",e.removeAccountName)),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,St),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,kt)],512),Object(o["createElementVNode"])("div",At,[e.isOAuthConfigured?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",Ct,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CurrentlyConnectedAccounts",e.countOfAccountsWithAccess)),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",wt,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectFirstAccount")),1)),e.hasOAuthError?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",Bt,[Object(o["createVNode"])(i,{context:"error",type:"transient"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthError"))+" ",1),e.hasOAuthError.length>5?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Dt,[_t,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.hasOAuthError),1)])):Object(o["createCommentVNode"])("",!0)]})),_:1})])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",Tt,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.accountsToDisplay,(function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:n,class:"account"},[Object(o["createElementVNode"])("div",Pt,[Object(o["createElementVNode"])("img",{src:t.picture},null,8,Kt)]),Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(t.name),1),Object(o["createElementVNode"])("p",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_AccountAddedBy",t.username,t.created_formatted))},null,8,xt),"string"===typeof t.hasError?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ut,[Object(o["createElementVNode"])("p",Mt,[It,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountConnectionValidationError"))+" "+Object(o["toDisplayString"])(t.hasError),1)]),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ReAddAccountIfPermanentError")),1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Lt,[0===Object.keys(t.urls).length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ft,[Object(o["createElementVNode"])("p",Ht,[Gt,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Rt,[e.accountHasAvailableSites(t)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",qt,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AvailableSites")),1),Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object.entries(t.urls).filter((function(e){var t=Le(e,2),n=t[1];return"siteUnverifiedUser"!==n})),(function(e,t){var n=Le(e,1),r=n[0];return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},[zt,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(r.replaceAll("sc-domain:","")),1)])})),128))])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",$t,[Wt,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])),-1!==Object.values(t.urls).indexOf("siteUnverifiedUser")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Yt,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_UnverifiedSites")),1),Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object.entries(t.urls).filter((function(e){var t=Le(e,2),n=t[1];return"siteUnverifiedUser"===n})),(function(e,t){var n=Le(e,1),r=n[0];return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},[Xt,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(r.replaceAll("sc-domain:","")),1)])})),128))])])):Object(o["createCommentVNode"])("",!0)]))])),Object(o["createElementVNode"])("div",Jt,[Object(o["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(o["withModifiers"])((function(n){return e.removeAccount(t,n)}),["prevent"])},[Object(o["createElementVNode"])("input",{type:"hidden",name:"remove",value:n},null,8,Zt),Object(o["createElementVNode"])("button",en,Object(o["toDisplayString"])(e.translate("General_Remove")),1)],40,Qt)])])})),128)),Object(o["createElementVNode"])("div",tn,[nn,Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccount")),1),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccountDescription","Google")),1),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_RequiredAccessTypes")),1),Object(o["createElementVNode"])("ul",null,[Object(o["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_GoogleAccountAccessTypeSearchConsoleData"))},null,8,rn),Object(o["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_GoogleAccountAccessTypeProfileInfo"))},null,8,cn),Object(o["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_GoogleAccountAccessTypeOfflineAccess"))},null,8,on)]),Object(o["createElementVNode"])("div",an,[Object(o["createElementVNode"])("form",{method:"post",action:e.forwardToAuthUrl,id:"clientauthform"},[Object(o["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.authNonce},null,8,sn),Object(o["createElementVNode"])("button",un,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_StartOAuth")),1)],8,ln)])]),dn])])])):Object(o["createCommentVNode"])("",!0),e.isClientConfigurable&&e.isClientConfigured&&e.userIsSuperUser?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",bn,[Object(o["createElementVNode"])("h3",mn,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthClientConfig")),1),Object(o["createElementVNode"])("p",null,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientId"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.clientId),1)]),Object(o["createElementVNode"])("p",null,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientSecret"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.clientSecret),1)]),On,Object(o["createElementVNode"])("form",{action:e.removeConfigUrl,method:"POST",enctype:"multipart/form-data",id:"removeConfigForm"},[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_DeleteUploadedClientConfig"))+":",1),Object(o["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.formNonce},null,8,pn),Object(o["createElementVNode"])("button",fn,Object(o["toDisplayString"])(e.translate("General_Remove")),1)],8,jn)])):Object(o["createCommentVNode"])("",!0),e.userIsSuperUser?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",gn,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.componentExtensions,(function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:n},[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(t),{"manual-config-nonce":e.configConnectProps.manualConfigNonce,"base-domain":e.configConnectProps.baseDomain,"base-url":e.configConnectProps.baseUrl,"manual-action-url":e.configConnectProps.manualActionUrl,"primary-text":e.configConnectProps.primaryText,"radio-options":e.configConnectProps.radioOptions,"manual-config-text":e.configConnectProps.manualConfigText,"connect-accounts-url":e.configConnectProps.connectAccountsUrl,"connect-accounts-btn-text":e.configConnectProps.connectAccountsBtnText,"auth-url":e.configConnectProps.authUrl,"unlink-url":e.configConnectProps.unlinkUrl,strategy:e.configConnectProps.strategy,"connected-with":e.configConnectProps.connectedWith},null,8,["manual-config-nonce","base-domain","base-url","manual-action-url","primary-text","radio-options","manual-config-text","connect-accounts-url","connect-accounts-btn-text","auth-url","unlink-url","strategy","connected-with"]))])})),128))])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["content-title"])])}function En(e,t){return Sn(e)||Vn(e,t)||Nn(e,t)||hn()}function hn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nn(e,t){if(e){if("string"===typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(e,t):void 0}}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vn(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(i){l=!0,c=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw c}}return o}}function Sn(e){if(Array.isArray(e))return e}var kn=Object(o["defineComponent"])({props:{configuredMeasurables:{type:Object,required:!0},isClientConfigured:Boolean,isClientConfigurable:Boolean,isOAuthConfigured:Boolean,clientId:String,clientSecret:String,accounts:{type:Object,required:!0},sitesInfos:{type:Object,required:!0},currentSite:{type:Object,required:!0},urlOptions:{type:[Object,Array],required:!0},hasOAuthError:[String,Boolean],authNonce:{type:String,required:!0},formNonce:String,countOfAccountsWithAccess:Number,userIsSuperUser:String,extensions:Array,removeConfigUrl:String,configureConnectionProps:{type:Object,required:!0}},components:{ContentBlock:s["ContentBlock"],Field:Be["Field"],Notification:s["Notification"]},directives:{ContentTable:s["ContentTable"]},data:function(){return{removeAccountConfigName:"",removeAccountName:"",isAddingMeasurable:!1,currentSiteToAdd:this.currentSite,googleAccountAndUrlToAdd:null,googleTypesToAdd:["web"],clientFile:null,clientText:""}},methods:{removeAccountConfig:function(e,t){var n=this.sitesInfos;this.removeAccountConfigName=n[e].name,s["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveAccountConfig,{yes:function(){t.target.submit()}})},removeAccount:function(e,t){this.removeAccountName=e.name,s["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteAccount,{yes:function(){t.target.submit()}})},accountHasAvailableSites:function(e){var t=["siteOwner","siteFullUser","siteRestrictedUser"];return Object.values(e.urls).some((function(e){return-1!==t.indexOf(e)}))}},computed:{configuredMeasurablesToDisplay:function(){var e=this,t=Object.entries(this.configuredMeasurables);return Object.fromEntries(t.filter((function(t){var n=En(t,2),r=n[1],c=r.googleSearchConsoleUrl.split("##"),o=En(c,1),a=o[0];return!!e.accounts[a]})).map((function(t){var n=En(t,2),r=n[0],c=n[1],o=c.googleSearchConsoleUrl.split("##"),a=En(o,2),l=a[0],i=a[1],s=e.accounts[l].apiKey;return[r,Object.assign(Object.assign({},c),{},{account:l,url:i,apiKeyDisplay:De(s)})]})))},accountsToDisplay:function(){var e=Object.entries(this.accounts),t=e.filter((function(e){var t=En(e,2),n=t[1];return n.hasAccess}));return Object.fromEntries(t)},googleTypeOptions:function(){return{web:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeWeb"),image:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeImage"),video:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeVideo"),news:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeNews")}},forwardToAuthUrl:function(){return"?".concat(s["MatomoUrl"].stringify(Object.assign(Object.assign({},s["MatomoUrl"].urlParsed.value),{},{action:"forwardToAuth"})))},visitOAuthHowTo:function(){var e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-google-search-keywords-in-matomo/#how-to-set-up-google-oauth-client-config");return Object(s["translate"])("SearchEngineKeywordsPerformance_VisitOAuthHowTo",'<a target="_blank" href="'.concat(e,'" rel="noreferrer noopener">'),"</a>","Google")},componentExtensions:function(){var e=this.extensions;return Object(o["markRaw"])(e.map((function(e){return Object(s["useExternalPluginComponent"])(e.plugin,e.component)})))},configConnectProps:function(){return this.configureConnectionProps}}});kn.render=yn;var An=kn;function Cn(e,t){return Tn(e)||_n(e,t)||Bn(e,t)||wn()}function wn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bn(e,t){if(e){if("string"===typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _n(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(i){l=!0,c=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw c}}return o}}function Tn(e){if(Array.isArray(e))return e}var Pn={class:"ui-confirm",id:"confirmRemoveAccountConfig",ref:"confirmRemoveAccountConfig"},Kn=["value"],xn=["value"],Un={class:"measurableList"},Mn=Object(o["createElementVNode"])("th",null,null,-1),In=["innerHTML"],Ln={key:0,class:"icon-error"},Fn={key:0,class:"icon-error"},Hn=["onSubmit"],Gn=["value"],Rn=["title"],qn={key:0},zn={colspan:"6",align:"right"},$n={key:1,class:"configureMeasurableForm"},Wn={colspan:"2"},Yn={class:"account-select"},Xn={colspan:"3"},Jn={action:"",method:"post"},Qn=["value"],Zn=["value"],er=["value"],tr={class:"ui-confirm",id:"confirmDeleteAccount",ref:"confirmDeleteAccount"},nr=["value"],rr=["value"],cr={class:"oauthconfigoptions"},or={key:0},ar={key:1},lr={key:2},ir={key:0},sr=Object(o["createElementVNode"])("br",null,null,-1),ur={class:"accounts"},dr={class:"logo"},br=["src"],mr=["innerHTML"],Or={key:0},jr={class:"accounterror"},pr=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),fr={key:1},gr={key:0,class:"accounterror"},yr=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),Er={key:1},hr={key:0},Nr=Object(o["createElementVNode"])("span",{class:"icon-success"},null,-1),vr={key:1,class:"accounterror"},Vr=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),Sr={key:2},kr=Object(o["createElementVNode"])("span",{class:"icon-error"},null,-1),Ar={key:2,class:"accounterror"},Cr=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),wr={key:3,class:"accounterror"},Br=Object(o["createElementVNode"])("span",{class:"icon-warning"},null,-1),Dr=["innerHTML"],_r=["innerHTML"],Tr={class:"cta"},Pr=["action"],Kr=["value"],xr={type:"submit",class:"btn"},Ur=["onSubmit"],Mr=["value"],Ir={type:"submit",class:"btn"},Lr={class:"account add"},Fr=Object(o["createElementVNode"])("div",{class:"icon-add logo"},null,-1),Hr={class:"cta"},Gr=["action"],Rr=["value"],qr={type:"submit",class:"btn"},zr=Object(o["createElementVNode"])("div",{class:"clear"},null,-1),$r={key:3,class:"clientconfighelp"},Wr=["innerHTML"],Yr=Object(o["createElementVNode"])("br",null,null,-1),Xr=Object(o["createElementVNode"])("br",null,null,-1),Jr={method:"post",action:"",id:"clientconfigform"},Qr=["value"],Zr={type:"submit",class:"btn"};function ec(e,t,n,r,c,a){var l=Object(o["resolveComponent"])("ContentBlock"),i=Object(o["resolveComponent"])("Field"),s=Object(o["resolveComponent"])("Notification"),u=Object(o["resolveDirective"])("content-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexConfigurationTitle")),1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexConfigurationDescription")),1)]})),_:1},8,["content-title"]),e.isClientConfigured&&e.isOAuthConfigured?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:Object(o["normalizeClass"])(Object.keys(e.configuredMeasurables).length?"configured":"")},[Object(o["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurables")},{default:Object(o["withCtx"])((function(){var n;return[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurableBelow")),1),Object(o["createElementVNode"])("div",Pn,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigRemovalConfirm",e.removeAccountConfigName)),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Kn),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,xn)],512),Object(o["withDirectives"])(Object(o["createElementVNode"])("table",Un,[Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("General_Measurable")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("Mobile_Account")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("Goals_URL")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_LastImport")),1),Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CreatedBy")),1),Mn])]),Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.configuredMeasurablesToDisplay,(function(t,n,r){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:r,class:Object(o["normalizeClass"])(e.sitesInfos[n].accountValid&&e.sitesInfos[n].urlValid?"":"error")},[Object(o["createElementVNode"])("td",{innerHTML:e.$sanitize(e.sitesInfos[n].name)},null,8,In),Object(o["createElementVNode"])("td",null,[e.sitesInfos[n].accountValid?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ln)),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.accounts[t.account].name),1)]),Object(o["createElementVNode"])("td",null,[e.sitesInfos[n].urlValid?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Fn)),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.hostUrl||t.host),1)]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.sitesInfos[n].lastRun),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.createdByUser),1),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(o["withModifiers"])((function(t){return e.removeAccountConfig(n,t)}),["prevent"])},[Object(o["createElementVNode"])("input",{type:"hidden",name:"removeConfig",value:n},null,8,Gn),t.isDeletionAllowed?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,type:"submit",class:"btn-flat icon-delete",title:e.translate("General_Delete")},null,8,Rn)):Object(o["createCommentVNode"])("",!0)],40,Hn)])],2)})),128)),e.countOfAccountsWithAccess?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",qn,[Object(o["createElementVNode"])("td",zn,[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[0]||(t[0]=function(t){return e.isAddingMeasurable=!0})},Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddConfiguration")),1)])],512)),[[o["vShow"],!e.isAddingMeasurable]]):Object(o["createCommentVNode"])("",!0),e.countOfAccountsWithAccess?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",$n,[Object(o["createElementVNode"])("td",null,[Object(o["createVNode"])(i,{uicontrol:"site","full-width":!0,modelValue:e.currentSiteToAdd,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.currentSiteToAdd=t}),title:e.translate("CoreHome_ChooseX",e.translate("General_Measurable"))},null,8,["modelValue","title"])]),Object(o["createElementVNode"])("td",Wn,[Object(o["createElementVNode"])("div",Yn,[Object(o["createVNode"])(i,{uicontrol:"select",modelValue:e.yandexAccountAndHostIdToAdd,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.yandexAccountAndHostIdToAdd=t}),title:e.translate("SearchEngineKeywordsPerformance_UrlOfAccount"),"full-width":!0,options:e.urlOptions},null,8,["modelValue","title","options"])])]),Object(o["createElementVNode"])("td",Xn,[Object(o["createElementVNode"])("form",Jn,[Object(o["createElementVNode"])("input",{type:"hidden",name:"yandexSiteId",value:null===(n=e.currentSiteToAdd)||void 0===n?void 0:n.id},null,8,Qn),Object(o["createElementVNode"])("input",{type:"hidden",name:"yandexAccountAndHostId",value:e.yandexAccountAndHostIdToAdd},null,8,Zn),Object(o["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("General_Save")},null,8,er)])])],512)),[[o["vShow"],e.isAddingMeasurable]]):Object(o["createCommentVNode"])("",!0)])],512),[[u]])]})),_:1},8,["content-title"])],2)):Object(o["createCommentVNode"])("",!0),e.isClientConfigured?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:1,class:Object(o["normalizeClass"])("oauthconfiguration ".concat(e.isOAuthConfigured?"configured":""," yandex"))},[Object(o["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_ConnectYandexAccounts")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",tr,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountRemovalConfirm",e.removeAccountName)),1),Object(o["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,nr),Object(o["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,rr)],512),Object(o["createElementVNode"])("div",cr,[e.isOAuthConfigured?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",or,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CurrentlyConnectedAccounts",e.countOfAccountsWithAccess)),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",ar,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectFirstAccount")),1)),e.hasOAuthError?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",lr,[Object(o["createVNode"])(s,{context:"error"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthError"))+" ",1),"string"===typeof e.hasOAuthError?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",ir,[sr,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.hasOAuthError),1)])):Object(o["createCommentVNode"])("",!0)]})),_:1})])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",ur,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.accountsToDisplay,(function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:n,class:Object(o["normalizeClass"])("account ".concat(0===Object.keys(t.urls).length||"string"===typeof t.hasError?"invalid":""))},[Object(o["createElementVNode"])("div",dr,[Object(o["createElementVNode"])("img",{src:t.picture},null,8,br)]),Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(t.name),1),Object(o["createElementVNode"])("p",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_AccountAddedBy",t.username,t.created_formatted))},null,8,mr),"string"===typeof t.hasError?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Or,[Object(o["createElementVNode"])("p",jr,[pr,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountConnectionValidationError"))+" "+Object(o["toDisplayString"])(t.hasError),1)]),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ReAuthenticateIfPermanentError")),1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",fr,[0===Object.keys(t.urls).length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",gr,[yr,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Er,[Object.values(t.urls).some((function(e){return e.verified}))?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",hr,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AvailableSites")),1),Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object.entries(t.urls).filter((function(e){var t=Cn(e,2),n=t[1];return n.verified})),(function(e,t){var n=Cn(e,1),r=n[0];return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},[Nr,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(r),1)])})),128))])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",vr,[Vr,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])),Object.values(t.urls).some((function(e){return!e.verified}))?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Sr,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_UnverifiedSites")),1),Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object.entries(t.urls).filter((function(e){var t=Cn(e,2),n=t[1];return!n.verified})),(function(e,t){var n=Cn(e,1),r=n[0];return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},[kr,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(r),1)])})),128))])])):Object(o["createCommentVNode"])("",!0)]))])),t.authDaysAgo>=180?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",Ar,[Cr,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthAccessTimedOut")),1)])):t.authDaysAgo>=150?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",wr,[Br,Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_OAuthAccessWillTimeOutSoon",180-t.authDaysAgo))},null,8,Dr)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",{key:4,innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_OAuthAccessWillTimeOut",180,180-t.authDaysAgo))},null,8,_r)),Object(o["createElementVNode"])("div",Tr,[Object(o["createElementVNode"])("form",{method:"post",action:e.forwardToYandexAuthUrl},[Object(o["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.auth_nonce},null,8,Kr),Object(o["createElementVNode"])("button",xr,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_Reauthenticate")),1)],8,Pr),Object(o["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(o["withModifiers"])((function(n){return e.removeAccount(t,n)}),["prevent"])},[Object(o["createElementVNode"])("input",{type:"hidden",name:"remove",value:n},null,8,Mr),Object(o["createElementVNode"])("button",Ir,Object(o["toDisplayString"])(e.translate("General_Remove")),1)],40,Ur)])],2)})),128)),Object(o["createElementVNode"])("div",Lr,[Fr,Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccount")),1),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccountDescription","Yandex")),1),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccountYandex","180")),1),Object(o["createElementVNode"])("div",Hr,[Object(o["createElementVNode"])("form",{method:"post",action:e.forwardToYandexAuthUrl,id:"clientauthform"},[Object(o["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.auth_nonce},null,8,Rr),Object(o["createElementVNode"])("button",qr,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_StartOAuth")),1)],8,Gr)])]),zr])])]})),_:1},8,["content-title"])],2)):Object(o["createCommentVNode"])("",!0),e.isClientConfigured&&e.userIsSuperUser?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:2,class:Object(o["normalizeClass"])("clientconfiguration ".concat(e.isClientConfigured?"configured":""))},[Object(o["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_OAuthClientConfig")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("p",null,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientId"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.clientId),1)]),Object(o["createElementVNode"])("p",null,[Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientSecret"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.clientSecret),1)])]})),_:1},8,["content-title"])],2)):Object(o["createCommentVNode"])("",!0),e.userIsSuperUser?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$r,[Object(o["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_HowToGetOAuthClientConfig")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("p",{innerHTML:e.visitOAuthHowTo},null,8,Wr),Object(o["createElementVNode"])("p",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthExampleText"))+" ",1),Yr,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexFieldUrlToAppSite"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.baseDomain)+" ",1),Xr,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexFieldCallbackUri"))+":",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.baseDomainUrl)+"?module=SearchEngineKeywordsPerformance&action=processYandexAuthCode ",1)])]})),_:1},8,["content-title"])])):Object(o["createCommentVNode"])("",!0),e.userIsSuperUser?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:4,class:Object(o["normalizeClass"])(e.isClientConfigured?"":"clientconfiguration")},[Object(o["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_SetUpOAuthClientConfig")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("form",Jr,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ProvideYandexClientConfig")),1),Object(o["createVNode"])(i,{uicontrol:"text",name:"clientid",modelValue:e.clientIdToUse,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.clientIdToUse=t}),title:e.translate("SearchEngineKeywordsPerformance_ClientId")},null,8,["modelValue","title"]),Object(o["createVNode"])(i,{uicontrol:"text",name:"clientsecret",modelValue:e.clientSecretToUse,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.clientSecretToUse=t}),title:e.translate("SearchEngineKeywordsPerformance_ClientSecret")},null,8,["modelValue","title"]),Object(o["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.formNonce},null,8,Qr),Object(o["createElementVNode"])("button",Zr,Object(o["toDisplayString"])(e.translate("General_Save")),1)])]})),_:1},8,["content-title"])],2)):Object(o["createCommentVNode"])("",!0)])}function tc(e,t){return ac(e)||oc(e,t)||rc(e,t)||nc()}function nc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rc(e,t){if(e){if("string"===typeof e)return cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cc(e,t):void 0}}function cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oc(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(i){l=!0,c=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw c}}return o}}function ac(e){if(Array.isArray(e))return e}var lc=Object(o["defineComponent"])({props:{isClientConfigured:Boolean,isClientConfigurable:Boolean,isOAuthConfigured:Boolean,clientId:String,clientSecret:String,configuredMeasurables:{type:Object,required:!0},sitesInfos:{type:Object,required:!0},currentSite:{type:Object,required:!0},urlOptions:{type:[Object,Array],required:!0},hasOAuthError:[String,Boolean],accounts:{type:Object,required:!0},auth_nonce:{type:String,required:!0},formNonce:{type:String,required:!0},countOfAccountsWithAccess:Number,userIsSuperUser:String,baseDomain:String,baseDomainUrl:String},components:{ContentBlock:s["ContentBlock"],Field:Be["Field"],Notification:s["Notification"]},directives:{ContentTable:s["ContentTable"]},data:function(){return{removeAccountConfigName:"",removeAccountName:"",isAddingMeasurable:!1,currentSiteToAdd:this.currentSite,yandexAccountAndHostIdToAdd:null,clientIdToUse:"",clientSecretToUse:""}},methods:{removeAccountConfig:function(e,t){var n=this.sitesInfos;this.removeAccountConfigName=n[e].name,s["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveAccountConfig,{yes:function(){t.target.submit()}})},removeAccount:function(e,t){this.removeAccountName=e.name,s["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteAccount,{yes:function(){t.target.submit()}})}},computed:{configuredMeasurablesToDisplay:function(){var e=this,t=Object.entries(this.configuredMeasurables);return Object.fromEntries(t.filter((function(t){var n=tc(t,2),r=n[1],c=r.yandexAccountAndHostId.split("##"),o=tc(c,1),a=o[0];return!!e.accounts[a]})).map((function(t){var n=tc(t,2),r=n[0],c=n[1],o=c.yandexAccountAndHostId.split("##"),a=tc(o,2),l=a[0],i=a[1],s=e.accounts[l],u=s.apiKey,d=Object.entries(s.urls).find((function(e){var t=tc(e,2),n=t[1];return n.host_id===i})),b=null===d||void 0===d?void 0:d[0];return[r,Object.assign(Object.assign({},c),{},{account:l,host:i,hostUrl:b,apiKeyDisplay:De(u)})]})))},forwardToYandexAuthUrl:function(){return"?".concat(s["MatomoUrl"].stringify(Object.assign(Object.assign({},s["MatomoUrl"].urlParsed.value),{},{action:"forwardToYandexAuth"})))},visitOAuthHowTo:function(){var e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-yandex-search-keywords-into-matomo/");return Object(s["translate"])("SearchEngineKeywordsPerformance_VisitOAuthHowTo",'<a target="_blank" href="'.concat(e,'" rel="noreferrer noopener">'),"</a>","Yandex")},accountsToDisplay:function(){var e=Object.entries(this.accounts),t=e.filter((function(e){var t=tc(e,2),n=t[1];return n.hasAccess}));return Object.fromEntries(t)}}});lc.render=ec;var ic=lc,sc={class:"form-group row"},uc={class:"col s12"},dc=Object(o["createElementVNode"])("br",null,null,-1),bc=["innerHTML"],mc=Object(o["createElementVNode"])("br",null,null,-1),Oc=Object(o["createElementVNode"])("br",null,null,-1),jc=Object(o["createElementVNode"])("br",null,null,-1),pc={class:"form-group row"},fc={class:"col s12 m6"},gc={id:"configFileUploadForm",action:"",method:"POST",enctype:"multipart/form-data"},yc=Object(o["createElementVNode"])("input",{type:"hidden",id:"client",name:"client"},null,-1),Ec=["value"],hc=["disabled"],Nc=Object(o["createElementVNode"])("span",{class:"icon-upload"},null,-1),vc=Object(o["createElementVNode"])("span",{class:"icon-upload"},null,-1);function Vc(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",sc,[Object(o["createElementVNode"])("div",uc,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureTheImporterLabel1")),1),Object(o["createElementVNode"])("p",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureTheImporterLabel2")),1),dc,Object(o["createElementVNode"])("span",{innerHTML:e.$sanitize(e.setupGoogleAnalyticsImportFaq)},null,8,bc)]),Object(o["createElementVNode"])("p",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthExampleText")),1),mc,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_GoogleAuthorizedJavaScriptOrigin"))+": ",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.baseDomain),1),Oc,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_GoogleAuthorizedRedirectUri"))+": ",1),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.baseUrl)+Object(o["toDisplayString"])(e.redirectUri),1),jc])])]),Object(o["createElementVNode"])("div",pc,[Object(o["createElementVNode"])("div",fc,[Object(o["createElementVNode"])("form",gc,[Object(o["createElementVNode"])("input",{type:"file",id:"clientfile",name:"clientfile",accept:".json",onChange:t[0]||(t[0]=function(){return e.processFileChange&&e.processFileChange.apply(e,arguments)}),style:{display:"none"}},null,32),yc,Object(o["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.manualConfigNonce},null,8,Ec),Object(o["createElementVNode"])("button",{type:"button",class:"btn",onClick:t[1]||(t[1]=function(t){return e.selectConfigFile()}),disabled:e.isUploadButtonDisabled},[Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,[Nc,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("General_Upload")),1)],512),[[o["vShow"],!e.isUploadButtonDisabled]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",null,[vc,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_Uploading")),1)],512),[[o["vShow"],e.isUploadButtonDisabled]])],8,hc)])])])],64)}var Sc=Object(o["defineComponent"])({data:function(){return{redirectUri:"?module=SearchEngineKeywordsPerformance&action=processAuthCode",isSelectingFile:!1,isUploading:!1}},props:{manualConfigNonce:{type:String,required:!0},baseDomain:{type:String,required:!0},baseUrl:{type:String,required:!0}},methods:{selectConfigFile:function(){this.isSelectingFile=!0;var e=document.getElementById("clientfile");e&&e.click()},processFileChange:function(){var e=document.getElementById("clientfile"),t=document.getElementById("configFileUploadForm");e&&e.value&&t&&(this.isUploading=!0,t.submit())},checkForCancel:function(){if(this.isSelectingFile&&!this.isUploading){var e=document.getElementById("clientfile");e&&!e.value&&(this.isSelectingFile=!1)}}},computed:{setupGoogleAnalyticsImportFaq:function(){var e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-google-search-keywords-in-matomo/#how-to-set-up-google-search-console-and-verify-your-website");return Object(s["translate"])("SearchEngineKeywordsPerformance_ConfigureTheImporterLabel3",'<a href="'.concat(e,'" rel="noreferrer noopener" target="_blank">'),"</a>")},isUploadButtonDisabled:function(){return this.isSelectingFile||this.isUploading}},mounted:function(){document.body.onfocus=this.checkForCancel}});Sc.render=Vc;var kc=Sc;
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */}})}));
//# sourceMappingURL=SearchEngineKeywordsPerformance.umd.min.js.map